function shadeColor(e,t){var r=parseInt(e.slice(1),16),n=Math.round(2.55*t),o=(r>>16)+n,i=(r>>8&255)+n,a=(255&r)+n;return"#"+(16777216+65536*(255>o?1>o?0:o:255)+256*(255>i?1>i?0:i:255)+(255>a?1>a?0:a:255)).toString(16).slice(1)}function ColorLuminance(e,t){e=String(e).replace(/[^0-9a-f]/gi,""),e.length<6&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),t=t||0;var r,n,o="#";for(n=0;3>n;n++)r=parseInt(e.substr(2*n,2),16),r=Math.round(Math.min(Math.max(0,r+r*t),255)).toString(16),o+=("00"+r).substr(r.length);return o}function colorizeByClass(e,t){for(var r=document.querySelectorAll("."+e),n=r.length,o=n;o--;)r[n-(o+1)].style.fill=t}function colorSkin(e){colorizeByClass("upperlip",shadeColor(e,-10)),colorizeByClass("lowerlip",shadeColor(e,10))}function colorize(e,t){var r=window.forms,o=e,a=[],s=shadeColor(t,25),l=shadeColor(t,50),c=shadeColor(t,75),u=shadeColor(t,-25),h=shadeColor(t,-50),d=shadeColor(t,-75);for(var f in r){var p=Object.keys(r[f]);for(var g in p)if(p[g].toLowerCase()===o){console.log("id",o);var m=o.replace(/^[a-z]/,function(e){return e.toUpperCase()});if("body"===o||"body_head"===o||"ears"===o||"nose"===o||"age"===o||"mouth"===o.slice(0,4)){a=skinLayers;var v="skinColor";colorSkin(t)}else if("facialhair"===o||"hair"===o){a=window.hairLayers;var v="hairColor"}else{a=[];var v=o+"Color";if("irisColor"===v||"browsColor"===v||"lashes"===v)for(i in r[0].Emotion){var y=r[0].Emotion[i];""!=y&&a.push(o+"_"+y)}else for(i in r[f][m]){var y=r[f][m][i];""!=y&&a.push(o+"_"+y)}}origList=a,a=getAffectedListFromOrig(origList,multiLayer);var _=t.toString(),b=new Array;b[v]=_,hash.add(b),modCharacter(v,_);for(n in a){fullId="#"+a[n];for(var x=document.querySelectorAll(fullId+" .alpha"),w=document.querySelectorAll(fullId+" .alpha--light"),S=document.querySelectorAll(fullId+" .alpha--lighter"),k=document.querySelectorAll(fullId+" .alpha--lightest"),C=document.querySelectorAll(fullId+" .alpha--dark"),L=document.querySelectorAll(fullId+" .alpha--darker"),A=document.querySelectorAll(fullId+" .alpha--darkest"),q=x.length,E=w.length,B=S.length,F=k.length,T=C.length,M=L.length,j=A.length;q--;)colorPaths(x[q],t,h);for(;E--;)colorPaths(w[E],s,u);for(;B--;)colorPaths(S[B],l,t);for(;F--;)colorPaths(k[F],c,s);for(;T--;)colorPaths(C[T],u,h);for(;M--;)colorPaths(L[M],h,d);for(;j--;)colorPaths(A[j],d,d)}}}}function colorPaths(e,t,r){"none"!=e.style.fill&&""!=e.style.fill&&(e.style.fill=t),"none"!=e.style.stroke&&""!=e.style.stroke&&(e.style.stroke=r)}function processPaths(e,t){for(p in e)if("function"==typeof e[p].attr){var r=e[p].attr("id");if(void 0===r)break;if("#mouth"===fullId.slice(0,6)&&"upperlip"!=r&&"lowerlip"!=r&&"lowerlip-shadow"!=r&&"upperlip-shadow"!=r)continue;var n=viewport.select("#"+r).attr("style");if(void 0===n)break;for(var o,i,a,s=n.split(";"),l=s.length,c={style:{}};l--;)o=s[l].split(":")," "!=o&&1!==o.length&&(i=o[0].trim(),a=o[1].trim(),i.length>0&&a.length>0&&(c.style[i]=a));var u=t.toString(),h=replacementStyle(c,u);viewport.selectAll("#"+r).attr({style:h}),newStroke=shadeColor(u,-25),void 0===c.style["stroke-width"]&&(u=shadeColor(u,-25))}}function getAffectedListFromOrig(e,t){affectedList=[];var r;for(a in e){r=!1;for(lyr in t)if(e[a]==t[lyr][0])for(var n=1;n<=t[lyr][1];n++)idOf=e[a]+"_"+n+"_of_"+t[lyr][1],affectedList.push(idOf),r=!0;r||affectedList.push(e[a])}return affectedList}function replacementStyle(e,t){var r=e.style,o="";for(n in Object.keys(r)){var i=Object.keys(r)[n];if("fill"===i)if("none"!=r[i])if(void 0===e.style["stroke-width"])var a=ColorLuminance(t,-.12);else var a=t;else var a=r[i];else if("stroke"===i)if("none"!=r[i]){if(void 0!=e.style["stroke-width"])var a=ColorLuminance(t,-.2)}else var a=r[i];else var a=r[i];var s=i+": "+a+"; ";o=o.concat(s)}return o}function applyColor(e,t,r){if(fullId="#"+e,ga("send","event","menu","color",fullId+"_#"+t),null!=r){var o=r.selectAll("path");if("body_athletic_2_of_2"===e){var i=r.selectAll("ellipse");newArray=[],newArray.push.apply(newArray,o),newArray.push.apply(newArray,i),o=newArray}for(p in o)if("function"==typeof o[p].attr){var a=o[p].attr("id"),s=r.select("#"+a).attr("style");if(void 0==s)continue;for(var l,c,u,h=s.split(";"),d=h.length,f={style:{}};d--;)l=h[d].split(":"),c=l[0].replace(/\s+/g,""),l[1]&&(u=l[1].replace(/\s+/g,"")),c.length>0&&u.length>0&&(f.style[c]=u);newStyle=f.style;var g="";for(n in Object.keys(newStyle)){var m=Object.keys(newStyle)[n];if("fill"===m)if("none"!=newStyle[m])if(void 0===f.style["stroke-width"])var v=ColorLuminance(t,-.12);else var v="#"+t;else var v=newStyle[m];else if("stroke"===m)if("none"!=newStyle[m]){if(void 0!=f.style["stroke-width"])var v=ColorLuminance(t,-.2)}else var v=newStyle[m];else var v=newStyle[m];var y=m+": "+v+"; ";g=g.concat(y)}r.selectAll("#"+a).attr({style:g}),newStroke=shadeColor(t,-25),void 0===f.style["stroke-width"]}}}function download(){var e="my_character.svg",t='<!-- ?xml version="1.0" encoding="UTF-8" standalone="no"? -->\n<svg xmlns="http://www.w3.org/2000/svg" id="character" width="560" height="560">\n',r=document.getElementById("svg1").childNodes;currentUser&&""!==currentUser.cc.personnageActuel&&(e=currentUser.cc.personnageActuel+".svg");var n=Array.prototype.slice.call(r);n.forEach(function(e){if(void 0!=e.style&&0!=e.style.opacity){var r=e.innerHTML;"<desc>Created with Snap</desc><defs></defs>"===r.slice(-43)&&(r=r.slice(0,-43)),t+=r}}),t+="</svg>";var o=document.createElement("a");if(o.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(t)),o.setAttribute("download",e),document.createEvent){var i=document.createEvent("MouseEvents");i.initEvent("click",!0,!0),o.dispatchEvent(i)}else o.click()}function createForm(e,t){var r=document.querySelector("#content_1");r.innerHTML="";var e=e||window.sex,t=t||window.forms,n=["Head","Accessories","Torso","Body","Legs","Feet"],o='<h2 class="sidebar__title">Categories</h2>';o+='<ul class="section__list">';for(var i in t){var a=document.querySelector("#content_1"),s="",l=0;o+='<section class="accordeon__section-label"><span class="accordeon__section-title">'+n[i]+'</span><div class="accordeon__svg-container section-btn--hide"><svg width="25" height="25"><use xlink:href="#accordeon_btn"/></svg></div></section><div class="accordeon__content section--hide">';t.length;for(var c in t[i]){o+='    <a class="section__link"><li class="sbl__option" tabindex="0">'+c+"</li></a>";var u=c,h=u.toLowerCase();s+='    <div class="Row options__container options__'+h+'"><span class="svg__section__title">'+h+'</span><div class="thumbnails__container">';var d=(hash.get(h),t[i][c].map(function(e,t){var r="#"+h+"_"+e,n=window.multiLayer,o=getSectionsFromIdMultiLayer(n,r);if("emotion"===h){var o=[],i=GetEmotionGetLayers(e);for(emo in i){var a="#"+i[emo]+"_"+e;o.push(a)}}var l="";for(t in o){var c=document.querySelector(o[t]);if(null!=c){var u=c.cloneNode(!0).innerHTML;l+=u}}var d=getViewBox(h,e);s+='    <div class="option__container option__'+h+"_"+e+'" tabindex="0"><svg viewBox="'+d+'" class="svg__option '+h+"_"+e+'">'+l+'</svg><span class="option__label">'+e+"</span></div>"}).join("\n"),hash.get(c));if(void 0!==d);else;htagc=c.toLowerCase()+"Color";var f=hash.get(htagc);if(void 0!==f);else;s+="    </div>",s+="</div>",l++}o+="</div>";var p=document.createElement("div");p.innerHTML=s,a.appendChild(p)}o+="</ul>";var g=document.querySelector("#sidebar-left"),m=document.createElement("div");m.innerHTML=o,g.innerHTML="",g.appendChild(m);var v=document.querySelectorAll(".sbl__option"),y=document.querySelectorAll(".option__container"),_=document.querySelectorAll(".accordeon__section-label");addEventListenerList(v,"mouseover",showThumbOptions),addEventListenerList(v,"focus",showThumbOptions),addEventListenerList(v,"click",openThumbs),addEventListenerList(y,"click",changeOption),addEventListenerList(_,"click",toggleSection)}function getSectionsFromIdMultiLayer(e,t){var r=[];for(lyr in e){if(t.slice(1)===e[lyr][0])for(var n=1;n<=e[lyr][1];n++)newLayer=t+"_"+n+"_of_"+e[lyr][1],r.push(newLayer);0===r.length&&(r=[t])}return r}function openThumbs(){var e=this,t=document.querySelector(".section--selected");null!=t&&t.classList.remove("section--selected"),showThumbOptions(e),e.classList.add("section--selected");var r=document.querySelector(".widget"),n=r.previousSibling,o=document.querySelector("#sidebar-left"),i=document.querySelector(".sidebar-right");void 0===n.classList&&void 0!=n.previousSibling.classList&&(n=n.previousSibling),n=n.querySelector(".accordeon__svg-container"),n.classList.contains("section-btn--hide")&&n.classList.toggle("section-btn--hide"),r.classList.contains("section--hide")&&r.classList.toggle("section--hide"),o.classList.contains("cherry")&&o.classList.remove("cherry"),i.classList.add("visible")}function showSidebarLeft(){var e=document.querySelector("#sidebar-left");e.classList.add("visible")}function hideSidebarLeft(){var e=document.querySelector("#sidebar-left");e.classList.remove("visible")}function clearSidebarLeft(){var e=document.querySelector("#sidebar-left");e.innerHTML=""}function showSidebarRight(){var e=document.querySelector("#sidebar");e.classList.add("visible")}function hideSidebarRight(){var e=document.querySelector("#sidebar");e.classList.remove("visible")}function clearSidebarRight(){var e=document.querySelector("#content"),t=document.querySelector("#sidebar");e.removeChild(t),e.appendChild(rightSidebarClone)}function addEventListenerList(e,t,r){for(var n,o=e.length,i=o;i--;)n=o-i-1,e[n].addEventListener(t,r,!1)}function closeSections(e){for(var t=document.querySelectorAll(".accordeon__section-label"),r=document.querySelectorAll(".accordeon__svg-container"),n=t.length;n--;){var o=t[n];if(o!==e&&o.parentNode.parentNode.parentNode.classList.contains("sidebar-left")){var i=r[n],a=o.nextSibling;void 0===a.classList&&void 0!=a.nextSibling.classList&&(a=a.nextSibling),a.classList.contains("section--hide")||a.classList.toggle("section--hide"),i.classList.contains("section-btn--hide")||i.classList.toggle("section-btn--hide")}}}function toggleSection(){var e=this;this.parentNode.parentNode.parentNode.classList.contains("sidebar-left")&&closeSections(e);var t=document.querySelector(".alert");null!=t&&t.classList.remove("alert"),e.classList.contains("alert")&&e.classList.remove("alert");var r=e.nextSibling;void 0===r.classList&&void 0!=r.nextSibling.classList&&(r=r.nextSibling);var n=r.clientHeight,o=e.querySelector(".accordeon__svg-container");r.classList.contains("accordeon__content")&&(r.classList.contains("section--hide")||(r.style.maxHeight=n),r.classList.toggle("section--hide"),o.classList.toggle("section-btn--hide"))}function showThumbOptions(e){var e=e.target||e,t=document.querySelector(".options__"+e.innerHTML.toLowerCase()),r=document.querySelectorAll(".options__container"),n=document.querySelector(".section--selected");if(null===n){for(var o=0,i=r.length;i>o;o++)r[o].classList.remove("selected--option");t.classList.add("selected--option");var a=e.innerHTML.toLowerCase();getColor(a)}}function changeOption(){var e=this.parentNode.parentNode.firstChild.innerHTML,t=this.lastChild.innerHTML,r=document.querySelector(".colorpicker-wrapper").previousSibling;void 0===r.classList&&void 0!=r.previousSibling.classList&&(r=r.previousSibling),show(t,e),r.classList.add("alert")}function getColor(e){clearPicker();var t=e,r=document.getElementById("slide"),n=document.getElementById("picker"),o=document.querySelector(".section-id");document.querySelector(".colorpicker-wrapper");o.innerHTML=t,ColorPicker(r,n,function(e,r,n){colorize(t,e)})}function emptyPicker(){var e=document.querySelector(".colorpicker-wrapper");e.innerHTML=""}function clearPicker(){var e=document.querySelector(".colorpicker-wrapper");e.innerHTML='<div class="colorpicker-controls"><span class="section-id"></span></div><div class="colorpicker-align"><div id="picker"></div><div id="slide"></div></div>'}function getViewBox(e,t){var r=e+"_"+t,n=window.sex;if("m"===n)var o={body_athletic:"65 130 430 430",coat_snowboard:"160 124 230 230",coat_trench:"130 124 290 290",glasses_fpv:"250 97 64 64",hat_helmet_vietnam:"243 86 80 80",hat_motorcycle:"243 86 80 80",hat_tuque:"243 85 80 80",hair_mohawk:"243 45 80 80",mask_horse:"233 80 100 100",mask_robin:"261 108 40 40",pet_canine:"82 403 150 150",pet_chicken:"45 403 150 150",pet_doge:"341 349 200 200",pet_feline:"381 439 128 128",pet_fox:"42 393 150 150",pet_gerbil:"125 475 64 64",pet_parrot:"203 116 80 80",pet_raven:"50 439 128 128",pet_rat:"300 439 128 128",pet_siamese_cat:"42 393 150 150",pet_vulture:"281 349 180 180",scar_horizontal_neck:"265 139 32 32",scar_horizontal_nose:"264 115 32 32",scar_vertical_heart:"249 164 64 64",scar_vertical_left:"264 110 32 32",scar_vertical_right:"264 110 32 32",scarf_drape:"185 140 190 190",tatoo_aum_chest:"248 165 64 64",tatoo_aum_left:"298 157 64 64",tatoo_aum_right:"198 154 64 64",tatoo_chaos_chest:"248 169 64 64",tatoo_chaos_left:"298 164 64 64",tatoo_chaos_right:"198 164 64 64",underwear_boxers:"224 258 120 120"},i={age:"261 109 40 40",belt:"185 135 190 190",body_head:"249 95 64 64",coat:"95 134 360 360",cloak:"0 0 560 560",earpiece:"280 125 25 25",ears:"254 120 20 20",earings:"256 87 50 50",emotion:"259 113 42 42",eyepatch:"261 109 40 40",facialhair:"261 124 40 40",glasses:"261 109 40 40",gloves:"206 308 40 40",hat:"241 70 80 80",hair:"243 80 80 80",headband:"241 90 80 80",holster:"215 150 130 130",horns:"256 87 50 50",iris:"270.25 124.85 4 4",jacket:"170 130 220 220",mask:"243 93 80 80",nose:"265 115 32 32",pants:"130 244 290 290",pipe:"252 132 32 32",pupils:"270.25 124.85 40 40",scarf:"185 120 190 190",shirt:"190 140 190 190",shoes:"210 442 120 120",shoulderpads:"207 120 150 150",socks:"210 442 120 120",suit:"65 130 430 430",tie:"241 140 80 80",underwear:"228 238 120 120",veil:"207 97 150 150",vest:"185 135 190 190",wings:"110 -30 350 350"};else if("f"===n)var o={body_athletic:"65 130 430 430",coat_snowboard:"160 124 230 230",coat_trench:"130 124 290 290",dress_corset:"175 180 200 200",dress_japanese_pleat:"105 140 340 340",dress_parisian_fall:"105 160 340 340",dress_german_expression:"75 160 400 400",dress_short:"175 180 200 200",dress_suit:"175 140 200 200",dress_waitress:"160 140 230 230",earings_gold_ring_left:"289 141 20 20",glasses_fpv:"252 109 64 64",hat_helmet_vietnam:"243 98 80 80",hat_motorcycle:"243 98 80 80",hat_tiara:"262 98 40 40",hat_tuque:"243 97 80 80",hair_afro:"243 80 80 80",hair_mohawk:"243 57 80 80",mask_horse:"233 92 100 100",mask_robin:"261 120 40 40",pet_canine:"82 403 150 150",pet_chicken:"45 403 150 150",pet_doge:"341 349 200 200",pet_feline:"381 439 128 128",pet_fox:"42 393 150 150",pet_gerbil:"125 475 64 64",pet_parrot:"275 126 80 80",pet_raven:"50 439 128 128",pet_rat:"300 439 128 128",pet_siamese_cat:"42 393 150 150",pet_vulture:"281 349 180 180",scar_horizontal_neck:"265 139 32 32",scar_horizontal_nose:"264 115 32 32",scar_vertical_heart:"249 164 64 64",scar_vertical_left:"264 110 32 32",scar_vertical_right:"264 110 32 32",scarf_drape:"185 140 190 190",tatoo_archeopteryx_left:"282 173 64 64",tatoo_aum_chest:"248 165 64 64",tatoo_aum_left:"298 157 64 64",tatoo_aum_right:"198 154 64 64",tatoo_chaos_chest:"248 175 48 48",tatoo_chaos_left:"298 170 48 48",tatoo_chaos_right:"210 164 48 48",tatoo_tribal_face:"258 105 50 50",underwear_boxers:"224 258 120 120"},i={age:"261 121 40 40",belt:"175 185 190 190",body_head:"249 107 64 64",bra:"220 160 100 100",bracelet:"316 252 48 48",coat:"125 79 280 280",dress:"160 150 230 230",earpiece:"280 137 25 25",earings:"257 141 20 20",ears:"254 130 20 20",emotion:"261 125 42 42",eyepatch:"261 121 40 40",facialhair:"261 124 40 40",glasses:"263 121 40 40",gloves:"206 308 40 40",hat:"241 82 80 80",hair:"243 92 80 80",headband:"241 102 80 80",holster:"215 150 130 130",horns:"257 99 50 50",iris:"273.75 137.5 4 4",jacket:"170 130 220 220",leggings:"136 305 260 260",makeup:"267.5 123 30 30",mask:"243 105 80 80",nails:"200 327 25 25",necklace:"255 160 48 48",nose:"265 127 32 32",pants:"130 244 290 290",pipe:"255 144 32 32",pupils:"270.25 124.85 40 40",scarf:"185 120 190 190",shirt:"190 140 190 190",shoes:"225 442 120 120",shorts:"215 245 120 120",shoulderpads:"207 100 150 150",socks:"225 442 120 120",suit:"80 130 400 400",tie:"241 140 80 80",underwear:"232 258 90 90",veil:"207 97 150 150",vest:"185 135 190 190",wings:"110 -30 350 350"};return o[r]?o[r]:i[e]?i[e]:"0 0 560 560"}function onAllLoaded(){var e,t=(document.getElementById("male_silhouette"),document.getElementById("female_silhouette"),document.querySelector(".sidebar-right"),document.querySelector(".sidebar-left")),r=hash.get("sex");e=r?r:window.sex,downloadBtn=document.querySelector("#downloadButton"),downloadBtn.addEventListener("click",download,!1),downloadBtn.classList.add("enabled"),createForm(e,forms),t.classList.add("visible"),revealCharacter()}function onEachLoaded(e,t){var r=!1,n=t;if(toBeShown.indexOf(n.split("/")[2].split(".")[0])>-1)var o=1;else var o=0;var i=n.split("/")[2].split("_")[0];if("body"===i||"ears"===i||"nose"===i||"sockets"===i||"age"===i)var i="skin";if("facialhair"===i||"brows"===i)var i="hair";if(void 0!=c.choices[i+"Color"])var a=c.choices[i+"Color"],r=!0;r===!0&&applyColor(n.split("/")[2].split(".")[0],a.slice(1),e.select("*")),e.select("*").attr({opacity:o})}function choicesToLayers(e,t){for(var r=[],n=fromEmotionGetLayers(e.choices.emotion),o=[],i=n.length,a=n.length;a--;)r.push(n[i-a-1]);for(var s in e.choices)o.push(s+"_"+e.choices[s]);for(var l in o)for(lyr in t)if(o[l]==t[lyr][0])for(var c=1;c<=t[lyr][1];c++)idOf=o[l]+"_"+c+"_of_"+t[lyr][1],r.push(idOf);else isInArray(o[l],r)===!1&&r.push(o[l]);return"f"===e.sex&&r.push("body_hand","bra_bow","nails_short"),r}function fromEmotionGetLayers(e){for(var t,r=[],n="",o=["brows","eyes","iris","pupils","mouth","lashes"],i=o.length,a=i;a--;){if(t=i-a-1,"pupils"===o[t]){var s=hash.get("pupils");void 0===s&&(s="human"),o[t]+="_"+s}n=o[t]+"_"+e,r.push(n)}return r}function deleteDbSession(){return fetchDb["delete"]("session").then(function(e){return e.json()})}function getDbSession(){return fetchDb("session").then(function(e){return e.ok?e.json():fetchDb.reject(e)}).then(function(e){return e.userCtx.name?e.userCtx.name:fetchDb.reject("Not connected")})}function getDbUser(e){return fetchDb("users/"+e).then(function(e){return e.json()})}function updateDbUser(e){return fetchDb.post("users",e).then(function(e){return console.log("resp.status",e.status),e.ok?e.json():409===e.status?fetchDb.reject(e,"Not saving, _rev fields don't match"):404===e.status?(loginMenu(),fetchDb.reject(e,"Not logged in.")):fetchDb.reject(e)})}function loginDbUser(e,t){return fetchDb.post("session",{name:e,password:t}).then(function(t){return 200===t.status?t.json():401===t.status?(determineErrorMessage(e),fetchDb.reject(t)):fetchDb.reject(t)})}function determineErrorMessage(e){var t=document.querySelector(".overlay--show");t.classList.contains("js-login")&&showErrorUsernamePasswordMismatch(),t.classList.contains("js-register")&&showErrorUsernameTaken(e)}function showErrorUsernamePasswordMismatch(){var e=document.querySelector(".overlay--show");console.log("currentOverlay",e);var t=e.querySelector(".overlay__error");console.log("errorBox");var r=t.querySelector(".overlay__error__text"),n="Sorry, username/password mismatch. Please try again.";clearInputFields(),r.innerHTML=n,t.classList.add("overlay__error--show"),console.log("Sorry, username/password mismatch")}function createDbUser(e,t,r){return console.log("Create DB User"),fetchDb.post("users",{_id:"org.couchdb.user:"+e,roles:[],type:"user",name:e,password:t,email:r,createdAt:(new Date).toISOString(),cc:{personnages:{},personnageActuel:!1}}).then(function(t){return console.log("resp.status"),201===t.status?t.json():409===t.status?(showErrorUsernameTaken(e),t.json()):fetchDb.reject(t)})}function showErrorUsernameTaken(e){var t=document.querySelector(".overlay--show"),r=t.querySelector(".overlay__error"),n=r.querySelector(".overlay__error__text"),o='Username "'+e+'" is already taken. Try another.';n.innerHTML=o,r.classList.add("overlay__error--show"),console.log("C'est pris!"),clearInputUsername()}function whoami(e){e.preventDefault();var t=document.querySelector(".js-character-list");t.classList.add("overlay--show"),t.addEventListener("click",closeOverlay,!0)}function logout(e){e.preventDefault(),deleteDbSession().then(function(e){return currentUser=!1,personnages={},personnageActuel=!1,myUsername=!1,e})["catch"](function(e){console.error("err4",e)}),logoutUI()}function logoutUI(){var e=document.querySelector(".logged");e&&(e.classList.remove("logged"),resetCharacters())}function loginMenu(e){e&&e.preventDefault();var t=document.querySelector(".js-login"),r=document.querySelector("#login-form"),n=t.querySelector(".first-input");t.classList.add("overlay--show"),r.addEventListener("submit",login,!0),t.addEventListener("click",closeLogin,!0),n.focus()}function closeLogin(e){var t=document.querySelector(".js-login"),r=t.querySelector(".cancel-btn"),n=e.target;if(n===t||n===r){var o=document.querySelector(".overlay--show");o&&(clearInputFields(),o.classList.remove("overlay--show"))}}function closeOverlay(e){var t=document.querySelector(".overlay--show"),r=t.querySelector(".cancel-btn"),n=e.target;(n===t||n===r)&&t&&(hideNewCharacterInputField(),t.classList.remove("overlay--show"))}function hideNewCharacterInputField(){var e=document.querySelector(".overlay--show"),t=e.querySelector(".overlay__char-new--create");t&&(clearInputFields(),t.classList.remove("overlay__char-new--create"))}function clearInputFields(){for(var e=document.querySelector(".overlay--show"),t=e.querySelectorAll("input"),r=t.length,n=e.querySelector(".overlay__error--show");r--;)t[r].value="";n&&n.classList.remove("overlay__error--show")}function clearInputUsername(){var e=document.querySelector(".overlay--show"),t=e.querySelectorAll(".overlay__input__username");t[0].value=""}function login(e){e.preventDefault();var t=e,r=t.target.children[0].lastElementChild.value,n=t.target.children[1].lastElementChild.value,o=document.querySelector(".overlay--show");return r&&n?void loginDbUser(r,n).then(function(){return myUsername=r,getDbUser(r)}).then(function(e){currentUser=e;var t,r=currentUser.cc.personnages[currentUser.cc.personnageActuel],n=[];for(t in r)n.push(encodeURIComponent(t)+"="+encodeURIComponent(r[t]));clearInputFields(),o.classList.remove("overlay--show"),manageCharacters(e)})["catch"](function(e){console.error("err3",e)}):void console.log("missing username or password.")}function inheritNewCharacter(){var e=document.querySelector(".js-login-new-character"),t=hash.get("sex"),r=document.querySelector(".js-continue-character"),n=document.querySelector(".js-load-character");t&&(n.addEventListener("click",loadCharacter,!1),r.addEventListener("click",continueNewCharacter,!1),e.classList.add("overlay--show"),e.addEventListener("click",closeNewCharacterOverlay,!1))}function continueNewCharacter(e){e.preventDefault();var t=document.querySelector(".overlay--show"),r=document.querySelector(".js-name-character"),n=r.querySelector(".overlay__char-create-btn");t.classList.remove("overlay--show"),n.addEventListener("click",requestNewCharacterName),r.classList.add("overlay--show")}function requestNewCharacterName(e){e.preventDefault();var t=document.querySelector(".overlay--show");t&&t.classList.remove("overlay--show")}function loadCharacter(e){var t=document.querySelector("#svg1"),r=document.querySelector(".overlay--show");e.preventDefault(),hash.clear(),clearCharacter(),hashCharacter(),startup(),setHashTrigger(),setTimeout(function(){t.classList.remove("character--hide"),r&&r.classList.remove("overlay--show")},500)}function closeNewCharacterOverlay(e){var t=document.querySelector(".js-login-new-character"),r=e.target;if(r===t){var n=document.querySelector(".overlay--show");n&&n.classList.remove("overlay--show")}}function hashCharacter(){var e,t=currentUser.cc.personnages[currentUser.cc.personnageActuel],r=[];for(e in t)r.push(encodeURIComponent(e)+"="+encodeURIComponent(t[e]));r.length&&personnageActuelToHash(currentUser)}function switchCharacter(e){e.preventDefault();var t,r=document.querySelector(".js-character-list"),n=document.querySelector("#svg1"),o=this.parentNode.parentNode,i=o.querySelector(".overlay__char-name").innerHTML,a=document.querySelector(".overlay__char--current"),s=n.getAttribute("class"),l=s+" character--hide",u=currentUser.cc.personnages[i].sex;""===s&&("f"===u&&(s="select-female"),"m"===u&&(s="select-male"),l=s),a&&a.classList.remove("overlay__char--current"),o.classList.add("overlay__char--current"),currentUser.cc.personnageActuel=i,r.classList.remove("overlay--show"),n.setAttribute("class",l),updateDbUser(currentUser).then(function(e){return currentUser._rev=e.rev,e}).then(function(e){window.sex=currentUser.cc.personnages[i].sex,t=currentUser.cc.personnages[i],console.log("choices",t),c=new Character(t),hash.clear(),setTimeout(function(){clearCharacter(),hashCharacter(),setHashTrigger()},500)})["catch"](function(e){console.log("err",e)})}function revealCharacter(){var e=document.querySelector("#svg1");e.classList.remove("character--hide")}function manageCharacters(){var e,t,r,n,o,i=document.querySelector(".js-character-list"),a=i.querySelector(".overlay__title"),s=i.querySelector(".overlay__char-card--orig"),l=Object.keys(currentUser.cc.personnages),c=l.length,u=i.querySelector(".overlay__container--char-list"),h=currentUser.cc.personnageActuel,d=document.querySelector("#usernameButton"),f=d.querySelector(".menu-text"),p=document.querySelector("#pagewrap"),g=document.querySelector(".save-btn"),m=i.querySelector(".overlay__char-new-btn"),v=i.querySelector(".overlay__char-create-btn");for(resetCharacters();c--;){o=l[c];var y=s.cloneNode(!0),_=y.querySelector(".overlay__char-name");y.classList.remove("overlay__char-card--orig"),o===h&&y.classList.add("overlay__char--current"),_.innerHTML=o,u.appendChild(y)}for(e=i.querySelectorAll(".overlay__char-edit"),t=e.length;t--;)e[t].addEventListener("click",switchCharacter);for(r=i.querySelectorAll(".overlay__char-delete"),n=r.length;n--;)r[n].addEventListener("click",deleteChar);a.innerHTML=currentUser.name,f.innerHTML=currentUser.name,p.classList.add("logged"),g.addEventListener("click",saveChar,!0),m.addEventListener("click",newChar,!0),v.addEventListener("click",createChar,!0)}function resetCharacters(){var e=document.querySelector(".js-character-list"),t=e.querySelectorAll(".overlay__char-card:not(.overlay__char-card--orig):not(.overlay__char-new)");Array.prototype.forEach.call(t,function(e){e.parentNode.removeChild(e)})}function registerMenu(){var e=document.querySelector(".js-login"),t=document.querySelector(".js-register"),r=document.querySelector("#register-form"),n=t.querySelector(".first-input");e.classList.contains("overlay--show")&&e.classList.remove("overlay--show"),t.classList.add("overlay--show"),r.addEventListener("submit",register,!0),t.addEventListener("click",closeRegister,!0),n.focus()}function closeRegister(e){var t=document.querySelector(".js-register"),r=t.querySelector(".cancel-btn"),n=e.target;if(n===t||n===r){var o=document.querySelector(".overlay--show");o&&(clearInputFields(),o.classList.remove("overlay--show"))}}function register(e){e.preventDefault();var t=e,r=t.target.children[0].lastElementChild.value,n=t.target.children[1].lastElementChild.value,o=t.target.children[2].lastElementChild.value,i=document.querySelector(".overlay--show");return n?o?r?(console.log("Calling createDbUSer"),void createDbUser(n,o,r).then(function(){return loginDbUser(n,o)}).then(function(e){return console.log("fetched2",e),n}).then(getDbUser).then(function(e){currentUser=e,manageCharacters(currentUser),i.classList.remove("overlay--show")})["catch"](function(e){console.error("register err",e)})):void console.log("missing email."):void console.log("missing password."):void console.log("missing username.")}function setHashTrigger(){window.addEventListener("hashchange",triggerSaveBtn,!1)}function triggerSaveBtn(){var e=document.querySelector(".save-btn");e&&e.classList.add("save--enabled")}function newChar(){var e=document.querySelector(".js-new-card"),t=e.querySelector(".first-input");e.classList.add("overlay__char-new--create"),t.focus()}function createChar(e){e&&e.preventDefault();var t=this,r=document.querySelector(".overlay__char-new--create"),n=t.parentNode.querySelector(".js-new-char-name"),o=n.value;r.classList.remove("overlay__char-new--create");var i=o;i&&(currentUser.cc||(currentUser.cc={}),currentUser.cc.personnageActuel||(currentUser.cc.personnageActuel=i),currentUser.cc.personnages||(currentUser.cc.personnages={}),currentUser.cc.personnages[i]=window.hash.get(),Object.assign(currentUser.cc.personnages,personnages),updateDbUser(currentUser).then(function(e){return currentUser._rev=e.rev,e})["catch"](function(e){console.log("err",e)}),manageCharacters())}function deleteChar(){var e=this,t=e.parentNode.parentNode.querySelector(".overlay__char-name").innerHTML;delete currentUser.cc.personnages[t],updateDbUser(currentUser).then(function(e){return currentUser._rev=e.rev,e})["catch"](function(e){console.log("err",e)}),manageCharacters()}function saveChar(){var e=document.querySelector(".save-btn");e.classList.remove("save--enabled");var t=currentUser.cc.personnageActuel;myUsername&&currentUser&&currentUser&&t&&(currentUser.cc||(currentUser.cc={}),currentUser.cc.personnageActuel||(currentUser.cc.personnageActuel=t),currentUser.cc.personnages||(currentUser.cc.personnages={}),currentUser.cc.personnages[t]=window.hash.get(),Object.assign(currentUser.cc.personnages,personnages),updateDbUser(currentUser).then(function(e){return currentUser._rev=e.rev,e})["catch"](function(e){console.log("err",e)}))}function isInArray(e,t){return t.indexOf(e)>-1}function clearCharacter(){var e=document.querySelector("#svg1"),t=e.querySelector("#male_silhouette"),r=e.querySelector("#female_silhouette");e.innerHTML=t+r}function personnageActuelToHash(e){var t,r,n,o,i,a=e.cc.personnageActuel,s={};if(a&&""!==a){for(t=e.cc.personnages[a],r=Object.keys(t),itemsListLength=r.length,itemsListCounter=itemsListLength;itemsListCounter--;)n=itemsListLength-itemsListCounter-1,o=r[n],i=t[r[n]],s[o]=i,hash.add(s);clearCharacter(),interpretHash()}}function trans(e){var t=document.querySelector("#svg1");t.classList.add("character--hide"),hideForms(),hash.add({sex:e}),hash.add({emotion:"neutral"}),currentUser&&currentUser.cc&&currentUser.cc.personnages&&currentUser.personnageActuel&&(currentUser.cc.personnages[personnageActuel].sex=e),window.sex=e,buildCharacter(resetForms)}function buildCharacter(e){var t=document.querySelector("#svg1");setTimeout(function(){clearForms(),clearCharacter(),interpretHash(),setTimeout(function(){t.classList.remove("character--hide"),e()},500)},500)}function hideForms(){hideSidebarLeft(),hideSidebarRight()}function clearForms(){clearSidebarLeft(),clearSidebarRight()}function resetForms(){hideForms(),createForm(),showSidebarLeft()}function Character(e){this.choices=e||{emotion:"neutral",body:"athletic",lips:"default",skinColor:this.skinTone,hairColor:"#ffe680",irisColor:"#2ad4ff",underwear:"plain",underwearColor:"#f2f2f2"},this.choices.emotion=this.choices.emotion||"neutral",this.choices.body=this.choices.body||"athletic",this.choices.lips=this.choices.lips||"default",this.skinTone&&(this.choices.skinColor=this.skinTone),this.choices.hairColor=this.choices.hairColor||"#ffe680",this.choices.irisColor=this.choices.irisColor||"#2ad4ff",this.choices.underwear=this.choices.underwear||"plain",this.choices.underwearColor=this.choices.underwearColor||"#f2f2f2",e=this.choices,e.body_head||(e.body_head="default"),e.ears||(e.ears="default"),e.nose||(e.nose="default")}function modCharacter(e,t){e in c.choices&&delete c.choices[e],""!=t&&(c.choices[e]=t),currentUser&&currentUser.cc&&currentUser.cc.personnages&&currentUser.cc.personnageActuel&&(currentUser.cc.personnages[currentUser.cc.personnageActuel][e]=t)}function createCharacter(){document.getElementById(sex+"Button").checked=!0;
var e=[form1,form2,form3];for(var t in e)for(var r in e[t]){var n=r,o=n.toLowerCase(),i=hash.get(o);if(void 0!==i){var a="#"+o+"_"+i;for(lyr in multiLayer)if(a.slice(1)==multiLayer[lyr][0])for(var s=1;s<=multiLayer[lyr][1];s++)idOf=a+"_"+s+"_of_"+multiLayer[lyr][1],viewport.selectAll(idOf).attr({opacity:1});else viewport.selectAll(a).attr({opacity:1})}}}function GetEmotionGetLayers(t){var r=[];faceElements=["brows","eyes","iris","pupils","mouth","lashes"];for(e in faceElements){if("pupils"===faceElements[e]){var n=hash.get("pupils");void 0===n&&(n="human"),faceElements[e]+="_"+n}var o=faceElements[e];r.push(o)}return r}function getOptions(e){var t=window.forms,e=capitalizeFirstLetter(e);for(i in t)if(options=t[i][e],void 0!=options)return options}function capitalizeFirstLetter(e){return e.charAt(0).toUpperCase()+e.slice(1)}function show(e,t){if("string"==typeof t)var r=[t];else var r=[t.split(" ")[1]];var n=e,o=getOptions(r[0]),i=new Array,a="#"+r[0]+"_"+n;if(hideCompetition(r[0]),hash.add(i),currentUser&&triggerSaveBtn(),"pupils"===r[0]&&(r[0]+="_"+n,n=hash.get("emotion"),void 0==n&&(n="neutral")),"emotion"===r[0]){modCharacter(r[0],n),ga("send","event","menu","select",a),r=[];var s=GetEmotionGetLayers(n);for(emo in s){var l=s[emo];r.push(l)}}displaySections(r,o,n,multiLayer)}function displaySections(e,t,r,n){for(section in e)t.forEach(function(t,o){var i="#"+e[section]+"_"+t;if(t===r){for(lyr in n)sectionShow(n,i);if("brows"===e[section]||"eyes"===e[section]||"iris"===e[section]||"mouth"===e[section]||"pupils_human"===e[section]||"lashes"===e[section])modCharacter(e[section],r);else{var a=new Array;a[e[section]]=r,hash.add(a),modCharacter(e[section],r),ga("send","event","menu","select",i)}}else for(lyr in n)sectionHide(n,i)})}function sectionShow(e,t){if(t.slice(1)==e[lyr][0])for(var r=1;r<=e[lyr][1];r++)idOf=t+"_"+r+"_of_"+e[lyr][1],viewport.selectAll(idOf).attr({opacity:1});else viewport.selectAll(t).attr({opacity:1})}function sectionHide(e,t){if(t.slice(1)==e[lyr][0])for(var r=1;r<=e[lyr][1];r++)idOf=t+"_"+r+"_of_"+e[lyr][1],viewport.selectAll(idOf).attr({opacity:0});else viewport.selectAll(t).attr({opacity:0})}function resetCharacterTemplate(){for(var e=document.querySelector("#svg1"),t=e.querySelectorAll("*"),r=t.length,n=r;n--;)0!==t[n].style.opacity&&(t[n].style.opactiy="0")}function startup(){var e;currentUser&&currentUser.cc&&currentUser.cc.personnages&&currentUser.cc.personnageActuel&&(e=currentUser.cc.personnages[currentUser.cc.personnageActuel]),window.c=new Character(e),interpretHash()}function interpretHash(){var e=hash.get("sex");"m"===e?selectMale():"f"===e&&selectFemale()}function launch(){var e={Body_head:["default","diamond","heart","oblong","oval","round","square","triangle"],Ears:["default","pointed"],Iris:["neutral"],Pupils:["human","lizard"],Nose:["default","roman","syrid"],Facialhair:["","beard_boxed","beard_ducktail","beard_guru","beard_intelectual","beard_rap","chinpuff","goatee","moustache","moustache_thick","muttonchops","muttonchops_friendly","soulpatch","winnfield"],Hair:["","balding","balding_crazy","short","gelled","wavy","manga","mohawk","crewcut"],Age:["","lines"],Emotion:["neutral","alertness","amusement","anger","anxiety","betrayal","caged","cruel","eeww","horror","melancholy","omg","outrage"]},t={Pipe:["","subgenius"],Earings:["","gold_rings","gold_ring_right","gold_ring_left"],Hat:["","baseball","berret","cap","cowboy","fedora","top","motorcycle","police","scumbag","helmet_vietnam","tuque","strainer","magritte"],Horns:["","devil"],Mask:["","guy_fawkes","robin","horse","stormtrooper","jason","cat"],Glasses:["","designer","fpv","goggles","google","hipster","oakley","rayban","round","wayrafer"],Eyepatch:["","left","right"],Headband:["","medium"],Earpiece:["","microphone"]},r={Shirt:["","tanktop","colar","tshirt","turtleneck"],Tie:["","neck","bolo","bow"],Vest:["","vest"],Holster:["","revolver_chest"],Shoulderpads:["","general","artillery"],Scarf:["","parisian_knot","twice_around","four_in_hand","reverse_drape_cross","reverse_drape_tuck","fake_knot","reverse_drape","chest_warmer","overhand","once_around","drape"]},n={Body:["athletic"],Scar:["","horizontal_neck","horizontal_nose","vertical_heart","vertical_left","vertical_right"],Tatoo:["","aum_chest","aum_left","aum_right","chaos_chest","chaos_left","chaos_right"],Suit:["","wetsuit"],Jacket:["","suit"],Coat:["","lab","trench","snowboard"],Cloak:["","default"],Gloves:["","lab","motorcycle"],Wings:["","angel","devil"],Pet:["","feline","raven","rat","canine","siamese_cat","gerbil","chicken","fox","vulture","parrot","doge"]},o={Underwear:["plain","boxers"],Pants:["","suit","jeans","leather","snowboard"],Belt:["","straps","utility"]},i={Socks:["","socks"],Shoes:["","hightops","leather","flip-flops"]},a=["wings_angel","wings_devil","cloak_default_4_of_4","pet_doge","pet_vulture","pet_parrot","pet_feline","pet_raven","pet_rat","pet_canine","pet_siamese_cat","pet_gerbil","pet_chicken","pet_fox","hat_helmet_vietnam_2_of_2","hat_strainer_2_of_2","hat_fedora_2_of_2","headband_medium_2_of_2","hair_manga_2_of_2","coat_trench_2_of_2","shoes_flip-flops_2_of_2","body_athletic_2_of_2","tatoo_aum_chest","tatoo_chaos_chest","scar_vertical_heart","scar_horizontal_neck","underwear_plain","underwear_boxers","shirt_tanktop_2_of_2","body_athletic_1_of_2","tatoo_aum_left","tatoo_aum_right","tatoo_chaos_left","tatoo_chaos_right","shirt_tanktop_1_of_2","suit_wetsuit","socks_socks","shoes_hightops","shoes_leather","shoes_flip-flops_1_of_2","shirt_colar_2_of_2","shirt_turtleneck","tie_bolo","tie_bow_2_of_2","tie_neck","shirt_colar_1_of_2","tie_bow_1_of_2","vest_vest","pants_jeans","pants_leather","pants_suit","pants_snowboard","shirt_tshirt","belt_straps","holster_revolver_chest","jacket_suit","belt_utility","coat_lab","coat_trench_1_of_2","coat_snowboard","cloak_default_3_of_4","cloak_default_2_of_4","gloves_lab","gloves_motorcycle","shoulderpads_general","scarf_parisian_knot","scarf_twice_around","scarf_four_in_hand","scarf_reverse_drape_cross","scarf_reverse_drape_tuck","scarf_fake_knot","scarf_reverse_drape","scarf_chest_warmer","scarf_overhand","scarf_once_around","scarf_drape","shoulderpads_artillery","body_head_default","body_head_square","body_head_diamond","body_head_heart","body_head_oblong","body_head_oval","body_head_round","body_head_triangle","ears_default","ears_pointed","age_lines","earings_gold_rings","earings_gold_ring_left","earings_gold_ring_right","scar_horizontal_nose","scar_vertical_left","scar_vertical_right","eyes_neutral","eyes_sterness","eyes_indignation","eyes_anger","eyes_rage","eyes_disdain","eyes_aversion","eyes_disgust","eyes_revulsion","eyes_concern","eyes_anxiety","eyes_fear","eyes_terror","eyes_satisfaction","eyes_amusement","eyes_joy","eyes_laughing","eyes_dejection","eyes_alertness","eyes_betrayal","eyes_caged","eyes_cruel","eyes_desperation","eyes_eeww","eyes_horror","eyes_melancholy","eyes_omg","eyes_outrage","iris_neutral","iris_sterness","iris_indignation","iris_anger","iris_rage","iris_disdain","iris_aversion","iris_disgust","iris_revulsion","iris_concern","iris_anxiety","iris_fear","iris_terror","iris_satisfaction","iris_amusement","iris_joy","iris_laughing","iris_dejection","iris_alertness","iris_betrayal","iris_caged","iris_cruel","iris_desperation","iris_eeww","iris_horror","iris_melancholy","iris_omg","iris_outrage","pupils_human_neutral","pupils_human_sterness","pupils_human_indignation","pupils_human_anger","pupils_human_rage","pupils_human_disdain","pupils_human_aversion","pupils_human_disgust","pupils_human_revulsion","pupils_human_concern","pupils_human_anxiety","pupils_human_fear","pupils_human_terror","pupils_human_satisfaction","pupils_human_amusement","pupils_human_joy","pupils_human_laughing","pupils_human_dejection","pupils_human_alertness","pupils_human_betrayal","pupils_human_caged","pupils_human_cruel","pupils_human_desperation","pupils_human_eeww","pupils_human_horror","pupils_human_melancholy","pupils_human_omg","pupils_human_outrage","brows_neutral","brows_alertness","brows_anxiety","brows_amusement","brows_anger","brows_anxiety","brows_aversion","brows_betrayal","brows_caged","brows_concern","brows_cruel","brows_dejection","brows_desperation","brows_disdain","brows_disgust","brows_eeww","brows_fear","brows_grief","brows_horror","brows_indignation","brows_joy","brows_laughing","brows_melancholy","brows_omg","brows_outrage","brows_pain","brows_rage","brows_revulsion","brows_sadness","brows_satisfaction","brows_shock","brows_sterness","brows_surprise","brows_terror","brows_wonder","brows_wtf","mouth_neutral","mouth_amusement","mouth_anger","mouth_alertness","mouth_anxiety","mouth_betrayal","mouth_caged","mouth_cruel","mouth_desperation","mouth_eeww","mouth_horror","mouth_melancholy","mouth_omg","mouth_outrage","nose_default","nose_roman","nose_syrid","facialhair_beard_boxed","facialhair_beard_ducktail","facialhair_beard_guru","facialhair_beard_intelectual","facialhair_beard_rap","facialhair_chinpuff","facialhair_goatee","facialhair_moustache","facialhair_moustache_thick","facialhair_muttonchops","facialhair_muttonchops_friendly","facialhair_soulpatch","facialhair_winnfield","mask_robin","eyepatch_left","eyepatch_right","hair_balding","hair_balding_crazy","hair_gelled","hair_manga_1_of_2","hair_mohawk","hair_short","hair_wavy","hair_crewcut","headband_medium_1_of_2","mask_guy_fawkes","glasses_designer","glasses_fpv","glasses_goggles","glasses_google","glasses_hipster","glasses_oakley","glasses_rayban","glasses_round","glasses_wayrafer","hat_baseball","hat_berret","hat_cap","hat_tuque","hat_cowboy","hat_fedora_1_of_2","hat_top","hat_magritte","hat_police","hat_scumbag","hat_strainer_1_of_2","hat_helmet_vietnam_1_of_2","hat_motorcycle","jewelry_chain","jewelry_earings","jewelry_nosering","jewelry_watch","mask_horse","mask_stormtrooper","mask_jason","mask_cat","horns_devil","cloak_default_1_of_4","pipe_subgenius","earpiece_microphone"],s={Body_head:["default","heart","oblong","oval","round","square","diamond","triangle"],Ears:["default","pointed"],Iris:["neutral"],Nose:["default"],Emotion:["neutral","alertness","amusement","anger","aversion","dejection","disdain","disgust","grief","indignation","joy","laughter","melancholy","rage","sadness","sterness","surprise","shock","wonder"],Hair:["","afro","down","manga","mohawk","ponytail","short","bangs","odango","emo","spider","wreckingball"]},l={Pipe:["","subgenius"],Makeup:["","frekles","gothic_eyeliner","warpaint"],Earings:["","gold_rings","gold_ring_right","gold_ring_left","death_drop"],Eyepatch:["","left","right"],Glasses:["","designer","fpv","goggles","google","hipster","oakley","rayban","round","wayrafer"],Headband:["","medium"],Hat:["","top","waitress","cowboy","police","scumbag","helmet_vietnam","tiara","strainer","magritte","motorcycle","tuque","cap"],Mask:["","guy_fawkes","horse","stormtrooper","jason","cat"],Horns:["","devil"],Earpiece:["","microphone"],Veil:["","al-amira","hijab","khimar","niqab","shayla"]},u={Necklace:["","perl","princess"],Bra:["","bow"],Shoulderpads:["","artillery","general"],Scarf:["","chest_warmer","parisian_knot","twice_around","four_in_hand","reverse_drape_cross","reverse_drape_tuck","fake_knot","reverse_drape","overhand","once_around","drape"]},h={Body:["athletic"],Tatoo:["","chaos_chest","chaos_left","chaos_right","tribal_face","archeopteryx_left"],Nails:["short","long","claws"],Suit:["","wetsuit"],Dress:["","casual","corset","suit","waitress","short","cheerleader","japanese_pleat","parisian_fall","german_expression"],Coat:["","winter_furcollar"],Bracelet:["","rings"],Pet:["","feline","raven","rat","canine","siamese_cat","gerbil","chicken","fox","vulture","parrot","doge"],Wings:["","devil","angel"]},d={Underwear:["","plain","string"],Shorts:["","short"],Leggings:["","regular","torn"],Pants:["","yoga","yoga_torn","jeans","jeans_torn","jeans_bellbottoms"],Belt:["","utility"]},f={Shoes:["","hightops","highheels","sandals_roman","plateforms","flip-flops"]},p=["wings_devil","wings_angel","pet_doge","pet_vulture","pet_parrot","pet_feline","pet_raven","pet_rat","pet_canine","pet_siamese_cat","pet_gerbil","pet_chicken","pet_fox","hat_helmet_vietnam_2_of_2","hat_strainer_2_of_2","headband_medium_2_of_2","coat_winter_furcollar_3_of_3","veil_shayla_2_of_2","hair_down_3_of_3","hair_manga_2_of_2","shoes_flip-flops_2_of_2","body_athletic","tatoo_chaos_chest","tatoo_chaos_left","tatoo_chaos_right","tatoo_archeopteryx_left","underwear_plain","underwear_string","leggings_regular","leggings_torn","bra_bow","suit_wetsuit","necklace_perl","necklace_princess","shoes_hightops","shoes_highheels","shoes_plateforms","shoes_sandals_roman","shoes_flip-flops_1_of_2","pants_yoga","pants_yoga_torn","pants_jeans","pants_jeans_torn","pants_jeans_bellbottoms","shorts_short","dress_casual","dress_corset","dress_suit","dress_short","dress_waitress","dress_cheerleader","dress_japanese_pleat","dress_german_expression","dress_parisian_fall","veil_al-amira_2_of_2","veil_khimar_2_of_2","bracelet_rings","coat_winter_furcollar_2_of_3","shoulderpads_general","scarf_chest_warmer","scarf_parisian_knot","scarf_twice_around","scarf_four_in_hand","scarf_reverse_drape_cross","scarf_reverse_drape_tuck","scarf_fake_knot","scarf_reverse_drape","scarf_overhand","scarf_once_around","scarf_drape","hair_down_2_of_3","body_head_default","body_head_square","body_head_diamond","body_head_heart","body_head_oblong","body_head_oval","body_head_round","body_head_triangle","ears_default","ears_pointed","nose_default","tatoo_tribal_face","earings_perl","earings_gold_rings","earings_gold_ring_left","earings_gold_ring_right","earings_death_drop","makeup_frekles","makeup_warpaint","makeup_gothic_eyeliner","eyes_neutral","eyes_sterness","eyes_indignation","eyes_anger","eyes_rage","eyes_disdain","eyes_aversion","eyes_disgust","eyes_amusement","eyes_joy","eyes_laughter","eyes_dejection","eyes_melancholy","eyes_sadness","eyes_grief","eyes_alertness","eyes_wonder","eyes_surprise","eyes_shock","iris_neutral","iris_sterness","iris_indignation","iris_anger","iris_rage","iris_disdain","iris_aversion","iris_disgust","iris_amusement","iris_joy","iris_laughter","iris_dejection","iris_melancholy","iris_alertness","iris_wonder","iris_surprise","iris_shock","pupils_human_neutral","pupils_human_sterness","pupils_human_indignation","pupils_human_anger","pupils_human_rage","pupils_human_disdain","pupils_human_aversion","pupils_human_disgust","pupils_human_amusement","pupils_human_joy","pupils_human_laughter","pupils_human_dejection","pupils_human_melancholy","pupils_human_alertness","pupils_human_wonder","pupils_human_surprise","pupils_human_shock","lashes_neutral","lashes_sterness","lashes_indignation","lashes_anger","lashes_rage","lashes_disdain","lashes_aversion","lashes_disgust","lashes_amusement","lashes_joy","lashes_laughter","lashes_dejection","lashes_melancholy","lashes_sadness","lashes_grief","lashes_alertness","lashes_wonder","lashes_surprise","lashes_shock","mouth_neutral","mouth_sterness","mouth_indignation","mouth_anger","mouth_rage","mouth_disdain","mouth_aversion","mouth_disgust","mouth_amusement","mouth_joy","mouth_laughter","mouth_dejection","mouth_melancholy","mouth_sadness","mouth_grief","mouth_alertness","mouth_wonder","mouth_surprise","mouth_shock","brows_neutral","brows_sterness","brows_indignation","brows_anger","brows_rage","brows_disdain","brows_aversion","brows_disgust","brows_amusement","brows_joy","brows_laughter","brows_dejection","brows_melancholy","brows_sadness","brows_grief","brows_alertness","brows_wonder","brows_surprise","brows_shock","eyepatch_left","eyepatch_right","mask_guy_fawkes","tie_bow","hair_short","hair_afro","hair_mohawk","hair_bangs","hair_ponytail","hair_odango","hair_emo","hair_spider","hair_wreckingball","hair_down_1_of_3","hair_manga_1_of_2","glasses_hipster","glasses_fpv","glasses_google","glasses_oakley","glasses_rayban","glasses_round","glasses_wayrafer","glasses_designer","glasses_goggles","veil_al-amira_1_of_2","veil_hijab","veil_khimar_1_of_2","veil_niqab","veil_shayla_1_of_2","headband_medium_1_of_2","hat_waitress","hat_police","hat_cowboy","hat_top","hat_scumbag","hat_tiara","hat_magritte","hat_strainer_1_of_2","hat_helmet_vietnam_1_of_2","hat_tuque","hat_cap","hat_motorcycle","body_hand","nails_short","nails_long","nails_claws","mask_horse","mask_stormtrooper","mask_jason","mask_cat","horns_devil","coat_winter_furcollar_1_of_3","shoulderpads_artillery","belt_utility","pipe_subgenius","earpiece_microphone"],g="layer/female/",m="layer/male/",v=[["hair_manga",2],["hair_down",3],["hat_strainer",2],["hat_helmet_vietnam",2],["headband_medium",2],["coat_winter_furcollar",3],["veil_al-amira",2],["veil_khimar",2],["veil_shayla",2],["shoes_flip-flops",2]],y=[["body_athletic",2],["hair_manga",2],["cloak_default",4],["coat_trench",2],["hat_fedora",2],["headband_medium",2],["shirt_colar",2],["shirt_tanktop",2],["hat_strainer",2],["hat_helmet_vietnam",2],["tie_bow",2],["shoes_flip-flops",2]];skinLayers=["age_lines","body_athletic","body_head_default","body_head_diamond","body_head_heart","body_head_oblong","body_head_oval","body_head_round","body_head_square","body_head_triangle","body_hand","ears_default","ears_pointed","nose_default","nose_roman","nose_syrid","mouth_shadow","age_lines","wings_devil","mouth_neutral","mouth_amusement","mouth_anger","mouth_alertness","mouth_anxiety","mouth_betrayal","mouth_caged","mouth_cruel","mouth_desperation","mouth_eeww","mouth_horror","mouth_melancholy","mouth_omg","mouth_outrage"],hairLayers=["facialhair_beard_boxed","facialhair_beard_ducktail","facialhair_beard_guru","facialhair_beard_intelectual","facialhair_beard_rap","facialhair_chinpuff","facialhair_goatee","facialhair_moustache","facialhair_moustache_thick","facialhair_muttonchops","facialhair_muttonchops_friendly","facialhair_soulpatch","facialhair_winnfield","hair_balding","hair_balding_crazy","hair_short","hair_gelled","hair_wavy","hair_manga_1_of_2","hair_manga_2_of_2","hair_mohawk","hair_down_1_of_3","hair_down_2_of_3","hair_down_3_of_3","hair_afro","hair_ponytail","hair_bangs","hair_odango","hair_emo","hair_spider","hair_wreckingball","hair_crewcut","eyelashes_neutral","brows_neutral","brows_alertness","brows_anxiety","brows_amusement","brows_anger","brows_anxiety","brows_aversion","brows_betrayal","brows_caged","brows_concern","brows_cruel","brows_dejection","brows_desperation","brows_disdain","brows_disgust","brows_eeww","brows_fear","brows_grief","brows_horror","brows_indignation","brows_joy","brows_laughing","brows_melancholy","brows_omg","brows_outrage","brows_pain","brows_rage","brows_revulsion","brows_sadness","brows_satisfaction","brows_shock","brows_sterness","brows_surprise","brows_terror","brows_wonder","brows_wtf"],c.sex=hash.get("sex");var _=c.sex;if("m"===_){var b=e,x=t,w=r,S=n,k=o,C=i,L=m,A=a;multiLayer=y}else{var b=s,x=l,w=u,S=h,k=d,C=f,L=g,A=p;multiLayer=v}forms=[b,x,w,S,k,C],parseHash(c,forms,skinLayers,hairLayers),toBeShown=choicesToLayers(c,multiLayer),viewport=Snap("#svg1");var q=A.map(function(e){return L+e});viewport.loadFilesDisplayOrdered(q,onAllLoaded,onEachLoaded)}function displayPallette(){var e=hash.get("skinColor");void 0!=e?showForm():chooseSkinColor()}function chooseSkinColor(){var e=["#FFDFC4","#F0D5BE","#EECEB3","#E1B899","#E5C298","#FFDCB2","#E5B887","#E5A073","#E79E6D","#DB9065","#CE967C","#C67856","#BA6C49","#A57257","#F0C8C9","#DDA8A0","#B97C6D","#A8756C","#AD6452","#5C3836","#CB8442","#BD723C","#704139","#A3866A"],t=document.querySelector(".skin-color__container");t.classList.add("skin-color__container--show");for(color in e){var r=e[color],n=document.createElement("LI");n.className="skin-tone",n.style.cssText="background-color:"+r+";",t.appendChild(n),n.onclick=colorCutout,n.onmouseover=colorOnHover}}function rgb2hex(e){return e=e.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i),e&&4===e.length?"#"+("0"+parseInt(e[1],10).toString(16)).slice(-2)+("0"+parseInt(e[2],10).toString(16)).slice(-2)+("0"+parseInt(e[3],10).toString(16)).slice(-2):""}function colorOnHover(){var e=document.getElementById("path_male"),t=document.getElementById("path_female"),r=this.style.backgroundColor;t.style.fill=r,e.style.fill=r}function colorCutout(e){var t=this.style.backgroundColor,e=rgb2hex(t),r=(document.getElementsByClassName(".skin-tone"),document.getElementById("male_silhouette"),document.getElementById("female_silhouette"),document.getElementsByClassName("lg"),new Array);r.skinColor=e;var n=document.querySelector(".skin-color__container");n.classList.remove("skin-color__container--show"),hash.add(r),setTimeout(function(){showForm()},300)}function showForm(){launch()}function selectMale(e){window.sex="m";var t=document.querySelector("#mButton"),r=document.querySelector("#svg1"),n=document.querySelector("#male_silhouette");document.querySelector("#female_silhouette");t&&(t.checked=!0),n&&n.removeEventListener("click",selectMale,!1),hash.add({sex:"m"});document.getElementById("path_male");r.classList.add("select-male"),setTimeout(function(){displayPallette()},350)}function selectFemale(e){window.sex="f";var t=document.querySelector("#fButton"),r=document.querySelector("#svg1"),n=(document.querySelector("#male_silhouette"),document.querySelector("#female_silhouette"));t&&(t.checked=!0),n&&n.removeEventListener("click",selectFemale,!1),hash.add({sex:"f"});var n=document.getElementById("female_silhouette");document.getElementById("path_female");r.classList.add("select-female"),setTimeout(function(){displayPallette()},350)}function parseHash(e,t,r,n){for(var o=t.length,i=o;i--;){var a=o-i-1;for(var s in t[a]){var l=s.toLowerCase();if("brows"===l||"eyes"===l||"iris"===l||"pupils"===l||"mouth"===l||"lashes"===l){if("pupils"===l){var c=hash.get("pupils");void 0==c&&(c="human"),l+="_"+c}var u=hash.get("emotion");void 0===u&&(u="neutral")}else var u=hash.get(l);var h=l+"_"+u;void 0!=u?(modCharacter(l,u),ga("send","event","hash","select",h)):("brows"===l||"eyes"===l||"iris"===l||"pupils_human"===l||"mouth"===l)&&modCharacter(l,"neutral"),h in r||"body"===l?l="skin":(h in n||"hair"===l)&&(l="hair");var d=hash.get(l+"Color");void 0!=d&&""!=d&&(modCharacter(l+"Color",d),ga("send","event","hash","color",l+"_"+d))}}}function random(){var e=window.forms,t=e.length,r=Math.floor(Math.random()*t),n=0,o=e[r];for(k in o)o.hasOwnProperty(k)&&n++;var i=[];for(var a in e[r])e[r].hasOwnProperty(a)&&i.push(a);var s=i.length,l=Math.floor(Math.random()*s),a=i[l],c=a,u=e[r][c].length,h=Math.floor(Math.random()*u),d=e[r][c][h].toLowerCase();showRandom(a.toLowerCase(),d)}function showRandom(e,t){hideCompetition(e);var r=t,n=[];n[0]=e;var o=new Array,i="#"+n[0]+"_"+r;if(o[n[0]]=r,hash.add(o),"pupils"===n[0]&&(n[0]+="_"+r,r=hash.get("emotion"),void 0==r&&(r="neutral")),"emotion"===n[0]){modCharacter(n[0],r),n=[];var a=GetEmotionGetLayers(r);for(emo in a){var s=a[emo]+"_"+t;n.push(s)}}for(e in n){sectionOptions=getOptions(n[e]);var i="#"+n[e]+"_"+t;for(option in sectionOptions)optionId="#"+n[e]+"_"+sectionOptions[option],hideId(optionId);if(showId(i),"brows"===n[e]||"eyes"===n[e]||"iris"===n[e]||"mouth"===n[e]||"pupils_human"===n[e]||"lashes"===n[e])modCharacter(n[e],r);else{var o=new Array;o[n[e]]=r,hash.add(o),modCharacter(n[e],r)}}}function hideCompetition(e){var t=["hair","mask","hat","veil"],r=["shorts","pants"],n=["jacket","coat"];-1!=t.indexOf(e)?hideArray(t):-1!=r.indexOf(e)?hideArray(r):-1!=n.indexOf(e)&&hideArray(n)}function hideArray(e){for(section in e){sectionOptions=getOptions(e[section]);for(option in sectionOptions){optionId="#"+e[section]+"_"+sectionOptions[option],hideId(optionId);var t=new Array;t[e[section]]="",hash.add(t),modCharacter(e[section],"")}}}function showId(e){ga("send","event","menu","select",e);for(lyr in multiLayer)if(e.slice(1)==multiLayer[lyr][0])for(var t=1;t<=multiLayer[lyr][1];t++)idOf=e+"_"+t+"_of_"+multiLayer[lyr][1],viewport.selectAll(idOf).attr({opacity:1});else viewport.selectAll(e).attr({opacity:1})}function hideId(e){for(lyr in multiLayer)if(e.slice(1)==multiLayer[lyr][0])for(var t=1;t<=multiLayer[lyr][1];t++)idOf=e+"_"+t+"_of_"+multiLayer[lyr][1],viewport.selectAll(idOf).attr({opacity:0});else viewport.selectAll(e).attr({opacity:0})}function getOptions(e){for(form in window.forms)if(capitalizeFirstLetter(e)in window.forms[form])return window.forms[form][capitalizeFirstLetter(e)]}function capitalizeFirstLetter(e){return e.charAt(0).toUpperCase()+e.slice(1)}function scrollZoom(e){var t=(document.querySelector("#svg1"),window.event||e),r=t.detail?-120*t.detail:t.wheelDelta,n=document.querySelector("#zoomLevel").value;document.querySelector("#zoomLevel");r>0?(n+=1,n>3&&(n=3),document.querySelector("#zoomLevel").value=n,document.querySelector("#zoomLevel").onchange()):(n-=1,0>n&&(n=0),document.querySelector("#zoomLevel").value=n,document.querySelector("#zoomLevel").onchange())}function zoomIn(){var e=c.sex;shape=document.getElementById("svg1"),"m"==e?shape.setAttribute("viewBox","140 73 290 290"):shape.setAttribute("viewBox","225 86 110 110")}function zoomOut(){c.sex;shape=document.getElementById("svg1"),shape.setAttribute("viewBox","10 50 540 540")}function zoomFace(){var e=c.sex;shape=document.getElementById("svg1"),"m"==e?shape.setAttribute("viewBox","240 90 80 80"):shape.setAttribute("viewBox","243 102 80 80")}function zoomTorso(){var e=c.sex;shape=document.getElementById("svg1"),"m"==e?shape.setAttribute("viewBox","204 85 150 150"):shape.setAttribute("viewBox","207 97 150 150")}function zoomBody(){var e=c.sex;shape=document.getElementById("svg1"),"m"==e?shape.setAttribute("viewBox","136 73 290 290"):shape.setAttribute("viewBox","140 84 290 290")}function zoomFull(){var e=c.sex;shape=document.getElementById("svg1"),"m"==e?shape.setAttribute("viewBox","10 50 540 540"):shape.setAttribute("viewBox","10 50 540 540")}function viewBoxZoom(){var e=document.querySelector("#zoomLevel").value;3==e?zoomFace():2==e?zoomTorso():1==e?zoomBody():0==e&&zoomFull()}!function(e,t,r){function n(t){if(e.event&&e.event.contentOverflow!==r)return{x:e.event.offsetX,y:e.event.offsetY};if(t.offsetX!==r&&t.offsetY!==r)return{x:t.offsetX,y:t.offsetY};var n=t.target.parentNode.parentNode;return{x:t.layerX-n.offsetLeft,y:t.layerY-n.offsetTop}}function o(e,r,n){e=t.createElementNS(v,e);for(var o in r)e.setAttribute(o,r[o]);"[object Array]"!=Object.prototype.toString.call(n)&&(n=[n]);for(var i=0,a=n[0]&&n.length||0;a>i;i++)e.appendChild(n[i]);return e}function i(e){var t,r,n,o,i,a=e.h%360/60;i=e.v*e.s,o=i*(1-Math.abs(a%2-1)),t=r=n=e.v-i,a=~~a,t+=[i,o,0,0,o,i][a],r+=[o,i,i,o,0,0][a],n+=[0,0,o,i,i,o][a];var s=Math.floor(255*t),l=Math.floor(255*r),c=Math.floor(255*n);return{r:s,g:l,b:c,hex:"#"+(16777216|c|l<<8|s<<16).toString(16).slice(1)}}function a(e){var t=e.r,r=e.g,n=e.b;(e.r>1||e.g>1||e.b>1)&&(t/=255,r/=255,n/=255);var o,i,a,s;return a=Math.max(t,r,n),s=a-Math.min(t,r,n),o=0==s?null:a==t?(r-n)/s+(n>r?6:0):a==r?(n-t)/s+2:(t-r)/s+4,o=o%6*60,i=0==s?0:s/a,{h:o,s:i,v:a}}function s(t,o,a){return function(s){s=s||e.event;var l=n(s);t.h=l.y/o.offsetHeight*360+m;var c=i({h:t.h,s:1,v:1}),u=i({h:t.h,s:t.s,v:t.v});a.style.backgroundColor=c.hex,t.callback&&t.callback(u.hex,{h:t.h-m,s:t.s,v:t.v},{r:u.r,g:u.g,b:u.b},r,l)}}function l(t,r){return function(o){o=o||e.event;var a=n(o),s=r.offsetWidth,l=r.offsetHeight;t.s=a.x/s,t.v=(l-a.y)/l;var c=i(t);t.callback&&t.callback(c.hex,{h:t.h-m,s:t.s,v:t.v},{r:c.r,g:c.g,b:c.b},a)}}function c(e,t,r){if(!(this instanceof c))return new c(e,t,r);if(this.h=0,this.s=1,this.v=1,r)this.callback=r,this.pickerElement=t,this.slideElement=e;else{var n=e;n.innerHTML=y,this.slideElement=n.getElementsByClassName("slide")[0],this.pickerElement=n.getElementsByClassName("picker")[0];var o=n.getElementsByClassName("slide-indicator")[0],i=n.getElementsByClassName("picker-indicator")[0];c.fixIndicators(o,i),this.callback=function(e,r,n,a,s){c.positionIndicators(o,i,s,a),t(e,r,n)}}if("SVG"==g){var a=p.cloneNode(!0),d=f.cloneNode(!0),m=a.getElementById("gradient-hsv"),v=a.getElementsByTagName("rect")[0];m.id="gradient-hsv-"+_,v.setAttribute("fill","url(#"+m.id+")");var b=[d.getElementById("gradient-black"),d.getElementById("gradient-white")],x=d.getElementsByTagName("rect");b[0].id="gradient-black-"+_,b[1].id="gradient-white-"+_,x[0].setAttribute("fill","url(#"+b[1].id+")"),x[1].setAttribute("fill","url(#"+b[0].id+")"),this.slideElement.appendChild(a),this.pickerElement.appendChild(d),_++}else this.slideElement.innerHTML=p,this.pickerElement.innerHTML=f;u(this.slideElement,"click",s(this,this.slideElement,this.pickerElement)),u(this.pickerElement,"click",l(this,this.pickerElement)),h(this,this.slideElement,s(this,this.slideElement,this.pickerElement)),h(this,this.pickerElement,l(this,this.pickerElement))}function u(e,t,r){e.attachEvent?e.attachEvent("on"+t,r):e.addEventListener&&e.addEventListener(t,r,!1)}function h(e,t,r){var n=!1;u(t,"mousedown",function(e){n=!0}),u(t,"mouseup",function(e){n=!1}),u(t,"mouseout",function(e){n=!1}),u(t,"mousemove",function(e){n&&r(e)})}function d(e,t,r,n){e.h=t.h%360,e.s=t.s,e.v=t.v;var o=i(e),a={y:e.h*e.slideElement.offsetHeight/360,x:0},s=e.pickerElement.offsetHeight,l={x:e.s*e.pickerElement.offsetWidth,y:s-e.v*s};return e.pickerElement.style.backgroundColor=i({h:e.h,s:1,v:1}).hex,e.callback&&e.callback(n||o.hex,{h:e.h,s:e.s,v:e.v},r||{r:o.r,g:o.g,b:o.b},l,a),e}var f,p,g=e.SVGAngle||t.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML",m=15,v="http://www.w3.org/2000/svg",y=['<div class="picker-wrapper">','<div class="picker"></div>','<div class="picker-indicator"></div>',"</div>",'<div class="slide-wrapper">','<div class="slide"></div>','<div class="slide-indicator"></div>',"</div>"].join("");"SVG"==g?(p=o("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"100%",height:"100%"},[o("defs",{},o("linearGradient",{id:"gradient-hsv",x1:"0%",y1:"100%",x2:"0%",y2:"0%"},[o("stop",{offset:"0%","stop-color":"#FF0000","stop-opacity":"1"}),o("stop",{offset:"13%","stop-color":"#FF00FF","stop-opacity":"1"}),o("stop",{offset:"25%","stop-color":"#8000FF","stop-opacity":"1"}),o("stop",{offset:"38%","stop-color":"#0040FF","stop-opacity":"1"}),o("stop",{offset:"50%","stop-color":"#00FFFF","stop-opacity":"1"}),o("stop",{offset:"63%","stop-color":"#00FF40","stop-opacity":"1"}),o("stop",{offset:"75%","stop-color":"#0BED00","stop-opacity":"1"}),o("stop",{offset:"88%","stop-color":"#FFFF00","stop-opacity":"1"}),o("stop",{offset:"100%","stop-color":"#FF0000","stop-opacity":"1"})])),o("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#gradient-hsv)"})]),f=o("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"100%",height:"100%"},[o("defs",{},[o("linearGradient",{id:"gradient-black",x1:"0%",y1:"100%",x2:"0%",y2:"0%"},[o("stop",{offset:"0%","stop-color":"#000000","stop-opacity":"1"}),o("stop",{offset:"100%","stop-color":"#CC9A81","stop-opacity":"0"})]),o("linearGradient",{id:"gradient-white",x1:"0%",y1:"100%",x2:"100%",y2:"100%"},[o("stop",{offset:"0%","stop-color":"#FFFFFF","stop-opacity":"1"}),o("stop",{offset:"100%","stop-color":"#CC9A81","stop-opacity":"0"})])]),o("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#gradient-white)"}),o("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#gradient-black)"})])):"VML"==g&&(p=['<DIV style="position: relative; width: 100%; height: 100%">','<v:rect style="position: absolute; top: 0; left: 0; width: 100%; height: 100%" stroked="f" filled="t">','<v:fill type="gradient" method="none" angle="0" color="red" color2="red" colors="8519f fuchsia;.25 #8000ff;24903f #0040ff;.5 aqua;41287f #00ff40;.75 #0bed00;57671f yellow"></v:fill>',"</v:rect>","</DIV>"].join(""),f=['<DIV style="position: relative; width: 100%; height: 100%">','<v:rect style="position: absolute; left: -1px; top: -1px; width: 101%; height: 101%" stroked="f" filled="t">','<v:fill type="gradient" method="none" angle="270" color="#FFFFFF" opacity="100%" color2="#CC9A81" o:opacity2="0%"></v:fill>',"</v:rect>",'<v:rect style="position: absolute; left: 0px; top: 0px; width: 100%; height: 101%" stroked="f" filled="t">','<v:fill type="gradient" method="none" angle="0" color="#000000" opacity="100%" color2="#CC9A81" o:opacity2="0%"></v:fill>',"</v:rect>","</DIV>"].join(""),
t.namespaces.v||t.namespaces.add("v","urn:schemas-microsoft-com:vml","#default#VML"));var _=0;c.hsv2rgb=function(e){var t=i(e);return delete t.hex,t},c.hsv2hex=function(e){return i(e).hex},c.rgb2hsv=a,c.rgb2hex=function(e){return i(a(e)).hex},c.hex2hsv=function(e){return a(c.hex2rgb(e))},c.hex2rgb=function(e){return{r:parseInt(e.substr(1,2),16),g:parseInt(e.substr(3,2),16),b:parseInt(e.substr(5,2),16)}},c.prototype.setHsv=function(e){return d(this,e)},c.prototype.setRgb=function(e){return d(this,a(e),e)},c.prototype.setHex=function(e){return d(this,c.hex2hsv(e),r,e)},c.positionIndicators=function(e,t,r,n){r&&(e.style.top=r.y-e.offsetHeight/2+"px"),n&&(t.style.top=n.y-t.offsetHeight/2+"px",t.style.left=n.x-t.offsetWidth/2+"px")},c.fixIndicators=function(e,t){t.style.pointerEvents="none",e.style.pointerEvents="none"},e.ColorPicker=c}(window,window.document),function(e,t){"use strict";var r=function(){var t=function(){for(var t=e.location.hash?e.location.hash.substr(1).split("&"):[],r={},n=0;n<t.length;n++){var o=t[n].split("=");r[o[0]]=decodeURIComponent(o[1])}return r},r=function(t){var r=[];for(var n in t)r.push(n+"="+encodeURIComponent(t[n]));e.location.hash=r.join("&")};return{get:function(e){var r=t();return e?r[e]:r},add:function(e){var n=t();for(var o in e)n[o]=e[o];r(n)},remove:function(e){e="string"==typeof e?[e]:e;for(var n=t(),o=0;o<e.length;o++)delete n[e[o]];r(n)},clear:function(){r({})}}}();e.hash=r}(window),!function(e){var t,r,n="0.4.2",o="hasOwnProperty",i=/[\.\/]/,a="*",s=function(){},l=function(e,t){return e-t},c={n:{}},u=function(e,n){e=String(e);var o,i=r,a=Array.prototype.slice.call(arguments,2),s=u.listeners(e),c=0,h=[],d={},f=[],p=t;t=e,r=0;for(var g=0,m=s.length;m>g;g++)"zIndex"in s[g]&&(h.push(s[g].zIndex),s[g].zIndex<0&&(d[s[g].zIndex]=s[g]));for(h.sort(l);h[c]<0;)if(o=d[h[c++]],f.push(o.apply(n,a)),r)return r=i,f;for(g=0;m>g;g++)if(o=s[g],"zIndex"in o)if(o.zIndex==h[c]){if(f.push(o.apply(n,a)),r)break;do if(c++,o=d[h[c]],o&&f.push(o.apply(n,a)),r)break;while(o)}else d[o.zIndex]=o;else if(f.push(o.apply(n,a)),r)break;return r=i,t=p,f.length?f:null};u._events=c,u.listeners=function(e){var t,r,n,o,s,l,u,h,d=e.split(i),f=c,p=[f],g=[];for(o=0,s=d.length;s>o;o++){for(h=[],l=0,u=p.length;u>l;l++)for(f=p[l].n,r=[f[d[o]],f[a]],n=2;n--;)t=r[n],t&&(h.push(t),g=g.concat(t.f||[]));p=h}return g},u.on=function(e,t){if(e=String(e),"function"!=typeof t)return function(){};for(var r=e.split(i),n=c,o=0,a=r.length;a>o;o++)n=n.n,n=n.hasOwnProperty(r[o])&&n[r[o]]||(n[r[o]]={n:{}});for(n.f=n.f||[],o=0,a=n.f.length;a>o;o++)if(n.f[o]==t)return s;return n.f.push(t),function(e){+e==+e&&(t.zIndex=+e)}},u.f=function(e){var t=[].slice.call(arguments,1);return function(){u.apply(null,[e,null].concat(t).concat([].slice.call(arguments,0)))}},u.stop=function(){r=1},u.nt=function(e){return e?new RegExp("(?:\\.|\\/|^)"+e+"(?:\\.|\\/|$)").test(t):t},u.nts=function(){return t.split(i)},u.off=u.unbind=function(e,t){if(!e)return void(u._events=c={n:{}});var r,n,s,l,h,d,f,p=e.split(i),g=[c];for(l=0,h=p.length;h>l;l++)for(d=0;d<g.length;d+=s.length-2){if(s=[d,1],r=g[d].n,p[l]!=a)r[p[l]]&&s.push(r[p[l]]);else for(n in r)r[o](n)&&s.push(r[n]);g.splice.apply(g,s)}for(l=0,h=g.length;h>l;l++)for(r=g[l];r.n;){if(t){if(r.f){for(d=0,f=r.f.length;f>d;d++)if(r.f[d]==t){r.f.splice(d,1);break}!r.f.length&&delete r.f}for(n in r.n)if(r.n[o](n)&&r.n[n].f){var m=r.n[n].f;for(d=0,f=m.length;f>d;d++)if(m[d]==t){m.splice(d,1);break}!m.length&&delete r.n[n].f}}else{delete r.f;for(n in r.n)r.n[o](n)&&r.n[n].f&&delete r.n[n].f}r=r.n}},u.once=function(e,t){var r=function(){return u.unbind(e,r),t.apply(this,arguments)};return u.on(e,r)},u.version=n,u.toString=function(){return"You are running Eve "+n},"undefined"!=typeof module&&module.exports?module.exports=u:"undefined"!=typeof define?define("eve",[],function(){return u}):e.eve=u}(this),function(e,t){"function"==typeof define&&define.amd?define(["eve"],function(r){return t(e,r)}):t(e,e.eve)}(this,function(e,t){var r=function(t){var r={},n=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||function(e){setTimeout(e,16)},o=Array.isArray||function(e){return e instanceof Array||"[object Array]"==Object.prototype.toString.call(e)},i=0,a="M"+(+new Date).toString(36),s=function(){return a+(i++).toString(36)},l=Date.now||function(){return+new Date},c=function(e){var t=this;if(null==e)return t.s;var r=t.s-e;t.b+=t.dur*r,t.B+=t.dur*r,t.s=e},u=function(e){var t=this;return null==e?t.spd:void(t.spd=e)},h=function(e){var t=this;return null==e?t.dur:(t.s=t.s*e/t.dur,void(t.dur=e))},d=function(){var e=this;delete r[e.id],t("mina.stop."+e.id,e)},f=function(){var e=this;e.pdif||(delete r[e.id],e.pdif=e.get()-e.b)},p=function(){var e=this;e.pdif&&(e.b=e.get()-e.pdif,delete e.pdif,r[e.id]=e)},g=function(){var e=0;for(var i in r)if(r.hasOwnProperty(i)){var a,s=r[i],l=s.get();if(e++,s.s=(l-s.b)/(s.dur/s.spd),s.s>=1&&(delete r[i],s.s=1,e--,function(e){setTimeout(function(){t("mina.finish."+e.id,e)})}(s)),o(s.start)){a=[];for(var c=0,u=s.start.length;u>c;c++)a[c]=+s.start[c]+(s.end[c]-s.start[c])*s.easing(s.s)}else a=+s.start+(s.end-s.start)*s.easing(s.s);s.set(a)}e&&n(g)},m=function(e,t,o,i,a,l,v){var y={id:s(),start:e,end:t,b:o,s:0,dur:i-o,spd:1,get:a,set:l,easing:v||m.linear,status:c,speed:u,duration:h,stop:d,pause:f,resume:p};r[y.id]=y;var _,b=0;for(_ in r)if(r.hasOwnProperty(_)&&(b++,2==b))break;return 1==b&&n(g),y};return m.time=l,m.getById=function(e){return r[e]||null},m.linear=function(e){return e},m.easeout=function(e){return Math.pow(e,1.7)},m.easein=function(e){return Math.pow(e,.48)},m.easeinout=function(e){if(1==e)return 1;if(0==e)return 0;var t=.48-e/1.04,r=Math.sqrt(.1734+t*t),n=r-t,o=Math.pow(Math.abs(n),1/3)*(0>n?-1:1),i=-r-t,a=Math.pow(Math.abs(i),1/3)*(0>i?-1:1),s=o+a+.5;return 3*(1-s)*s*s+s*s*s},m.backin=function(e){if(1==e)return 1;var t=1.70158;return e*e*((t+1)*e-t)},m.backout=function(e){if(0==e)return 0;e-=1;var t=1.70158;return e*e*((t+1)*e+t)+1},m.elastic=function(e){return e==!!e?e:Math.pow(2,-10*e)*Math.sin(2*(e-.075)*Math.PI/.3)+1},m.bounce=function(e){var t,r=7.5625,n=2.75;return 1/n>e?t=r*e*e:2/n>e?(e-=1.5/n,t=r*e*e+.75):2.5/n>e?(e-=2.25/n,t=r*e*e+.9375):(e-=2.625/n,t=r*e*e+.984375),t},e.mina=m,m}("undefined"==typeof t?function(){}:t),n=function(){function n(e,t){if(e){if(e.tagName)return C(e);if(e instanceof b)return e;if(null==t)return e=j.doc.querySelector(e),C(e)}return e=null==e?"100%":e,t=null==t?"100%":t,new k(e,t)}function o(e,t){if(t){if("string"==typeof e&&(e=o(e)),"string"==typeof t)return"xlink:"==t.substring(0,6)?e.getAttributeNS(ie,t.substring(6)):"xml:"==t.substring(0,4)?e.getAttributeNS(ae,t.substring(4)):e.getAttribute(t);for(var r in t)if(t[N](r)){var n=U(t[r]);n?"xlink:"==r.substring(0,6)?e.setAttributeNS(ie,r.substring(6),n):"xml:"==r.substring(0,4)?e.setAttributeNS(ae,r.substring(4),n):e.setAttribute(r,n):e.removeAttribute(r)}}else e=j.doc.createElementNS(ae,e);return e}function i(e,t){return t=U.prototype.toLowerCase.call(t),"finite"==t?isFinite(e):"array"==t&&(e instanceof Array||Array.isArray&&Array.isArray(e))?!0:"null"==t&&null===e||t==typeof e&&null!==e||"object"==t&&e===Object(e)||X.call(e).slice(8,-1).toLowerCase()==t}function a(e){if("function"==typeof e||Object(e)!==e)return e;var t=new e.constructor;for(var r in e)e[N](r)&&(t[r]=a(e[r]));return t}function s(e,t){for(var r=0,n=e.length;n>r;r++)if(e[r]===t)return e.push(e.splice(r,1)[0])}function l(e,t,r){function n(){var o=Array.prototype.slice.call(arguments,0),i=o.join("␀"),a=n.cache=n.cache||{},l=n.count=n.count||[];return a[N](i)?(s(l,i),r?r(a[i]):a[i]):(l.length>=1e3&&delete a[l.shift()],l.push(i),a[i]=e.apply(t,o),r?r(a[i]):a[i])}return n}function c(e,t,r,n,o,i){if(null==o){var a=e-r,s=t-n;return a||s?(180+180*D.atan2(-s,-a)/H+360)%360:0}return c(e,t,o,i)-c(r,n,o,i)}function u(e){return e%360*H/180}function h(e){return 180*e/H%360}function d(e,t,r,n,o,i){return null==t&&"[object SVGMatrix]"==X.call(e)?(this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.e=e.e,void(this.f=e.f)):void(null!=e?(this.a=+e,this.b=+t,this.c=+r,this.d=+n,this.e=+o,this.f=+i):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0))}function f(e){var t=[];return e=e.replace(/(?:^|\s)(\w+)\(([^)]+)\)/g,function(e,r,n){return n=n.split(/\s*,\s*|\s+/),"rotate"==r&&1==n.length&&n.push(0,0),"scale"==r&&(2==n.length&&n.push(0,0),1==n.length&&n.push(n[0],0,0)),"skewX"==r?t.push(["m",1,0,D.tan(u(n[0])),1,0,0]):"skewY"==r?t.push(["m",1,D.tan(u(n[0])),0,1,0,0]):t.push([r.charAt(0)].concat(n)),e}),t}function p(e,t){var r=me(e),n=new d;if(r)for(var o=0,i=r.length;i>o;o++){var a,s,l,c,u,h=r[o],f=h.length,p=U(h[0]).toLowerCase(),g=h[0]!=p,m=g?n.invert():0;"t"==p&&2==f?n.translate(h[1],0):"t"==p&&3==f?g?(a=m.x(0,0),s=m.y(0,0),l=m.x(h[1],h[2]),c=m.y(h[1],h[2]),n.translate(l-a,c-s)):n.translate(h[1],h[2]):"r"==p?2==f?(u=u||t,n.rotate(h[1],u.x+u.width/2,u.y+u.height/2)):4==f&&(g?(l=m.x(h[2],h[3]),c=m.y(h[2],h[3]),n.rotate(h[1],l,c)):n.rotate(h[1],h[2],h[3])):"s"==p?2==f||3==f?(u=u||t,n.scale(h[1],h[f-1],u.x+u.width/2,u.y+u.height/2)):4==f?g?(l=m.x(h[2],h[3]),c=m.y(h[2],h[3]),n.scale(h[1],h[1],l,c)):n.scale(h[1],h[1],h[2],h[3]):5==f&&(g?(l=m.x(h[3],h[4]),c=m.y(h[3],h[4]),n.scale(h[1],h[2],l,c)):n.scale(h[1],h[2],h[3],h[4])):"m"==p&&7==f&&n.add(h[1],h[2],h[3],h[4],h[5],h[6])}return n}function m(e,t){if(null==t){var r=!0;if(t="linearGradient"==e.type||"radialGradient"==e.type?e.node.getAttribute("gradientTransform"):"pattern"==e.type?e.node.getAttribute("patternTransform"):e.node.getAttribute("transform"),!t)return new d;t=f(t)}else t=n._.rgTransform.test(t)?U(t).replace(/\.{3}|\u2026/g,e._.transform||G):f(t),i(t,"array")&&(t=n.path?n.path.toString.call(t):U(t)),e._.transform=t;var o=p(t,e.getBBox(1));return r?o:void(e.matrix=o)}function v(e){var t=n._.someDefs;if(t&&ve(t.ownerDocument.documentElement,t))return t;var r=e.node.ownerSVGElement&&C(e.node.ownerSVGElement)||e.node.parentNode&&C(e.node.parentNode)||n.select("svg")||n(0,0),o=r.select("defs"),i=null==o?!1:o.node;return i||(i=S("defs",r.node).node),n._.someDefs=i,i}function y(e,t,r){function n(e){return null==e?G:e==+e?e:(o(c,{width:e}),c.getBBox().width)}function i(e){return null==e?G:e==+e?e:(o(c,{height:e}),c.getBBox().height)}function a(n,o){null==t?l[n]=o(e.attr(n)):n==t&&(l=o(null==r?e.attr(n):r))}var s=v(e),l={},c=s.querySelector(".svg---mgr");switch(c||(c=o("rect"),o(c,{width:10,height:10,"class":"svg---mgr"}),s.appendChild(c)),e.type){case"rect":a("rx",n),a("ry",i);case"image":a("width",n),a("height",i);case"text":a("x",n),a("y",i);break;case"circle":a("cx",n),a("cy",i),a("r",n);break;case"ellipse":a("cx",n),a("cy",i),a("rx",n),a("ry",i);break;case"line":a("x1",n),a("x2",n),a("y1",i),a("y2",i);break;case"marker":a("refX",n),a("markerWidth",n),a("refY",i),a("markerHeight",i);break;case"radialGradient":a("fx",n),a("fy",i);break;case"tspan":a("dx",n),a("dy",i);break;default:a(t,n)}return l}function _(e){i(e,"array")||(e=Array.prototype.slice.call(arguments,0));for(var t=0,r=0,n=this.node;this[t];)delete this[t++];for(t=0;t<e.length;t++)"set"==e[t].type?e[t].forEach(function(e){n.appendChild(e.node)}):n.appendChild(e[t].node);var o=n.childNodes;for(t=0;t<o.length;t++)this[r++]=C(o[t]);return this}function b(e){if(e.snap in se)return se[e.snap];var t,r=this.id=oe();try{t=e.ownerSVGElement}catch(n){}if(this.node=e,t&&(this.paper=new k(t)),this.type=e.tagName,this.anims={},this._={transform:[]},e.snap=r,se[r]=this,"g"==this.type){this.add=_;for(var o in k.prototype)k.prototype[N](o)&&(this[o]=k.prototype[o])}}function x(e){for(var t,r=0,n=e.length;n>r;r++)if(t=t||e[r])return t}function w(e){this.node=e}function S(e,t){var r=o(e);t.appendChild(r);var n=C(r);return n.type=e,n}function k(e,t){var r,n,i,a=k.prototype;if(e&&"svg"==e.tagName){if(e.snap in se)return se[e.snap];r=new b(e),n=e.getElementsByTagName("desc")[0],i=e.getElementsByTagName("defs")[0],n||(n=o("desc"),n.appendChild(j.doc.createTextNode("Created with Snap")),r.node.appendChild(n)),i||(i=o("defs"),r.node.appendChild(i)),r.defs=i;for(var s in a)a[N](s)&&(r[s]=a[s]);r.paper=r.root=r}else r=S("svg",j.doc.body),o(r.node,{height:t,version:1.1,width:e,xmlns:ae});return r}function C(e){return e?e instanceof b||e instanceof w?e:"svg"==e.tagName?new k(e):new b(e):e}function L(){return this.selectAll("stop")}function A(e,t){var r=o("stop"),i={offset:+t+"%"};return e=n.color(e),i["stop-color"]=e.hex,e.opacity<1&&(i["stop-opacity"]=e.opacity),o(r,i),this.node.appendChild(r),this}function q(){if("linearGradient"==this.type){var e=o(this.node,"x1")||0,t=o(this.node,"x2")||1,r=o(this.node,"y1")||0,i=o(this.node,"y2")||0;return n._.box(e,r,D.abs(t-e),D.abs(i-r))}var a=this.node.cx||.5,s=this.node.cy||.5,l=this.node.r||0;return n._.box(a-l,s-l,2*l,2*l)}function E(e,r){function n(e,t){for(var r=(t-c)/(e-u),n=u;e>n;n++)s[n].offset=+(+c+r*(n-u)).toFixed(2);u=e,c=t}var i,a=x(t("snap.util.grad.parse",null,r));if(!a)return null;a.params.unshift(e),i="l"==a.type.toLowerCase()?B.apply(0,a.params):F.apply(0,a.params),a.type!=a.type.toLowerCase()&&o(i.node,{gradientUnits:"userSpaceOnUse"});var s=a.stops,l=s.length,c=0,u=0;l--;for(var h=0;l>h;h++)"offset"in s[h]&&n(h,s[h].offset);for(s[l].offset=s[l].offset||100,n(l,s[l].offset),h=0;l>=h;h++){var d=s[h];i.addStop(d.color,d.offset)}return i}function B(e,t,r,n,i){var a=S("linearGradient",e);return a.stops=L,a.addStop=A,a.getBBox=q,null!=t&&o(a.node,{x1:t,y1:r,x2:n,y2:i}),a}function F(e,t,r,n,i,a){var s=S("radialGradient",e);return s.stops=L,s.addStop=A,s.getBBox=q,null!=t&&o(s.node,{cx:t,cy:r,r:n}),null!=i&&null!=a&&o(s.node,{fx:i,fy:a}),s}function T(e){return function(r){if(t.stop(),r instanceof w&&1==r.node.childNodes.length&&("radialGradient"==r.node.firstChild.tagName||"linearGradient"==r.node.firstChild.tagName||"pattern"==r.node.firstChild.tagName)&&(r=r.node.firstChild,v(this).appendChild(r),r=C(r)),r instanceof b)if("radialGradient"==r.type||"linearGradient"==r.type||"pattern"==r.type){r.node.id||o(r.node,{id:r.id});var i=le(r.node.id)}else i=r.attr(e);else if(i=n.color(r),i.error){var a=E(v(this),r);a?(a.node.id||o(a.node,{id:a.id}),i=le(a.node.id)):i=r}else i=U(i);var s={};s[e]=i,o(this.node,s),this.node.style[e]=G}}function M(e){for(var t=[],r=e.childNodes,n=0,o=r.length;o>n;n++){var i=r[n];3==i.nodeType&&t.push(i.nodeValue),"tspan"==i.tagName&&(1==i.childNodes.length&&3==i.firstChild.nodeType?t.push(i.firstChild.nodeValue):t.push(M(i)))}return t}n.version="0.2.0",n.toString=function(){return"Snap v"+this.version},n._={};var j={win:e,doc:e.document};n._.glob=j;var N="hasOwnProperty",U=String,I=parseFloat,P=parseInt,D=Math,O=D.max,R=D.min,z=D.abs,H=(D.pow,D.PI),G=(D.round,""),V=" ",X=Object.prototype.toString,Y=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?%?)\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?%?)\s*\))\s*$/i,$=/^url\(#?([^)]+)\)$/,W="	\n\f\r   ᠎             　\u2028\u2029",Z=new RegExp("[,"+W+"]+"),Q=(new RegExp("["+W+"]","g"),new RegExp("["+W+"]*,["+W+"]*")),J={hs:1,rg:1},K=new RegExp("([a-z])["+W+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+W+"]*,?["+W+"]*)+)","ig"),ee=new RegExp("([rstm])["+W+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+W+"]*,?["+W+"]*)+)","ig"),te=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+W+"]*,?["+W+"]*","ig"),re=0,ne="S"+(+new Date).toString(36),oe=function(){return ne+(re++).toString(36)},ie="http://www.w3.org/1999/xlink",ae="http://www.w3.org/2000/svg",se={},le=n.url=function(e){return"url('#"+e+"')"};n._.$=o,n._.id=oe,n.format=function(){var e=/\{([^\}]+)\}/g,t=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,r=function(e,r,n){var o=n;return r.replace(t,function(e,t,r,n,i){t=t||n,o&&(t in o&&(o=o[t]),"function"==typeof o&&i&&(o=o()))}),o=(null==o||o==n?e:o)+""};return function(t,n){return U(t).replace(e,function(e,t){return r(e,t,n)})}}();var ce=function(){function e(){this.parentNode.removeChild(this)}return function(t,r){var n=j.doc.createElement("img"),o=j.doc.body;n.style.cssText="position:absolute;left:-9999em;top:-9999em",n.onload=function(){r.call(n),n.onload=n.onerror=null,o.removeChild(n)},n.onerror=e,o.appendChild(n),n.src=t}}();n._.clone=a,n._.cacher=l,n.rad=u,n.deg=h,n.angle=c,n.is=i,n.snapTo=function(e,t,r){if(r=i(r,"finite")?r:10,i(e,"array")){for(var n=e.length;n--;)if(z(e[n]-t)<=r)return e[n]}else{e=+e;var o=t%e;if(r>o)return t-o;if(o>e-r)return t-o+e}return t},function(e){function t(e){return e[0]*e[0]+e[1]*e[1]}function r(e){var r=D.sqrt(t(e));e[0]&&(e[0]/=r),e[1]&&(e[1]/=r)}e.add=function(e,t,r,n,o,i){var a,s,l,c,u=[[],[],[]],h=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1]],f=[[e,r,o],[t,n,i],[0,0,1]];for(e&&e instanceof d&&(f=[[e.a,e.c,e.e],[e.b,e.d,e.f],[0,0,1]]),a=0;3>a;a++)for(s=0;3>s;s++){for(c=0,l=0;3>l;l++)c+=h[a][l]*f[l][s];u[a][s]=c}return this.a=u[0][0],this.b=u[1][0],this.c=u[0][1],this.d=u[1][1],this.e=u[0][2],this.f=u[1][2],this},e.invert=function(){var e=this,t=e.a*e.d-e.b*e.c;return new d(e.d/t,-e.b/t,-e.c/t,e.a/t,(e.c*e.f-e.d*e.e)/t,(e.b*e.e-e.a*e.f)/t)},e.clone=function(){return new d(this.a,this.b,this.c,this.d,this.e,this.f)},e.translate=function(e,t){return this.add(1,0,0,1,e,t)},e.scale=function(e,t,r,n){return null==t&&(t=e),(r||n)&&this.add(1,0,0,1,r,n),this.add(e,0,0,t,0,0),(r||n)&&this.add(1,0,0,1,-r,-n),this},e.rotate=function(e,t,r){e=u(e),t=t||0,r=r||0;var n=+D.cos(e).toFixed(9),o=+D.sin(e).toFixed(9);return this.add(n,o,-o,n,t,r),this.add(1,0,0,1,-t,-r)},e.x=function(e,t){return e*this.a+t*this.c+this.e},e.y=function(e,t){return e*this.b+t*this.d+this.f},e.get=function(e){return+this[U.fromCharCode(97+e)].toFixed(4)},e.toString=function(){return"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")"},e.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]},e.split=function(){var e={};e.dx=this.e,e.dy=this.f;var n=[[this.a,this.c],[this.b,this.d]];e.scalex=D.sqrt(t(n[0])),r(n[0]),e.shear=n[0][0]*n[1][0]+n[0][1]*n[1][1],n[1]=[n[1][0]-n[0][0]*e.shear,n[1][1]-n[0][1]*e.shear],e.scaley=D.sqrt(t(n[1])),r(n[1]),e.shear/=e.scaley;var o=-n[0][1],i=n[1][1];return 0>i?(e.rotate=h(D.acos(i)),0>o&&(e.rotate=360-e.rotate)):e.rotate=h(D.asin(o)),e.isSimple=!(+e.shear.toFixed(9)||e.scalex.toFixed(9)!=e.scaley.toFixed(9)&&e.rotate),e.isSuperSimple=!+e.shear.toFixed(9)&&e.scalex.toFixed(9)==e.scaley.toFixed(9)&&!e.rotate,e.noRotation=!+e.shear.toFixed(9)&&!e.rotate,e},e.toTransformString=function(e){var t=e||this.split();return t.isSimple?(t.scalex=+t.scalex.toFixed(4),t.scaley=+t.scaley.toFixed(4),t.rotate=+t.rotate.toFixed(4),(t.dx||t.dy?"t"+[+t.dx.toFixed(4),+t.dy.toFixed(4)]:G)+(1!=t.scalex||1!=t.scaley?"s"+[t.scalex,t.scaley,0,0]:G)+(t.rotate?"r"+[+t.rotate.toFixed(4),0,0]:G)):"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]}}(d.prototype),n.Matrix=d,n.getRGB=l(function(e){if(!e||(e=U(e)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:fe};if("none"==e)return{r:-1,g:-1,b:-1,hex:"none",toString:fe};if(!(J[N](e.toLowerCase().substring(0,2))||"#"==e.charAt())&&(e=ue(e)),!e)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:fe};var t,r,o,a,s,l,c=e.match(Y);return c?(c[2]&&(o=P(c[2].substring(5),16),r=P(c[2].substring(3,5),16),t=P(c[2].substring(1,3),16)),c[3]&&(o=P((s=c[3].charAt(3))+s,16),r=P((s=c[3].charAt(2))+s,16),t=P((s=c[3].charAt(1))+s,16)),c[4]&&(l=c[4].split(Q),t=I(l[0]),"%"==l[0].slice(-1)&&(t*=2.55),r=I(l[1]),"%"==l[1].slice(-1)&&(r*=2.55),o=I(l[2]),"%"==l[2].slice(-1)&&(o*=2.55),"rgba"==c[1].toLowerCase().slice(0,4)&&(a=I(l[3])),l[3]&&"%"==l[3].slice(-1)&&(a/=100)),c[5]?(l=c[5].split(Q),t=I(l[0]),"%"==l[0].slice(-1)&&(t/=100),r=I(l[1]),"%"==l[1].slice(-1)&&(r/=100),o=I(l[2]),"%"==l[2].slice(-1)&&(o/=100),("deg"==l[0].slice(-3)||"°"==l[0].slice(-1))&&(t/=360),"hsba"==c[1].toLowerCase().slice(0,4)&&(a=I(l[3])),l[3]&&"%"==l[3].slice(-1)&&(a/=100),n.hsb2rgb(t,r,o,a)):c[6]?(l=c[6].split(Q),t=I(l[0]),"%"==l[0].slice(-1)&&(t/=100),r=I(l[1]),"%"==l[1].slice(-1)&&(r/=100),o=I(l[2]),"%"==l[2].slice(-1)&&(o/=100),("deg"==l[0].slice(-3)||"°"==l[0].slice(-1))&&(t/=360),"hsla"==c[1].toLowerCase().slice(0,4)&&(a=I(l[3])),l[3]&&"%"==l[3].slice(-1)&&(a/=100),n.hsl2rgb(t,r,o,a)):(t=R(D.round(t),255),r=R(D.round(r),255),o=R(D.round(o),255),a=R(O(a,0),1),c={r:t,g:r,b:o,toString:fe},c.hex="#"+(16777216|o|r<<8|t<<16).toString(16).slice(1),c.opacity=i(a,"finite")?a:1,c)):{r:-1,g:-1,b:-1,hex:"none",error:1,toString:fe}},n),n.hsb=l(function(e,t,r){return n.hsb2rgb(e,t,r).hex}),n.hsl=l(function(e,t,r){return n.hsl2rgb(e,t,r).hex}),n.rgb=l(function(e,t,r,n){if(i(n,"finite")){var o=D.round;return"rgba("+[o(e),o(t),o(r),+n.toFixed(2)]+")"}return"#"+(16777216|r|t<<8|e<<16).toString(16).slice(1)});var ue=function(e){var t=j.doc.getElementsByTagName("head")[0],r="rgb(255, 0, 0)";return(ue=l(function(e){if("red"==e.toLowerCase())return r;t.style.color=r,t.style.color=e;var n=j.doc.defaultView.getComputedStyle(t,G).getPropertyValue("color");return n==r?null:n}))(e)},he=function(){return"hsb("+[this.h,this.s,this.b]+")"},de=function(){return"hsl("+[this.h,this.s,this.l]+")"},fe=function(){return 1==this.opacity||null==this.opacity?this.hex:"rgba("+[this.r,this.g,this.b,this.opacity]+")"},pe=function(e,t,r){if(null==t&&i(e,"object")&&"r"in e&&"g"in e&&"b"in e&&(r=e.b,t=e.g,e=e.r),null==t&&i(e,string)){var o=n.getRGB(e);e=o.r,t=o.g,r=o.b}return(e>1||t>1||r>1)&&(e/=255,t/=255,r/=255),[e,t,r]},ge=function(e,t,r,o){e=D.round(255*e),t=D.round(255*t),r=D.round(255*r);var a={r:e,g:t,b:r,opacity:i(o,"finite")?o:1,hex:n.rgb(e,t,r),toString:fe};return i(o,"finite")&&(a.opacity=o),a};n.color=function(e){var t;return i(e,"object")&&"h"in e&&"s"in e&&"b"in e?(t=n.hsb2rgb(e),e.r=t.r,e.g=t.g,e.b=t.b,e.opacity=1,e.hex=t.hex):i(e,"object")&&"h"in e&&"s"in e&&"l"in e?(t=n.hsl2rgb(e),e.r=t.r,e.g=t.g,e.b=t.b,e.opacity=1,e.hex=t.hex):(i(e,"string")&&(e=n.getRGB(e)),i(e,"object")&&"r"in e&&"g"in e&&"b"in e&&!("error"in e)?(t=n.rgb2hsl(e),e.h=t.h,e.s=t.s,e.l=t.l,t=n.rgb2hsb(e),e.v=t.b):(e={hex:"none"},e.r=e.g=e.b=e.h=e.s=e.v=e.l=-1,e.error=1)),e.toString=fe,e},n.hsb2rgb=function(e,t,r,n){i(e,"object")&&"h"in e&&"s"in e&&"b"in e&&(r=e.b,t=e.s,e=e.h,n=e.o),e*=360;var o,a,s,l,c;return e=e%360/60,c=r*t,l=c*(1-z(e%2-1)),o=a=s=r-c,e=~~e,o+=[c,l,0,0,l,c][e],a+=[l,c,c,l,0,0][e],s+=[0,0,l,c,c,l][e],ge(o,a,s,n)},n.hsl2rgb=function(e,t,r,n){i(e,"object")&&"h"in e&&"s"in e&&"l"in e&&(r=e.l,t=e.s,e=e.h),(e>1||t>1||r>1)&&(e/=360,t/=100,r/=100),e*=360;var o,a,s,l,c;return e=e%360/60,c=2*t*(.5>r?r:1-r),l=c*(1-z(e%2-1)),o=a=s=r-c/2,e=~~e,o+=[c,l,0,0,l,c][e],a+=[l,c,c,l,0,0][e],s+=[0,0,l,c,c,l][e],ge(o,a,s,n)},n.rgb2hsb=function(e,t,r){r=pe(e,t,r),e=r[0],t=r[1],r=r[2];var n,o,i,a;return i=O(e,t,r),a=i-R(e,t,r),n=0==a?null:i==e?(t-r)/a:i==t?(r-e)/a+2:(e-t)/a+4,n=60*((n+360)%6)/360,o=0==a?0:a/i,{h:n,s:o,b:i,toString:he}},n.rgb2hsl=function(e,t,r){r=pe(e,t,r),e=r[0],t=r[1],r=r[2];var n,o,i,a,s,l;return a=O(e,t,r),s=R(e,t,r),l=a-s,n=0==l?null:a==e?(t-r)/l:a==t?(r-e)/l+2:(e-t)/l+4,n=60*((n+360)%6)/360,i=(a+s)/2,o=0==l?0:.5>i?l/(2*i):l/(2-2*i),{h:n,s:o,l:i,toString:de}},n.parsePathString=function(e){if(!e)return null;var t=n.path(e);if(t.arr)return n.path.clone(t.arr);var r={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},o=[];return i(e,"array")&&i(e[0],"array")&&(o=n.path.clone(e)),o.length||U(e).replace(K,function(e,t,n){var i=[],a=t.toLowerCase();if(n.replace(te,function(e,t){t&&i.push(+t)}),"m"==a&&i.length>2&&(o.push([t].concat(i.splice(0,2))),a="l",t="m"==t?"l":"L"),"o"==a&&1==i.length&&o.push([t,i[0]]),"r"==a)o.push([t].concat(i));else for(;i.length>=r[a]&&(o.push([t].concat(i.splice(0,r[a]))),r[a]););}),o.toString=n.path.toString,t.arr=n.path.clone(o),o};var me=n.parseTransformString=function(e){if(!e)return null;var t=[];return i(e,"array")&&i(e[0],"array")&&(t=n.path.clone(e)),t.length||U(e).replace(ee,function(e,r,n){var o=[];r.toLowerCase(),n.replace(te,function(e,t){t&&o.push(+t)}),t.push([r].concat(o))}),t.toString=n.path.toString,t};n._.svgTransform2string=f,n._.rgTransform=new RegExp("^[a-z]["+W+"]*-?\\.?\\d","i"),n._.transform2matrix=p,n._unit2px=y;var ve=j.doc.contains||j.doc.compareDocumentPosition?function(e,t){var r=9==e.nodeType?e.documentElement:e,n=t&&t.parentNode;return e==n||!(!n||1!=n.nodeType||!(r.contains?r.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))}:function(e,t){if(t)for(;t;)if(t=t.parentNode,t==e)return!0;return!1};n._.getSomeDefs=v,n.select=function(e){return C(j.doc.querySelector(e))},n.selectAll=function(e){for(var t=j.doc.querySelectorAll(e),r=(n.set||Array)(),o=0;o<t.length;o++)r.push(C(t[o]));return r},function(e){function a(e){function t(e,t){var r=o(e.node,t);r=r&&r.match(a),r=r&&r[2],r&&"#"==r.charAt()&&(r=r.substring(1),r&&(l[r]=(l[r]||[]).concat(function(r){var n={};n[t]=le(r),o(e.node,n)})))}function r(e){var t=o(e.node,"xlink:href");t&&"#"==t.charAt()&&(t=t.substring(1),t&&(l[t]=(l[t]||[]).concat(function(t){e.attr("xlink:href","#"+t)})))}for(var n,i=e.selectAll("*"),a=/^\s*url\(("|'|)(.*)\1\)\s*$/,s=[],l={},c=0,u=i.length;u>c;c++){n=i[c],t(n,"fill"),t(n,"stroke"),t(n,"filter"),t(n,"mask"),t(n,"clip-path"),r(n);var h=o(n.node,"id");h&&(o(n.node,{id:n.id}),s.push({old:h,id:n.id}))}for(c=0,u=s.length;u>c;c++){var d=l[s[c].old];if(d)for(var f=0,p=d.length;p>f;f++)d[f](s[c].id)}}function s(e,t,r){return function(n){var o=n.slice(e,t);return 1==o.length&&(o=o[0]),r?r(o):o}}function l(e){return function(){var t=e?"<"+this.type:"",r=this.node.attributes,n=this.node.childNodes;if(e)for(var o=0,i=r.length;i>o;o++)t+=" "+r[o].name+'="'+r[o].value.replace(/"/g,'\\"')+'"';if(n.length){for(e&&(t+=">"),o=0,i=n.length;i>o;o++)3==n[o].nodeType?t+=n[o].nodeValue:1==n[o].nodeType&&(t+=C(n[o]).toString());e&&(t+="</"+this.type+">")}else e&&(t+="/>");return t}}e.attr=function(e,r){var n=this;if(n.node,!e)return n;if(i(e,"string")){if(!(arguments.length>1))return x(t("snap.util.getattr."+e,n));var o={};o[e]=r,e=o}for(var a in e)e[N](a)&&t("snap.util.attr."+a,n,e[a]);return n},e.getBBox=function(e){var t=this;if("use"==t.type&&(t=t.original),t.removed)return{};var r=t._;return e?(r.bboxwt=n.path.get[t.type]?n.path.getBBox(t.realPath=n.path.get[t.type](t)):n._.box(t.node.getBBox()),n._.box(r.bboxwt)):(t.realPath=(n.path.get[t.type]||n.path.get.deflt)(t),r.bbox=n.path.getBBox(n.path.map(t.realPath,t.matrix)),n._.box(r.bbox))};var c=function(){return this.string};e.transform=function(e){var t=this._;if(null==e){var r=new d(this.node.getCTM()),n=m(this),i=n.toTransformString(),a=U(n)==U(this.matrix)?t.transform:i;return{string:a,globalMatrix:r,localMatrix:n,diffMatrix:r.clone().add(n.invert()),global:r.toTransformString(),local:i,toString:c}}return e instanceof d&&(e=e.toTransformString()),m(this,e),this.node&&("linearGradient"==this.type||"radialGradient"==this.type?o(this.node,{gradientTransform:this.matrix}):"pattern"==this.type?o(this.node,{patternTransform:this.matrix}):o(this.node,{transform:this.matrix})),this},e.parent=function(){return C(this.node.parentNode)},e.append=e.add=function(e){if(e){if("set"==e.type){var t=this;return e.forEach(function(e){t.add(e)}),this}e=C(e),this.node.appendChild(e.node),e.paper=this.paper}return this},e.appendTo=function(e){return e&&(e=C(e),e.append(this)),this},e.prepend=function(e){if(e){e=C(e);var t=e.parent();this.node.insertBefore(e.node,this.node.firstChild),this.add&&this.add(),e.paper=this.paper,this.parent()&&this.parent().add(),t&&t.add()}return this},e.prependTo=function(e){return e=C(e),e.prepend(this),this},e.before=function(e){if("set"==e.type){var t=this;return e.forEach(function(e){var r=e.parent();t.node.parentNode.insertBefore(e.node,t.node),r&&r.add()}),this.parent().add(),this}e=C(e);var r=e.parent();return this.node.parentNode.insertBefore(e.node,this.node),this.parent()&&this.parent().add(),r&&r.add(),e.paper=this.paper,this},e.after=function(e){e=C(e);var t=e.parent();return this.node.nextSibling?this.node.parentNode.insertBefore(e.node,this.node.nextSibling):this.node.parentNode.appendChild(e.node),this.parent()&&this.parent().add(),t&&t.add(),e.paper=this.paper,this},e.insertBefore=function(e){e=C(e);var t=this.parent();return e.node.parentNode.insertBefore(this.node,e.node),this.paper=e.paper,t&&t.add(),e.parent()&&e.parent().add(),this},e.insertAfter=function(e){e=C(e);var t=this.parent();return e.node.parentNode.insertBefore(this.node,e.node.nextSibling),this.paper=e.paper,t&&t.add(),e.parent()&&e.parent().add(),this},e.remove=function(){var e=this.parent();return this.node.parentNode&&this.node.parentNode.removeChild(this.node),delete this.paper,this.removed=!0,e&&e.add(),this},e.select=function(e){return C(this.node.querySelector(e))},e.selectAll=function(e){for(var t=this.node.querySelectorAll(e),r=(n.set||Array)(),o=0;o<t.length;o++)r.push(C(t[o]));return r},e.asPX=function(e,t){return null==t&&(t=this.attr(e)),+y(this,e,t)},e.use=function(){var e,t=this.node.id;return t||(t=this.id,o(this.node,{id:t})),e="linearGradient"==this.type||"radialGradient"==this.type||"pattern"==this.type?S(this.type,this.node.parentNode):S("use",this.node.parentNode),o(e.node,{"xlink:href":"#"+t}),e.original=this,e},e.clone=function(){var e=C(this.node.cloneNode(!0));return o(e.node,"id")&&o(e.node,{id:e.id}),a(e),e.insertAfter(this),e},e.toDefs=function(){var e=v(this);return e.appendChild(this.node),this},e.pattern=function(e,t,r,n){var a=S("pattern",v(this));return null==e&&(e=this.getBBox()),i(e,"object")&&"x"in e&&(t=e.y,r=e.width,n=e.height,e=e.x),o(a.node,{x:e,y:t,width:r,height:n,patternUnits:"userSpaceOnUse",id:a.id,viewBox:[e,t,r,n].join(" ")}),a.node.appendChild(this.node),a},e.marker=function(e,t,r,n,a,s){var l=S("marker",v(this));return null==e&&(e=this.getBBox()),i(e,"object")&&"x"in e&&(t=e.y,r=e.width,n=e.height,a=e.refX||e.cx,s=e.refY||e.cy,e=e.x),o(l.node,{viewBox:[e,t,r,n].join(V),markerWidth:r,markerHeight:n,orient:"auto",refX:a||0,refY:s||0,id:l.id}),l.node.appendChild(this.node),l};var u=function(e,t,n,o){"function"!=typeof n||n.length||(o=n,n=r.linear),this.attr=e,this.dur=t,n&&(this.easing=n),o&&(this.callback=o)};n.animation=function(e,t,r,n){return new u(e,t,r,n)},e.inAnim=function(){var e=this,t=[];for(var r in e.anims)e.anims[N](r)&&!function(e){t.push({anim:new u(e._attrs,e.dur,e.easing,e._callback),curStatus:e.status(),status:function(t){return e.status(t)},stop:function(){e.stop()}})}(e.anims[r]);return t},n.animate=function(e,n,o,i,a,s){"function"!=typeof a||a.length||(s=a,a=r.linear);var l=r.time(),c=r(e,n,l,l+i,r.time,o,a);return s&&t.once("mina.finish."+c.id,s),c},e.stop=function(){for(var e=this.inAnim(),t=0,r=e.length;r>t;t++)e[t].stop();return this},e.animate=function(e,n,o,a){"function"!=typeof o||o.length||(a=o,o=r.linear),e instanceof u&&(a=e.callback,o=e.easing,n=o.dur,e=e.attr);var l,c,h,d,f=[],p=[],g={},m=this;for(var v in e)if(e[N](v)){m.equal?(d=m.equal(v,U(e[v])),l=d.from,c=d.to,h=d.f):(l=+m.attr(v),c=+e[v]);var y=i(l,"array")?l.length:1;g[v]=s(f.length,f.length+y,h),f=f.concat(l),p=p.concat(c)}var _=r.time(),b=r(f,p,_,_+n,r.time,function(e){var t={};for(var r in g)g[N](r)&&(t[r]=g[r](e));m.attr(t)},o);return m.anims[b.id]=b,b._attrs=e,b._callback=a,t.once("mina.finish."+b.id,function(){delete m.anims[b.id],a&&a.call(m)}),t.once("mina.stop."+b.id,function(){delete m.anims[b.id]}),m};var h={};e.data=function(e,r){var o=h[this.id]=h[this.id]||{};if(0==arguments.length)return t("snap.data.get."+this.id,this,o,null),o;if(1==arguments.length){if(n.is(e,"object")){for(var i in e)e[N](i)&&this.data(i,e[i]);return this}return t("snap.data.get."+this.id,this,o[e],e),o[e]}return o[e]=r,t("snap.data.set."+this.id,this,r,e),this},e.removeData=function(e){return null==e?h[this.id]={}:h[this.id]&&delete h[this.id][e],this},e.outerSVG=e.toString=l(1),
e.innerSVG=l()}(b.prototype),n.parse=function(e){var t=j.doc.createDocumentFragment(),r=!0,n=j.doc.createElement("div");if(e=U(e),e.match(/^\s*<\s*svg(?:\s|>)/)||(e="<svg>"+e+"</svg>",r=!1),n.innerHTML=e,e=n.getElementsByTagName("svg")[0])if(r)t=e;else for(;e.firstChild;)t.appendChild(e.firstChild);return n.innerHTML=G,new w(t)},w.prototype.select=b.prototype.select,w.prototype.selectAll=b.prototype.selectAll,n.fragment=function(){for(var e=Array.prototype.slice.call(arguments,0),t=j.doc.createDocumentFragment(),r=0,o=e.length;o>r;r++){var i=e[r];i.node&&i.node.nodeType&&t.appendChild(i.node),i.nodeType&&t.appendChild(i),"string"==typeof i&&t.appendChild(n.parse(i).node)}return new w(t)},function(e){e.el=function(e,t){return S(e,this.node).attr(t)},e.rect=function(e,t,r,n,o,a){var s;return null==a&&(a=o),i(e,"object")&&"x"in e?s=e:null!=e&&(s={x:e,y:t,width:r,height:n},null!=o&&(s.rx=o,s.ry=a)),this.el("rect",s)},e.circle=function(e,t,r){var n;return i(e,"object")&&"cx"in e?n=e:null!=e&&(n={cx:e,cy:t,r:r}),this.el("circle",n)},e.image=function(e,t,r,n,a){var s=S("image",this.node);if(i(e,"object")&&"src"in e)s.attr(e);else if(null!=e){var l={"xlink:href":e,preserveAspectRatio:"none"};null!=t&&null!=r&&(l.x=t,l.y=r),null!=n&&null!=a?(l.width=n,l.height=a):ce(e,function(){o(s.node,{width:this.offsetWidth,height:this.offsetHeight})}),o(s.node,l)}return s},e.ellipse=function(e,t,r,n){var o=S("ellipse",this.node);return i(e,"object")&&"cx"in e?o.attr(e):null!=e&&o.attr({cx:e,cy:t,rx:r,ry:n}),o},e.path=function(e){var t=S("path",this.node);return i(e,"object")&&!i(e,"array")?t.attr(e):e&&t.attr({d:e}),t},e.group=e.g=function(t){var r=S("g",this.node);r.add=_;for(var n in e)e[N](n)&&(r[n]=e[n]);return 1==arguments.length&&t&&!t.type?r.attr(t):arguments.length&&r.add(Array.prototype.slice.call(arguments,0)),r},e.text=function(e,t,r){var n=S("text",this.node);return i(e,"object")?n.attr(e):null!=e&&n.attr({x:e,y:t,text:r||""}),n},e.line=function(e,t,r,n){var o=S("line",this.node);return i(e,"object")?o.attr(e):null!=e&&o.attr({x1:e,x2:r,y1:t,y2:n}),o},e.polyline=function(e){arguments.length>1&&(e=Array.prototype.slice.call(arguments,0));var t=S("polyline",this.node);return i(e,"object")&&!i(e,"array")?t.attr(e):null!=e&&t.attr({points:e}),t},e.polygon=function(e){arguments.length>1&&(e=Array.prototype.slice.call(arguments,0));var t=S("polygon",this.node);return i(e,"object")&&!i(e,"array")?t.attr(e):null!=e&&t.attr({points:e}),t},function(){e.gradient=function(e){return E(this.defs,e)},e.gradientLinear=function(e,t,r,n){return B(this.defs,e,t,r,n)},e.gradientRadial=function(e,t,r,n,o){return F(this.defs,e,t,r,n,o)},e.toString=function(){var e,t=j.doc.createDocumentFragment(),r=j.doc.createElement("div"),n=this.node.cloneNode(!0);return t.appendChild(r),r.appendChild(n),o(n,{xmlns:ae}),e=r.innerHTML,t.removeChild(t.firstChild),e},e.clear=function(){for(var e,t=this.node.firstChild;t;)e=t.nextSibling,"defs"!=t.tagName&&t.parentNode.removeChild(t),t=e}}()}(k.prototype),n.ajax=function(e,r,n,o){var a=new XMLHttpRequest,s=oe();if(a){if(i(r,"function"))o=n,n=r,r=null;else if(i(r,"object")){var l=[];for(var c in r)r.hasOwnProperty(c)&&l.push(encodeURIComponent(c)+"="+encodeURIComponent(r[c]));r=l.join("&")}return a.open(r?"POST":"GET",e,!0),a.setRequestHeader("X-Requested-With","XMLHttpRequest"),r&&a.setRequestHeader("Content-type","application/x-www-form-urlencoded"),n&&(t.once("snap.ajax."+s+".0",n),t.once("snap.ajax."+s+".200",n),t.once("snap.ajax."+s+".304",n)),a.onreadystatechange=function(){4==a.readyState&&t("snap.ajax."+s+"."+a.status,o,a)},4==a.readyState?a:(a.send(r),a)}},n.load=function(e,t,r){n.ajax(e,function(e){var o=n.parse(e.responseText);r?t.call(r,o):t(o)})},t.on("snap.util.attr.mask",function(e){if(e instanceof b||e instanceof w){if(t.stop(),e instanceof w&&1==e.node.childNodes.length&&(e=e.node.firstChild,v(this).appendChild(e),e=C(e)),"mask"==e.type)var r=e;else r=S("mask",v(this)),r.node.appendChild(e.node),!r.node.id&&o(r.node,{id:r.id});o(this.node,{mask:le(r.id)})}}),function(e){t.on("snap.util.attr.clip",e),t.on("snap.util.attr.clip-path",e),t.on("snap.util.attr.clipPath",e)}(function(e){if(e instanceof b||e instanceof w){if(t.stop(),"clipPath"==e.type)var r=e;else r=S("clipPath",v(this)),r.node.appendChild(e.node),!r.node.id&&o(r.node,{id:r.id});o(this.node,{"clip-path":le(r.id)})}}),t.on("snap.util.attr.fill",T("fill")),t.on("snap.util.attr.stroke",T("stroke"));var ye=/^([lr])(?:\(([^)]*)\))?(.*)$/i;t.on("snap.util.grad.parse",function(e){e=U(e);var t=e.match(ye);if(!t)return null;var r=t[1],n=t[2],o=t[3];return n=n.split(/\s*,\s*/).map(function(e){return+e==e?+e:e}),1==n.length&&0==n[0]&&(n=[]),o=o.split("-"),o=o.map(function(e){e=e.split(":");var t={color:e[0]};return e[1]&&(t.offset=e[1]),t}),{type:r,params:n,stops:o}}),t.on("snap.util.attr.d",function(e){t.stop(),i(e,"array")&&i(e[0],"array")&&(e=n.path.toString.call(e)),e=U(e),e.match(/[ruo]/i)&&(e=n.path.toAbsolute(e)),o(this.node,{d:e})})(-1),t.on("snap.util.attr.#text",function(e){t.stop(),e=U(e);for(var r=j.doc.createTextNode(e);this.node.firstChild;)this.node.removeChild(this.node.firstChild);this.node.appendChild(r)})(-1),t.on("snap.util.attr.path",function(e){t.stop(),this.attr({d:e})})(-1),t.on("snap.util.attr.viewBox",function(e){var r;r=i(e,"object")&&"x"in e?[e.x,e.y,e.width,e.height].join(" "):i(e,"array")?e.join(" "):e,o(this.node,{viewBox:r}),t.stop()})(-1),t.on("snap.util.attr.transform",function(e){this.transform(e),t.stop()})(-1),t.on("snap.util.attr.r",function(e){"rect"==this.type&&(t.stop(),o(this.node,{rx:e,ry:e}))})(-1),t.on("snap.util.attr.textpath",function(e){if(t.stop(),"text"==this.type){var r,n,a;if(!e&&this.textPath){for(n=this.textPath;n.node.firstChild;)this.node.appendChild(n.node.firstChild);return n.remove(),void delete this.textPath}if(i(e,"string")){var s=v(this),l=C(s.parentNode).path(e);s.appendChild(l.node),r=l.id,l.attr({id:r})}else e=C(e),e instanceof b&&(r=e.attr("id"),r||(r=e.id,e.attr({id:r})));if(r)if(n=this.textPath,a=this.node,n)n.attr({"xlink:href":"#"+r});else{for(n=o("textPath",{"xlink:href":"#"+r});a.firstChild;)n.appendChild(a.firstChild);a.appendChild(n),this.textPath=C(n)}}})(-1),t.on("snap.util.attr.text",function(e){if("text"==this.type){for(var r=this.node,n=function(e){var t=o("tspan");if(i(e,"array"))for(var r=0;r<e.length;r++)t.appendChild(n(e[r]));else t.appendChild(j.doc.createTextNode(e));return t.normalize&&t.normalize(),t};r.firstChild;)r.removeChild(r.firstChild);for(var a=n(e);a.firstChild;)r.appendChild(a.firstChild)}t.stop()})(-1);var _e={"alignment-baseline":0,"baseline-shift":0,clip:0,"clip-path":0,"clip-rule":0,color:0,"color-interpolation":0,"color-interpolation-filters":0,"color-profile":0,"color-rendering":0,cursor:0,direction:0,display:0,"dominant-baseline":0,"enable-background":0,fill:0,"fill-opacity":0,"fill-rule":0,filter:0,"flood-color":0,"flood-opacity":0,font:0,"font-family":0,"font-size":0,"font-size-adjust":0,"font-stretch":0,"font-style":0,"font-variant":0,"font-weight":0,"glyph-orientation-horizontal":0,"glyph-orientation-vertical":0,"image-rendering":0,kerning:0,"letter-spacing":0,"lighting-color":0,marker:0,"marker-end":0,"marker-mid":0,"marker-start":0,mask:0,opacity:0,overflow:0,"pointer-events":0,"shape-rendering":0,"stop-color":0,"stop-opacity":0,stroke:0,"stroke-dasharray":0,"stroke-dashoffset":0,"stroke-linecap":0,"stroke-linejoin":0,"stroke-miterlimit":0,"stroke-opacity":0,"stroke-width":0,"text-anchor":0,"text-decoration":0,"text-rendering":0,"unicode-bidi":0,visibility:0,"word-spacing":0,"writing-mode":0};t.on("snap.util.attr",function(e){var r=t.nt(),n={};r=r.substring(r.lastIndexOf(".")+1),n[r]=e;var i=r.replace(/-(\w)/gi,function(e,t){return t.toUpperCase()}),a=r.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()});_e[N](a)?this.node.style[i]=null==e?G:e:o(this.node,n)}),t.on("snap.util.getattr.transform",function(){return t.stop(),this.transform()})(-1),t.on("snap.util.getattr.textpath",function(){return t.stop(),this.textPath})(-1),function(){function e(e){return function(){t.stop();var r=j.doc.defaultView.getComputedStyle(this.node,null).getPropertyValue("marker-"+e);return"none"==r?r:n(j.doc.getElementById(r.match($)[1]))}}function r(e){return function(r){t.stop();var n="marker"+e.charAt(0).toUpperCase()+e.substring(1);if(""==r||!r)return void(this.node.style[n]="none");if("marker"==r.type){var i=r.node.id;return i||o(r.node,{id:r.id}),void(this.node.style[n]=le(i))}}}t.on("snap.util.getattr.marker-end",e("end"))(-1),t.on("snap.util.getattr.markerEnd",e("end"))(-1),t.on("snap.util.getattr.marker-start",e("start"))(-1),t.on("snap.util.getattr.markerStart",e("start"))(-1),t.on("snap.util.getattr.marker-mid",e("mid"))(-1),t.on("snap.util.getattr.markerMid",e("mid"))(-1),t.on("snap.util.attr.marker-end",r("end"))(-1),t.on("snap.util.attr.markerEnd",r("end"))(-1),t.on("snap.util.attr.marker-start",r("start"))(-1),t.on("snap.util.attr.markerStart",r("start"))(-1),t.on("snap.util.attr.marker-mid",r("mid"))(-1),t.on("snap.util.attr.markerMid",r("mid"))(-1)}(),t.on("snap.util.getattr.r",function(){return"rect"==this.type&&o(this.node,"rx")==o(this.node,"ry")?(t.stop(),o(this.node,"rx")):void 0})(-1),t.on("snap.util.getattr.text",function(){if("text"==this.type||"tspan"==this.type){t.stop();var e=M(this.node);return 1==e.length?e[0]:e}})(-1),t.on("snap.util.getattr.#text",function(){return this.node.textContent})(-1),t.on("snap.util.getattr.viewBox",function(){t.stop();var e=o(this.node,"viewBox").split(Z);return n._.box(+e[0],+e[1],+e[2],+e[3])})(-1),t.on("snap.util.getattr.points",function(){var e=o(this.node,"points");return t.stop(),e.split(Z)}),t.on("snap.util.getattr.path",function(){var e=o(this.node,"d");return t.stop(),e}),t.on("snap.util.getattr",function(){var e=t.nt();e=e.substring(e.lastIndexOf(".")+1);var r=e.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()});return _e[N](r)?j.doc.defaultView.getComputedStyle(this.node,null).getPropertyValue(r):o(this.node,e)});var be=function(e){var t=e.getBoundingClientRect(),r=e.ownerDocument,n=r.body,o=r.documentElement,i=o.clientTop||n.clientTop||0,a=o.clientLeft||n.clientLeft||0,s=t.top+(g.win.pageYOffset||o.scrollTop||n.scrollTop)-i,l=t.left+(g.win.pageXOffset||o.scrollLeft||n.scrollLeft)-a;return{y:s,x:l}};return n.getElementByPoint=function(e,t){var r=this,n=(r.canvas,j.doc.elementFromPoint(e,t));if(j.win.opera&&"svg"==n.tagName){var o=be(n),i=n.createSVGRect();i.x=e-o.x,i.y=t-o.y,i.width=i.height=1;var a=n.getIntersectionList(i,null);a.length&&(n=a[a.length-1])}return n?C(n):null},n.plugin=function(e){e(n,b,k,j)},j.win.Snap=n,n}();return n.plugin(function(e,t){function r(e){var t=r.ps=r.ps||{};return t[e]?t[e].sleep=100:t[e]={sleep:100},setTimeout(function(){for(var r in t)t[I](r)&&r!=e&&(t[r].sleep--,!t[r].sleep&&delete t[r])}),t[e]}function n(e,t,r,n){return null==e&&(e=t=r=n=0),null==t&&(t=e.y,r=e.width,n=e.height,e=e.x),{x:e,y:t,width:r,w:r,height:n,h:n,x2:e+r,y2:t+n,cx:e+r/2,cy:t+n/2,r1:O.min(r,n)/2,r2:O.max(r,n)/2,r0:O.sqrt(r*r+n*n)/2,path:w(e,t,r,n),vb:[e,t,r,n].join(" ")}}function o(){return this.join(",").replace(P,"$1")}function i(e){var t=U(e);return t.toString=o,t}function a(e,t,r,n,o,i,a,s,c){return null==c?f(e,t,r,n,o,i,a,s):l(e,t,r,n,o,i,a,s,p(e,t,r,n,o,i,a,s,c))}function s(r,n){function o(e){return+(+e).toFixed(3)}return e._.cacher(function(e,i,s){e instanceof t&&(e=e.attr("d")),e=F(e);for(var c,u,h,d,f,p="",g={},m=0,v=0,y=e.length;y>v;v++){if(h=e[v],"M"==h[0])c=+h[1],u=+h[2];else{if(d=a(c,u,h[1],h[2],h[3],h[4],h[5],h[6]),m+d>i){if(n&&!g.start){if(f=a(c,u,h[1],h[2],h[3],h[4],h[5],h[6],i-m),p+=["C"+o(f.start.x),o(f.start.y),o(f.m.x),o(f.m.y),o(f.x),o(f.y)],s)return p;g.start=p,p=["M"+o(f.x),o(f.y)+"C"+o(f.n.x),o(f.n.y),o(f.end.x),o(f.end.y),o(h[5]),o(h[6])].join(),m+=d,c=+h[5],u=+h[6];continue}if(!r&&!n)return f=a(c,u,h[1],h[2],h[3],h[4],h[5],h[6],i-m)}m+=d,c=+h[5],u=+h[6]}p+=h.shift()+h}return g.end=p,f=r?m:n?g:l(c,u,h[0],h[1],h[2],h[3],h[4],h[5],1)},null,e._.clone)}function l(e,t,r,n,o,i,a,s,l){var c=1-l,u=G(c,3),h=G(c,2),d=l*l,f=d*l,p=u*e+3*h*l*r+3*c*l*l*o+f*a,g=u*t+3*h*l*n+3*c*l*l*i+f*s,m=e+2*l*(r-e)+d*(o-2*r+e),v=t+2*l*(n-t)+d*(i-2*n+t),y=r+2*l*(o-r)+d*(a-2*o+r),_=n+2*l*(i-n)+d*(s-2*i+n),b=c*e+l*r,x=c*t+l*n,w=c*o+l*a,S=c*i+l*s,k=90-180*O.atan2(m-y,v-_)/R;return{x:p,y:g,m:{x:m,y:v},n:{x:y,y:_},start:{x:b,y:x},end:{x:w,y:S},alpha:k}}function c(t,r,o,i,a,s,l,c){e.is(t,"array")||(t=[t,r,o,i,a,s,l,c]);var u=B.apply(null,t);return n(u.min.x,u.min.y,u.max.x-u.min.x,u.max.y-u.min.y)}function u(e,t,r){return t>=e.x&&t<=e.x+e.width&&r>=e.y&&r<=e.y+e.height}function h(e,t){return e=n(e),t=n(t),u(t,e.x,e.y)||u(t,e.x2,e.y)||u(t,e.x,e.y2)||u(t,e.x2,e.y2)||u(e,t.x,t.y)||u(e,t.x2,t.y)||u(e,t.x,t.y2)||u(e,t.x2,t.y2)||(e.x<t.x2&&e.x>t.x||t.x<e.x2&&t.x>e.x)&&(e.y<t.y2&&e.y>t.y||t.y<e.y2&&t.y>e.y)}function d(e,t,r,n,o){var i=-3*t+9*r-9*n+3*o,a=e*i+6*t-12*r+6*n;return e*a-3*t+3*r}function f(e,t,r,n,o,i,a,s,l){null==l&&(l=1),l=l>1?1:0>l?0:l;for(var c=l/2,u=12,h=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],f=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],p=0,g=0;u>g;g++){var m=c*h[g]+c,v=d(m,e,r,o,a),y=d(m,t,n,i,s),_=v*v+y*y;p+=f[g]*O.sqrt(_)}return c*p}function p(e,t,r,n,o,i,a,s,l){if(!(0>l||f(e,t,r,n,o,i,a,s)<l)){var c,u=1,h=u/2,d=u-h,p=.01;for(c=f(e,t,r,n,o,i,a,s,d);V(c-l)>p;)h/=2,d+=(l>c?1:-1)*h,c=f(e,t,r,n,o,i,a,s,d);return d}}function g(e,t,r,n,o,i,a,s){if(!(H(e,r)<z(o,a)||z(e,r)>H(o,a)||H(t,n)<z(i,s)||z(t,n)>H(i,s))){var l=(e*n-t*r)*(o-a)-(e-r)*(o*s-i*a),c=(e*n-t*r)*(i-s)-(t-n)*(o*s-i*a),u=(e-r)*(i-s)-(t-n)*(o-a);if(u){var h=l/u,d=c/u,f=+h.toFixed(2),p=+d.toFixed(2);if(!(f<+z(e,r).toFixed(2)||f>+H(e,r).toFixed(2)||f<+z(o,a).toFixed(2)||f>+H(o,a).toFixed(2)||p<+z(t,n).toFixed(2)||p>+H(t,n).toFixed(2)||p<+z(i,s).toFixed(2)||p>+H(i,s).toFixed(2)))return{x:h,y:d}}}}function m(e,t,r){var n=c(e),o=c(t);if(!h(n,o))return r?0:[];for(var i=f.apply(0,e),a=f.apply(0,t),s=~~(i/5),u=~~(a/5),d=[],p=[],m={},v=r?0:[],y=0;s+1>y;y++){var _=l.apply(0,e.concat(y/s));d.push({x:_.x,y:_.y,t:y/s})}for(y=0;u+1>y;y++)_=l.apply(0,t.concat(y/u)),p.push({x:_.x,y:_.y,t:y/u});for(y=0;s>y;y++)for(var b=0;u>b;b++){var x=d[y],w=d[y+1],S=p[b],k=p[b+1],C=V(w.x-x.x)<.001?"y":"x",L=V(k.x-S.x)<.001?"y":"x",A=g(x.x,x.y,w.x,w.y,S.x,S.y,k.x,k.y);if(A){if(m[A.x.toFixed(4)]==A.y.toFixed(4))continue;m[A.x.toFixed(4)]=A.y.toFixed(4);var q=x.t+V((A[C]-x[C])/(w[C]-x[C]))*(w.t-x.t),E=S.t+V((A[L]-S[L])/(k[L]-S[L]))*(k.t-S.t);q>=0&&1>=q&&E>=0&&1>=E&&(r?v++:v.push({x:A.x,y:A.y,t1:q,t2:E}))}}return v}function v(e,t){return _(e,t)}function y(e,t){return _(e,t,1)}function _(e,t,r){e=F(e),t=F(t);for(var n,o,i,a,s,l,c,u,h,d,f=r?0:[],p=0,g=e.length;g>p;p++){var v=e[p];if("M"==v[0])n=s=v[1],o=l=v[2];else{"C"==v[0]?(h=[n,o].concat(v.slice(1)),n=h[6],o=h[7]):(h=[n,o,n,o,s,l,s,l],n=s,o=l);for(var y=0,_=t.length;_>y;y++){var b=t[y];if("M"==b[0])i=c=b[1],a=u=b[2];else{"C"==b[0]?(d=[i,a].concat(b.slice(1)),i=d[6],a=d[7]):(d=[i,a,i,a,c,u,c,u],i=c,a=u);var x=m(h,d,r);if(r)f+=x;else{for(var w=0,S=x.length;S>w;w++)x[w].segment1=p,x[w].segment2=y,x[w].bez1=h,x[w].bez2=d;f=f.concat(x)}}}}}return f}function b(e,t,r){var n=x(e);return u(n,t,r)&&1==_(e,[["M",t,r],["H",n.x2+10]],1)%2}function x(e){var t=r(e);if(t.bbox)return U(t.bbox);if(!e)return n();e=F(e);for(var o,i=0,a=0,s=[],l=[],c=0,u=e.length;u>c;c++)if(o=e[c],"M"==o[0])i=o[1],a=o[2],s.push(i),l.push(a);else{var h=B(i,a,o[1],o[2],o[3],o[4],o[5],o[6]);s=s.concat(h.min.x,h.max.x),l=l.concat(h.min.y,h.max.y),i=o[5],a=o[6]}var d=z.apply(0,s),f=z.apply(0,l),p=H.apply(0,s),g=H.apply(0,l),m=n(d,f,p-d,g-f);return t.bbox=U(m),m}function w(e,t,r,n,i){if(i)return[["M",e+i,t],["l",r-2*i,0],["a",i,i,0,0,1,i,i],["l",0,n-2*i],["a",i,i,0,0,1,-i,i],["l",2*i-r,0],["a",i,i,0,0,1,-i,-i],["l",0,2*i-n],["a",i,i,0,0,1,i,-i],["z"]];var a=[["M",e,t],["l",r,0],["l",0,n],["l",-r,0],["z"]];return a.toString=o,a}function S(e,t,r,n,i){if(null==i&&null==n&&(n=r),null!=i)var a=Math.PI/180,s=e+r*Math.cos(-n*a),l=e+r*Math.cos(-i*a),c=t+r*Math.sin(-n*a),u=t+r*Math.sin(-i*a),h=[["M",s,c],["A",r,r,0,+(i-n>180),0,l,u]];else h=[["M",e,t],["m",0,-n],["a",r,n,0,1,1,0,2*n],["a",r,n,0,1,1,0,-2*n],["z"]];return h.toString=o,h}function k(t){var n=r(t),a=String.prototype.toLowerCase;if(n.rel)return i(n.rel);e.is(t,"array")&&e.is(t&&t[0],"array")||(t=e.parsePathString(t));var s=[],l=0,c=0,u=0,h=0,d=0;"M"==t[0][0]&&(l=t[0][1],c=t[0][2],u=l,h=c,d++,s.push(["M",l,c]));for(var f=d,p=t.length;p>f;f++){var g=s[f]=[],m=t[f];if(m[0]!=a.call(m[0]))switch(g[0]=a.call(m[0]),g[0]){case"a":g[1]=m[1],g[2]=m[2],g[3]=m[3],g[4]=m[4],g[5]=m[5],g[6]=+(m[6]-l).toFixed(3),g[7]=+(m[7]-c).toFixed(3);break;case"v":g[1]=+(m[1]-c).toFixed(3);break;case"m":u=m[1],h=m[2];default:for(var v=1,y=m.length;y>v;v++)g[v]=+(m[v]-(v%2?l:c)).toFixed(3)}else{g=s[f]=[],"m"==m[0]&&(u=m[1]+l,h=m[2]+c);for(var _=0,b=m.length;b>_;_++)s[f][_]=m[_]}var x=s[f].length;switch(s[f][0]){case"z":l=u,c=h;break;case"h":l+=+s[f][x-1];break;case"v":c+=+s[f][x-1];break;default:l+=+s[f][x-2],c+=+s[f][x-1]}}return s.toString=o,n.rel=i(s),s}function C(t){var n=r(t);if(n.abs)return i(n.abs);if(N(t,"array")&&N(t&&t[0],"array")||(t=e.parsePathString(t)),!t||!t.length)return[["M",0,0]];var a,s=[],l=0,c=0,u=0,h=0,d=0;"M"==t[0][0]&&(l=+t[0][1],c=+t[0][2],u=l,h=c,d++,s[0]=["M",l,c]);for(var f,p,g=3==t.length&&"M"==t[0][0]&&"R"==t[1][0].toUpperCase()&&"Z"==t[2][0].toUpperCase(),m=d,v=t.length;v>m;m++){if(s.push(f=[]),p=t[m],a=p[0],a!=a.toUpperCase())switch(f[0]=a.toUpperCase(),f[0]){case"A":f[1]=p[1],f[2]=p[2],f[3]=p[3],f[4]=p[4],f[5]=p[5],f[6]=+(p[6]+l),f[7]=+(p[7]+c);break;case"V":f[1]=+p[1]+c;break;case"H":f[1]=+p[1]+l;break;case"R":for(var y=[l,c].concat(p.slice(1)),_=2,b=y.length;b>_;_++)y[_]=+y[_]+l,y[++_]=+y[_]+c;s.pop(),s=s.concat(M(y,g));break;case"O":s.pop(),y=S(l,c,p[1],p[2]),y.push(y[0]),s=s.concat(y);break;case"U":s.pop(),s=s.concat(S(l,c,p[1],p[2],p[3])),f=["U"].concat(s[s.length-1].slice(-2));break;case"M":u=+p[1]+l,h=+p[2]+c;default:for(_=1,b=p.length;b>_;_++)f[_]=+p[_]+(_%2?l:c)}else if("R"==a)y=[l,c].concat(p.slice(1)),s.pop(),s=s.concat(M(y,g)),f=["R"].concat(p.slice(-2));else if("O"==a)s.pop(),y=S(l,c,p[1],p[2]),y.push(y[0]),s=s.concat(y);else if("U"==a)s.pop(),s=s.concat(S(l,c,p[1],p[2],p[3])),f=["U"].concat(s[s.length-1].slice(-2));else for(var x=0,w=p.length;w>x;x++)f[x]=p[x];if(a=a.toUpperCase(),"O"!=a)switch(f[0]){case"Z":l=u,c=h;break;case"H":l=f[1];break;case"V":c=f[1];break;case"M":u=f[f.length-2],h=f[f.length-1];default:l=f[f.length-2],c=f[f.length-1]}}return s.toString=o,n.abs=i(s),s}function L(e,t,r,n){return[e,t,r,n,r,n]}function A(e,t,r,n,o,i){var a=1/3,s=2/3;return[a*e+s*r,a*t+s*n,a*o+s*r,a*i+s*n,o,i]}function q(t,r,n,o,i,a,s,l,c,u){var h,d=120*R/180,f=R/180*(+i||0),p=[],g=e._.cacher(function(e,t,r){var n=e*O.cos(r)-t*O.sin(r),o=e*O.sin(r)+t*O.cos(r);return{x:n,y:o}});if(u)k=u[0],C=u[1],w=u[2],S=u[3];else{h=g(t,r,-f),t=h.x,r=h.y,h=g(l,c,-f),l=h.x,c=h.y;var m=(O.cos(R/180*i),O.sin(R/180*i),(t-l)/2),v=(r-c)/2,y=m*m/(n*n)+v*v/(o*o);y>1&&(y=O.sqrt(y),n=y*n,o=y*o);var _=n*n,b=o*o,x=(a==s?-1:1)*O.sqrt(V((_*b-_*v*v-b*m*m)/(_*v*v+b*m*m))),w=x*n*v/o+(t+l)/2,S=x*-o*m/n+(r+c)/2,k=O.asin(((r-S)/o).toFixed(9)),C=O.asin(((c-S)/o).toFixed(9));k=w>t?R-k:k,C=w>l?R-C:C,0>k&&(k=2*R+k),0>C&&(C=2*R+C),s&&k>C&&(k-=2*R),!s&&C>k&&(C-=2*R)}var L=C-k;if(V(L)>d){var A=C,E=l,B=c;C=k+d*(s&&C>k?1:-1),l=w+n*O.cos(C),c=S+o*O.sin(C),p=q(l,c,n,o,i,0,s,E,B,[C,A,w,S])}L=C-k;var F=O.cos(k),T=O.sin(k),M=O.cos(C),j=O.sin(C),N=O.tan(L/4),U=4/3*n*N,I=4/3*o*N,P=[t,r],D=[t+U*T,r-I*F],z=[l+U*j,c-I*M],H=[l,c];if(D[0]=2*P[0]-D[0],D[1]=2*P[1]-D[1],u)return[D,z,H].concat(p);p=[D,z,H].concat(p).join().split(",");for(var G=[],X=0,Y=p.length;Y>X;X++)G[X]=X%2?g(p[X-1],p[X],f).y:g(p[X],p[X+1],f).x;return G}function E(e,t,r,n,o,i,a,s,l){var c=1-l;return{x:G(c,3)*e+3*G(c,2)*l*r+3*c*l*l*o+G(l,3)*a,y:G(c,3)*t+3*G(c,2)*l*n+3*c*l*l*i+G(l,3)*s}}function B(e,t,r,n,o,i,a,s){var l,c=o-2*r+e-(a-2*o+r),u=2*(r-e)-2*(o-r),h=e-r,d=(-u+O.sqrt(u*u-4*c*h))/2/c,f=(-u-O.sqrt(u*u-4*c*h))/2/c,p=[t,s],g=[e,a];return V(d)>"1e12"&&(d=.5),V(f)>"1e12"&&(f=.5),d>0&&1>d&&(l=E(e,t,r,n,o,i,a,s,d),g.push(l.x),p.push(l.y)),f>0&&1>f&&(l=E(e,t,r,n,o,i,a,s,f),g.push(l.x),p.push(l.y)),c=i-2*n+t-(s-2*i+n),u=2*(n-t)-2*(i-n),h=t-n,d=(-u+O.sqrt(u*u-4*c*h))/2/c,f=(-u-O.sqrt(u*u-4*c*h))/2/c,V(d)>"1e12"&&(d=.5),V(f)>"1e12"&&(f=.5),d>0&&1>d&&(l=E(e,t,r,n,o,i,a,s,d),g.push(l.x),p.push(l.y)),f>0&&1>f&&(l=E(e,t,r,n,o,i,a,s,f),g.push(l.x),p.push(l.y)),{min:{x:z.apply(0,g),y:z.apply(0,p)},max:{x:H.apply(0,g),y:H.apply(0,p)}}}function F(e,t){var n=!t&&r(e);if(!t&&n.curve)return i(n.curve);for(var o=C(e),a=t&&C(t),s={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},l={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},c=(function(e,t){var r,n;if(!e)return["C",t.x,t.y,t.x,t.y,t.x,t.y];switch(!(e[0]in{T:1,Q:1})&&(t.qx=t.qy=null),e[0]){case"M":t.X=e[1],t.Y=e[2];break;case"A":e=["C"].concat(q.apply(0,[t.x,t.y].concat(e.slice(1))));break;case"S":r=t.x+(t.x-(t.bx||t.x)),n=t.y+(t.y-(t.by||t.y)),e=["C",r,n].concat(e.slice(1));break;case"T":t.qx=t.x+(t.x-(t.qx||t.x)),t.qy=t.y+(t.y-(t.qy||t.y)),e=["C"].concat(A(t.x,t.y,t.qx,t.qy,e[1],e[2]));break;case"Q":t.qx=e[1],t.qy=e[2],e=["C"].concat(A(t.x,t.y,e[1],e[2],e[3],e[4]));break;case"L":e=["C"].concat(L(t.x,t.y,e[1],e[2]));break;case"H":e=["C"].concat(L(t.x,t.y,e[1],t.y));break;case"V":e=["C"].concat(L(t.x,t.y,t.x,e[1]));break;case"Z":e=["C"].concat(L(t.x,t.y,t.X,t.Y))}return e}),u=function(e,t){if(e[t].length>7){e[t].shift();for(var r=e[t];r.length;)e.splice(t++,0,["C"].concat(r.splice(0,6)));e.splice(t,1),f=H(o.length,a&&a.length||0)}},h=function(e,t,r,n,i){e&&t&&"M"==e[i][0]&&"M"!=t[i][0]&&(t.splice(i,0,["M",n.x,n.y]),r.bx=0,r.by=0,r.x=e[i][1],r.y=e[i][2],f=H(o.length,a&&a.length||0))},d=0,f=H(o.length,a&&a.length||0);f>d;d++){o[d]=c(o[d],s),u(o,d),a&&(a[d]=c(a[d],l)),a&&u(a,d),h(o,a,s,l,d),h(a,o,l,s,d);var p=o[d],g=a&&a[d],m=p.length,v=a&&g.length;s.x=p[m-2],s.y=p[m-1],s.bx=D(p[m-4])||s.x,s.by=D(p[m-3])||s.y,l.bx=a&&(D(g[v-4])||l.x),l.by=a&&(D(g[v-3])||l.y),l.x=a&&g[v-2],l.y=a&&g[v-1]}return a||(n.curve=i(o)),a?[o,a]:o}function T(e,t){if(!t)return e;var r,n,o,i,a,s,l;for(e=F(e),o=0,a=e.length;a>o;o++)for(l=e[o],i=1,s=l.length;s>i;i+=2)r=t.x(l[i],l[i+1]),n=t.y(l[i],l[i+1]),l[i]=r,l[i+1]=n;return e}function M(e,t){for(var r=[],n=0,o=e.length;o-2*!t>n;n+=2){var i=[{x:+e[n-2],y:+e[n-1]},{x:+e[n],y:+e[n+1]},{x:+e[n+2],y:+e[n+3]},{x:+e[n+4],y:+e[n+5]}];t?n?o-4==n?i[3]={x:+e[0],y:+e[1]}:o-2==n&&(i[2]={x:+e[0],y:+e[1]},i[3]={x:+e[2],y:+e[3]}):i[0]={x:+e[o-2],y:+e[o-1]}:o-4==n?i[3]=i[2]:n||(i[0]={x:+e[n],y:+e[n+1]}),r.push(["C",(-i[0].x+6*i[1].x+i[2].x)/6,(-i[0].y+6*i[1].y+i[2].y)/6,(i[1].x+6*i[2].x-i[3].x)/6,(i[1].y+6*i[2].y-i[3].y)/6,i[2].x,i[2].y])}return r}var j=t.prototype,N=e.is,U=e._.clone,I="hasOwnProperty",P=/,?([a-z]),?/gi,D=parseFloat,O=Math,R=O.PI,z=O.min,H=O.max,G=O.pow,V=O.abs,X=s(1),Y=s(),$=s(0,1),W=e._unit2px,Z={path:function(e){return e.attr("path")},circle:function(e){var t=W(e);return S(t.cx,t.cy,t.r)},ellipse:function(e){var t=W(e);return S(t.cx,t.cy,t.rx,t.ry)},rect:function(e){var t=W(e);return w(t.x,t.y,t.width,t.height,t.rx,t.ry)},image:function(e){var t=W(e);return w(t.x,t.y,t.width,t.height)},text:function(e){var t=e.node.getBBox();return w(t.x,t.y,t.width,t.height)},g:function(e){var t=e.node.getBBox();return w(t.x,t.y,t.width,t.height)},symbol:function(e){var t=e.getBBox();return w(t.x,t.y,t.width,t.height)},line:function(e){return"M"+[e.attr("x1"),e.attr("y1"),e.attr("x2"),e.attr("y2")]},polyline:function(e){return"M"+e.attr("points")},polygon:function(e){return"M"+e.attr("points")+"z"},svg:function(e){var t=e.node.getBBox();return w(t.x,t.y,t.width,t.height)},deflt:function(e){var t=e.node.getBBox();return w(t.x,t.y,t.width,t.height)}};e.path=r,e.path.getTotalLength=X,e.path.getPointAtLength=Y,e.path.getSubpath=function(e,t,r){if(this.getTotalLength(e)-r<1e-6)return $(e,t).end;var n=$(e,r,1);return t?$(n,t).end:n},j.getTotalLength=function(){return this.node.getTotalLength?this.node.getTotalLength():void 0},j.getPointAtLength=function(e){return Y(this.attr("d"),e)},j.getSubpath=function(t,r){return e.path.getSubpath(this.attr("d"),t,r)},e._.box=n,e.path.findDotsAtSegment=l,e.path.bezierBBox=c,e.path.isPointInsideBBox=u,e.path.isBBoxIntersect=h,e.path.intersection=v,e.path.intersectionNumber=y,e.path.isPointInside=b,e.path.getBBox=x,e.path.get=Z,e.path.toRelative=k,e.path.toAbsolute=C,e.path.toCubic=F,e.path.map=T,e.path.toString=o,e.path.clone=i}),n.plugin(function(e){var t=Math.max,r=Math.min,n=function(e){if(this.items=[],this.length=0,this.type="set",e)for(var t=0,r=e.length;r>t;t++)e[t]&&(this[this.items.length]=this.items[this.items.length]=e[t],this.length++)},o=n.prototype;o.push=function(){for(var e,t,r=0,n=arguments.length;n>r;r++)e=arguments[r],e&&(t=this.items.length,this[t]=this.items[t]=e,this.length++);return this},o.pop=function(){return this.length&&delete this[this.length--],this.items.pop()},o.forEach=function(e,t){for(var r=0,n=this.items.length;n>r;r++)if(e.call(t,this.items[r],r)===!1)return this;return this},o.remove=function(){for(;this.length;)this.pop().remove();return this},o.attr=function(e){for(var t=0,r=this.items.length;r>t;t++)this.items[t].attr(e);return this},o.clear=function(){for(;this.length;)this.pop()},o.splice=function(e,o){e=0>e?t(this.length+e,0):e,o=t(0,r(this.length-e,o));var i,a=[],s=[],l=[];for(i=2;i<arguments.length;i++)l.push(arguments[i]);for(i=0;o>i;i++)s.push(this[e+i]);for(;i<this.length-e;i++)a.push(this[e+i]);var c=l.length;for(i=0;i<c+a.length;i++)this.items[e+i]=this[e+i]=c>i?l[i]:a[i-c];for(i=this.items.length=this.length-=o-c;this[i];)delete this[i++];return new n(s)},o.exclude=function(e){for(var t=0,r=this.length;r>t;t++)if(this[t]==e)return this.splice(t,1),!0;return!1},o.insertAfter=function(e){for(var t=this.items.length;t--;)this.items[t].insertAfter(e);return this},o.getBBox=function(){for(var e=[],n=[],o=[],i=[],a=this.items.length;a--;)if(!this.items[a].removed){var s=this.items[a].getBBox();e.push(s.x),n.push(s.y),o.push(s.x+s.width),i.push(s.y+s.height)}return e=r.apply(0,e),n=r.apply(0,n),o=t.apply(0,o),i=t.apply(0,i),{x:e,y:n,x2:o,y2:i,width:o-e,height:i-n,cx:e+(o-e)/2,cy:n+(i-n)/2}},o.clone=function(e){e=new n;for(var t=0,r=this.items.length;r>t;t++)e.push(this.items[t].clone());return e},o.toString=function(){return"Snap‘s set"},o.type="set",e.set=function(){var e=new n;return arguments.length&&e.push.apply(e,Array.prototype.slice.call(arguments,0)),e}}),n.plugin(function(e,t){function r(e){var t=e[0];switch(t.toLowerCase()){case"t":return[t,0,0];case"m":return[t,1,0,0,1,0,0];case"r":return 4==e.length?[t,0,e[2],e[3]]:[t,0];case"s":return 5==e.length?[t,1,1,e[3],e[4]]:3==e.length?[t,1,1]:[t,1]}}function n(t,n,o){n=h(n).replace(/\.{3}|\u2026/g,t),t=e.parseTransformString(t)||[],n=e.parseTransformString(n)||[];for(var i,a,c,u,d=Math.max(t.length,n.length),f=[],p=[],g=0;d>g;g++){if(c=t[g]||r(n[g]),u=n[g]||r(c),c[0]!=u[0]||"r"==c[0].toLowerCase()&&(c[2]!=u[2]||c[3]!=u[3])||"s"==c[0].toLowerCase()&&(c[3]!=u[3]||c[4]!=u[4])){t=e._.transform2matrix(t,o()),n=e._.transform2matrix(n,o()),f=[["m",t.a,t.b,t.c,t.d,t.e,t.f]],p=[["m",n.a,n.b,n.c,n.d,n.e,n.f]];break}for(f[g]=[],p[g]=[],i=0,a=Math.max(c.length,u.length);a>i;i++)i in c&&(f[g][i]=c[i]),i in u&&(p[g][i]=u[i])}return{from:l(f),to:l(p),f:s(f)}}function o(e){return e}function i(e){return function(t){return+t.toFixed(3)+e}}function a(t){return e.rgb(t[0],t[1],t[2])}function s(e){var t,r,n,o,i,a,s=0,l=[];for(t=0,r=e.length;r>t;t++){for(i="[",a=['"'+e[t][0]+'"'],n=1,o=e[t].length;o>n;n++)a[n]="val["+s++ +"]";i+=a+"]",l[t]=i}return Function("val","return Snap.path.toString.call(["+l+"])")}function l(e){for(var t=[],r=0,n=e.length;n>r;r++)for(var o=1,i=e[r].length;i>o;o++)t.push(e[r][o]);return t}var c={},u=/[a-z]+$/i,h=String;c.stroke=c.fill="colour",t.prototype.equal=function(t,r){var d,f,p=h(this.attr(t)||""),g=this;if(p==+p&&r==+r)return{from:+p,to:+r,f:o};if("colour"==c[t])return d=e.color(p),f=e.color(r),{from:[d.r,d.g,d.b,d.opacity],to:[f.r,f.g,f.b,f.opacity],f:a};if("transform"==t||"gradientTransform"==t||"patternTransform"==t)return r instanceof e.Matrix&&(r=r.toTransformString()),e._.rgTransform.test(r)||(r=e._.svgTransform2string(r)),n(p,r,function(){return g.getBBox(1)});if("d"==t||"path"==t)return d=e.path.toCubic(p,r),{from:l(d[0]),to:l(d[1]),f:s(d[0])};if("points"==t)return d=h(p).split(","),f=h(r).split(","),{from:d,to:f,f:function(e){return e}};var m=p.match(u),v=h(r).match(u);return m&&m==v?{from:parseFloat(p),to:parseFloat(r),f:i(m)}:{from:this.asPX(t),to:this.asPX(t,r),f:o}}}),n.plugin(function(e,r,n,o){for(var i=r.prototype,a="hasOwnProperty",s=("createTouch"in o.doc),l=["click","dblclick","mousedown","mousemove","mouseout","mouseover","mouseup","touchstart","touchmove","touchend","touchcancel"],c={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},u=function(e){var t="y"==e?"scrollTop":"scrollLeft";return o.doc.documentElement[t]||o.doc.body[t]},h=function(){this.returnValue=!1},d=function(){return this.originalEvent.preventDefault()},f=function(){this.cancelBubble=!0},p=function(){return this.originalEvent.stopPropagation()},g=function(){return o.doc.addEventListener?function(e,t,r,n){var o=s&&c[t]?c[t]:t,i=function(o){var i=u("y"),l=u("x");if(s&&c[a](t))for(var h=0,f=o.targetTouches&&o.targetTouches.length;f>h;h++)if(o.targetTouches[h].target==e||e.contains(o.targetTouches[h].target)){var g=o;o=o.targetTouches[h],o.originalEvent=g,o.preventDefault=d,o.stopPropagation=p;break}var m=o.clientX+l,v=o.clientY+i;return r.call(n,o,m,v)};return t!==o&&e.addEventListener(t,i,!1),e.addEventListener(o,i,!1),function(){return t!==o&&e.removeEventListener(t,i,!1),e.removeEventListener(o,i,!1),!0}}:o.doc.attachEvent?function(e,t,r,n){var i=function(e){e=e||o.win.event;var t=u("y"),i=u("x"),a=e.clientX+i,s=e.clientY+t;return e.preventDefault=e.preventDefault||h,e.stopPropagation=e.stopPropagation||f,r.call(n,e,a,s)};e.attachEvent("on"+t,i);var a=function(){return e.detachEvent("on"+t,i),!0};return a}:void 0}(),m=[],v=function(r){for(var n,o=r.clientX,i=r.clientY,a=u("y"),l=u("x"),c=m.length;c--;){if(n=m[c],s){for(var h,d=r.touches&&r.touches.length;d--;)if(h=r.touches[d],h.identifier==n.el._drag.id||n.el.node.contains(h.target)){o=h.clientX,i=h.clientY,(r.originalEvent?r.originalEvent:r).preventDefault();break}}else r.preventDefault();var f=n.el.node;e._.glob,f.nextSibling,f.parentNode,f.style.display,o+=l,i+=a,t("snap.drag.move."+n.el.id,n.move_scope||n.el,o-n.el._drag.x,i-n.el._drag.y,o,i,r)}},y=function(r){e.unmousemove(v).unmouseup(y);for(var n,o=m.length;o--;)n=m[o],n.el._drag={},t("snap.drag.end."+n.el.id,n.end_scope||n.start_scope||n.move_scope||n.el,r);m=[]},_=l.length;_--;)!function(t){e[t]=i[t]=function(r,n){return e.is(r,"function")&&(this.events=this.events||[],this.events.push({name:t,f:r,unbind:g(this.shape||this.node||o.doc,t,r,n||this)})),this},e["un"+t]=i["un"+t]=function(e){for(var r=this.events||[],n=r.length;n--;)if(r[n].name==t&&(r[n].f==e||!e))return r[n].unbind(),r.splice(n,1),!r.length&&delete this.events,this;return this}}(l[_]);i.hover=function(e,t,r,n){return this.mouseover(e,r).mouseout(t,n||r)},i.unhover=function(e,t){return this.unmouseover(e).unmouseout(t)};var b=[];i.drag=function(r,n,o,i,a,s){function l(l,c,u){(l.originalEvent||l).preventDefault(),this._drag.x=c,this._drag.y=u,this._drag.id=l.identifier,!m.length&&e.mousemove(v).mouseup(y),m.push({el:this,move_scope:i,start_scope:a,end_scope:s}),n&&t.on("snap.drag.start."+this.id,n),r&&t.on("snap.drag.move."+this.id,r),o&&t.on("snap.drag.end."+this.id,o),t("snap.drag.start."+this.id,a||i||this,c,u,l)}if(!arguments.length){var c;return this.drag(function(e,t){this.attr({transform:c+(c?"T":"t")+[e,t]})},function(){c=this.transform().local})}return this._drag={},b.push({el:this,start:l}),this.mousedown(l),this},i.undrag=function(){
for(var r=b.length;r--;)b[r].el==this&&(this.unmousedown(b[r].start),b.splice(r,1),t.unbind("snap.drag.*."+this.id));return!b.length&&e.unmousemove(v).unmouseup(y),this}}),n.plugin(function(e,r,n){var o=(r.prototype,n.prototype),i=/^\s*url\((.+)\)/,a=String,s=e._.$;e.filter={},o.filter=function(t){var n=this;"svg"!=n.type&&(n=n.paper);var o=e.parse(a(t)),i=e._.id(),l=(n.node.offsetWidth,n.node.offsetHeight,s("filter"));return s(l,{id:i,filterUnits:"userSpaceOnUse"}),l.appendChild(o.node),n.defs.appendChild(l),new r(l)},t.on("snap.util.getattr.filter",function(){t.stop();var r=s(this.node,"filter");if(r){var n=a(r).match(i);return n&&e.select(n[1])}}),t.on("snap.util.attr.filter",function(n){if(n instanceof r&&"filter"==n.type){t.stop();var o=n.node.id;o||(s(n.node,{id:n.id}),o=n.id),s(this.node,{filter:e.url(o)})}n&&"none"!=n||(t.stop(),this.node.removeAttribute("filter"))}),e.filter.blur=function(t,r){null==t&&(t=2);var n=null==r?t:[t,r];return e.format('<feGaussianBlur stdDeviation="{def}"/>',{def:n})},e.filter.blur.toString=function(){return this()},e.filter.shadow=function(t,r,n,o){return o=o||"#000",null==n&&(n=4),"string"==typeof n&&(o=n,n=4),null==t&&(t=0,r=2),null==r&&(r=t),o=e.color(o),e.format('<feGaussianBlur in="SourceAlpha" stdDeviation="{blur}"/><feOffset dx="{dx}" dy="{dy}" result="offsetblur"/><feFlood flood-color="{color}"/><feComposite in2="offsetblur" operator="in"/><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge>',{color:o,dx:t,dy:r,blur:n})},e.filter.shadow.toString=function(){return this()},e.filter.grayscale=function(t){return null==t&&(t=1),e.format('<feColorMatrix type="matrix" values="{a} {b} {c} 0 0 {d} {e} {f} 0 0 {g} {b} {h} 0 0 0 0 0 1 0"/>',{a:.2126+.7874*(1-t),b:.7152-.7152*(1-t),c:.0722-.0722*(1-t),d:.2126-.2126*(1-t),e:.7152+.2848*(1-t),f:.0722-.0722*(1-t),g:.2126-.2126*(1-t),h:.0722+.9278*(1-t)})},e.filter.grayscale.toString=function(){return this()},e.filter.sepia=function(t){return null==t&&(t=1),e.format('<feColorMatrix type="matrix" values="{a} {b} {c} 0 0 {d} {e} {f} 0 0 {g} {h} {i} 0 0 0 0 0 1 0"/>',{a:.393+.607*(1-t),b:.769-.769*(1-t),c:.189-.189*(1-t),d:.349-.349*(1-t),e:.686+.314*(1-t),f:.168-.168*(1-t),g:.272-.272*(1-t),h:.534-.534*(1-t),i:.131+.869*(1-t)})},e.filter.sepia.toString=function(){return this()},e.filter.saturate=function(t){return null==t&&(t=1),e.format('<feColorMatrix type="saturate" values="{amount}"/>',{amount:1-t})},e.filter.saturate.toString=function(){return this()},e.filter.hueRotate=function(t){return t=t||0,e.format('<feColorMatrix type="hueRotate" values="{angle}"/>',{angle:t})},e.filter.hueRotate.toString=function(){return this()},e.filter.invert=function(t){return null==t&&(t=1),e.format('<feComponentTransfer><feFuncR type="table" tableValues="{amount} {amount2}"/><feFuncG type="table" tableValues="{amount} {amount2}"/><feFuncB type="table" tableValues="{amount} {amount2}"/></feComponentTransfer>',{amount:t,amount2:1-t})},e.filter.invert.toString=function(){return this()},e.filter.brightness=function(t){return null==t&&(t=1),e.format('<feComponentTransfer><feFuncR type="linear" slope="{amount}"/><feFuncG type="linear" slope="{amount}"/><feFuncB type="linear" slope="{amount}"/></feComponentTransfer>',{amount:t})},e.filter.brightness.toString=function(){return this()},e.filter.contrast=function(t){return null==t&&(t=1),e.format('<feComponentTransfer><feFuncR type="linear" slope="{amount}" intercept="{amount2}"/><feFuncG type="linear" slope="{amount}" intercept="{amount2}"/><feFuncB type="linear" slope="{amount}" intercept="{amount2}"/></feComponentTransfer>',{amount:t,amount2:.5-t/2})},e.filter.contrast.toString=function(){return this()}}),n}),!function(e){var t,r,n="0.4.2",o="hasOwnProperty",i=/[\.\/]/,a="*",s=function(){},l=function(e,t){return e-t},c={n:{}},u=function(e,n){e=String(e);var o,i=r,a=Array.prototype.slice.call(arguments,2),s=u.listeners(e),c=0,h=[],d={},f=[],p=t;t=e,r=0;for(var g=0,m=s.length;m>g;g++)"zIndex"in s[g]&&(h.push(s[g].zIndex),s[g].zIndex<0&&(d[s[g].zIndex]=s[g]));for(h.sort(l);h[c]<0;)if(o=d[h[c++]],f.push(o.apply(n,a)),r)return r=i,f;for(g=0;m>g;g++)if(o=s[g],"zIndex"in o)if(o.zIndex==h[c]){if(f.push(o.apply(n,a)),r)break;do if(c++,o=d[h[c]],o&&f.push(o.apply(n,a)),r)break;while(o)}else d[o.zIndex]=o;else if(f.push(o.apply(n,a)),r)break;return r=i,t=p,f.length?f:null};u._events=c,u.listeners=function(e){var t,r,n,o,s,l,u,h,d=e.split(i),f=c,p=[f],g=[];for(o=0,s=d.length;s>o;o++){for(h=[],l=0,u=p.length;u>l;l++)for(f=p[l].n,r=[f[d[o]],f[a]],n=2;n--;)t=r[n],t&&(h.push(t),g=g.concat(t.f||[]));p=h}return g},u.on=function(e,t){if(e=String(e),"function"!=typeof t)return function(){};for(var r=e.split(i),n=c,o=0,a=r.length;a>o;o++)n=n.n,n=n.hasOwnProperty(r[o])&&n[r[o]]||(n[r[o]]={n:{}});for(n.f=n.f||[],o=0,a=n.f.length;a>o;o++)if(n.f[o]==t)return s;return n.f.push(t),function(e){+e==+e&&(t.zIndex=+e)}},u.f=function(e){var t=[].slice.call(arguments,1);return function(){u.apply(null,[e,null].concat(t).concat([].slice.call(arguments,0)))}},u.stop=function(){r=1},u.nt=function(e){return e?new RegExp("(?:\\.|\\/|^)"+e+"(?:\\.|\\/|$)").test(t):t},u.nts=function(){return t.split(i)},u.off=u.unbind=function(e,t){if(!e)return void(u._events=c={n:{}});var r,n,s,l,h,d,f,p=e.split(i),g=[c];for(l=0,h=p.length;h>l;l++)for(d=0;d<g.length;d+=s.length-2){if(s=[d,1],r=g[d].n,p[l]!=a)r[p[l]]&&s.push(r[p[l]]);else for(n in r)r[o](n)&&s.push(r[n]);g.splice.apply(g,s)}for(l=0,h=g.length;h>l;l++)for(r=g[l];r.n;){if(t){if(r.f){for(d=0,f=r.f.length;f>d;d++)if(r.f[d]==t){r.f.splice(d,1);break}!r.f.length&&delete r.f}for(n in r.n)if(r.n[o](n)&&r.n[n].f){var m=r.n[n].f;for(d=0,f=m.length;f>d;d++)if(m[d]==t){m.splice(d,1);break}!m.length&&delete r.n[n].f}}else{delete r.f;for(n in r.n)r.n[o](n)&&r.n[n].f&&delete r.n[n].f}r=r.n}},u.once=function(e,t){var r=function(){return u.unbind(e,r),t.apply(this,arguments)};return u.on(e,r)},u.version=n,u.toString=function(){return"You are running Eve "+n},"undefined"!=typeof module&&module.exports?module.exports=u:"undefined"!=typeof define?define("eve",[],function(){return u}):e.eve=u}(this),function(e,t){"function"==typeof define&&define.amd?define(["eve"],function(r){return t(e,r)}):t(e,e.eve)}(this,function(e,t){var r=function(t){var r={},n=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||function(e){setTimeout(e,16)},o=Array.isArray||function(e){return e instanceof Array||"[object Array]"==Object.prototype.toString.call(e)},i=0,a="M"+(+new Date).toString(36),s=function(){return a+(i++).toString(36)},l=Date.now||function(){return+new Date},c=function(e){var t=this;if(null==e)return t.s;var r=t.s-e;t.b+=t.dur*r,t.B+=t.dur*r,t.s=e},u=function(e){var t=this;return null==e?t.spd:void(t.spd=e)},h=function(e){var t=this;return null==e?t.dur:(t.s=t.s*e/t.dur,void(t.dur=e))},d=function(){var e=this;delete r[e.id],t("mina.stop."+e.id,e)},f=function(){var e=this;e.pdif||(delete r[e.id],e.pdif=e.get()-e.b)},p=function(){var e=this;e.pdif&&(e.b=e.get()-e.pdif,delete e.pdif,r[e.id]=e)},g=function(){var e=0;for(var i in r)if(r.hasOwnProperty(i)){var a,s=r[i],l=s.get();if(e++,s.s=(l-s.b)/(s.dur/s.spd),s.s>=1&&(delete r[i],s.s=1,e--,function(e){setTimeout(function(){t("mina.finish."+e.id,e)})}(s)),o(s.start)){a=[];for(var c=0,u=s.start.length;u>c;c++)a[c]=+s.start[c]+(s.end[c]-s.start[c])*s.easing(s.s)}else a=+s.start+(s.end-s.start)*s.easing(s.s);s.set(a)}e&&n(g)},m=function(e,t,o,i,a,l,v){var y={id:s(),start:e,end:t,b:o,s:0,dur:i-o,spd:1,get:a,set:l,easing:v||m.linear,status:c,speed:u,duration:h,stop:d,pause:f,resume:p};r[y.id]=y;var _,b=0;for(_ in r)if(r.hasOwnProperty(_)&&(b++,2==b))break;return 1==b&&n(g),y};return m.time=l,m.getById=function(e){return r[e]||null},m.linear=function(e){return e},m.easeout=function(e){return Math.pow(e,1.7)},m.easein=function(e){return Math.pow(e,.48)},m.easeinout=function(e){if(1==e)return 1;if(0==e)return 0;var t=.48-e/1.04,r=Math.sqrt(.1734+t*t),n=r-t,o=Math.pow(Math.abs(n),1/3)*(0>n?-1:1),i=-r-t,a=Math.pow(Math.abs(i),1/3)*(0>i?-1:1),s=o+a+.5;return 3*(1-s)*s*s+s*s*s},m.backin=function(e){if(1==e)return 1;var t=1.70158;return e*e*((t+1)*e-t)},m.backout=function(e){if(0==e)return 0;e-=1;var t=1.70158;return e*e*((t+1)*e+t)+1},m.elastic=function(e){return e==!!e?e:Math.pow(2,-10*e)*Math.sin(2*(e-.075)*Math.PI/.3)+1},m.bounce=function(e){var t,r=7.5625,n=2.75;return 1/n>e?t=r*e*e:2/n>e?(e-=1.5/n,t=r*e*e+.75):2.5/n>e?(e-=2.25/n,t=r*e*e+.9375):(e-=2.625/n,t=r*e*e+.984375),t},e.mina=m,m}("undefined"==typeof t?function(){}:t),n=function(){function n(e,t){if(e){if(e.tagName)return C(e);if(e instanceof b)return e;if(null==t)return e=j.doc.querySelector(e),C(e)}return e=null==e?"100%":e,t=null==t?"100%":t,new k(e,t)}function o(e,t){if(t){if("string"==typeof e&&(e=o(e)),"string"==typeof t)return"xlink:"==t.substring(0,6)?e.getAttributeNS(ie,t.substring(6)):"xml:"==t.substring(0,4)?e.getAttributeNS(ae,t.substring(4)):e.getAttribute(t);for(var r in t)if(t[N](r)){var n=U(t[r]);n?"xlink:"==r.substring(0,6)?e.setAttributeNS(ie,r.substring(6),n):"xml:"==r.substring(0,4)?e.setAttributeNS(ae,r.substring(4),n):e.setAttribute(r,n):e.removeAttribute(r)}}else e=j.doc.createElementNS(ae,e);return e}function i(e,t){return t=U.prototype.toLowerCase.call(t),"finite"==t?isFinite(e):"array"==t&&(e instanceof Array||Array.isArray&&Array.isArray(e))?!0:"null"==t&&null===e||t==typeof e&&null!==e||"object"==t&&e===Object(e)||X.call(e).slice(8,-1).toLowerCase()==t}function a(e){if("function"==typeof e||Object(e)!==e)return e;var t=new e.constructor;for(var r in e)e[N](r)&&(t[r]=a(e[r]));return t}function s(e,t){for(var r=0,n=e.length;n>r;r++)if(e[r]===t)return e.push(e.splice(r,1)[0])}function l(e,t,r){function n(){var o=Array.prototype.slice.call(arguments,0),i=o.join("␀"),a=n.cache=n.cache||{},l=n.count=n.count||[];return a[N](i)?(s(l,i),r?r(a[i]):a[i]):(l.length>=1e3&&delete a[l.shift()],l.push(i),a[i]=e.apply(t,o),r?r(a[i]):a[i])}return n}function c(e,t,r,n,o,i){if(null==o){var a=e-r,s=t-n;return a||s?(180+180*D.atan2(-s,-a)/H+360)%360:0}return c(e,t,o,i)-c(r,n,o,i)}function u(e){return e%360*H/180}function h(e){return 180*e/H%360}function d(e,t,r,n,o,i){return null==t&&"[object SVGMatrix]"==X.call(e)?(this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.e=e.e,void(this.f=e.f)):void(null!=e?(this.a=+e,this.b=+t,this.c=+r,this.d=+n,this.e=+o,this.f=+i):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0))}function f(e){var t=[];return e=e.replace(/(?:^|\s)(\w+)\(([^)]+)\)/g,function(e,r,n){return n=n.split(/\s*,\s*|\s+/),"rotate"==r&&1==n.length&&n.push(0,0),"scale"==r&&(2==n.length&&n.push(0,0),1==n.length&&n.push(n[0],0,0)),"skewX"==r?t.push(["m",1,0,D.tan(u(n[0])),1,0,0]):"skewY"==r?t.push(["m",1,D.tan(u(n[0])),0,1,0,0]):t.push([r.charAt(0)].concat(n)),e}),t}function p(e,t){var r=me(e),n=new d;if(r)for(var o=0,i=r.length;i>o;o++){var a,s,l,c,u,h=r[o],f=h.length,p=U(h[0]).toLowerCase(),g=h[0]!=p,m=g?n.invert():0;"t"==p&&2==f?n.translate(h[1],0):"t"==p&&3==f?g?(a=m.x(0,0),s=m.y(0,0),l=m.x(h[1],h[2]),c=m.y(h[1],h[2]),n.translate(l-a,c-s)):n.translate(h[1],h[2]):"r"==p?2==f?(u=u||t,n.rotate(h[1],u.x+u.width/2,u.y+u.height/2)):4==f&&(g?(l=m.x(h[2],h[3]),c=m.y(h[2],h[3]),n.rotate(h[1],l,c)):n.rotate(h[1],h[2],h[3])):"s"==p?2==f||3==f?(u=u||t,n.scale(h[1],h[f-1],u.x+u.width/2,u.y+u.height/2)):4==f?g?(l=m.x(h[2],h[3]),c=m.y(h[2],h[3]),n.scale(h[1],h[1],l,c)):n.scale(h[1],h[1],h[2],h[3]):5==f&&(g?(l=m.x(h[3],h[4]),c=m.y(h[3],h[4]),n.scale(h[1],h[2],l,c)):n.scale(h[1],h[2],h[3],h[4])):"m"==p&&7==f&&n.add(h[1],h[2],h[3],h[4],h[5],h[6])}return n}function m(e,t){if(null==t){var r=!0;if(t="linearGradient"==e.type||"radialGradient"==e.type?e.node.getAttribute("gradientTransform"):"pattern"==e.type?e.node.getAttribute("patternTransform"):e.node.getAttribute("transform"),!t)return new d;t=f(t)}else t=n._.rgTransform.test(t)?U(t).replace(/\.{3}|\u2026/g,e._.transform||G):f(t),i(t,"array")&&(t=n.path?n.path.toString.call(t):U(t)),e._.transform=t;var o=p(t,e.getBBox(1));return r?o:void(e.matrix=o)}function v(e){var t=n._.someDefs;if(t&&ve(t.ownerDocument.documentElement,t))return t;var r=e.node.ownerSVGElement&&C(e.node.ownerSVGElement)||e.node.parentNode&&C(e.node.parentNode)||n.select("svg")||n(0,0),o=r.select("defs"),i=null==o?!1:o.node;return i||(i=S("defs",r.node).node),n._.someDefs=i,i}function y(e,t,r){function n(e){return null==e?G:e==+e?e:(o(c,{width:e}),c.getBBox().width)}function i(e){return null==e?G:e==+e?e:(o(c,{height:e}),c.getBBox().height)}function a(n,o){null==t?l[n]=o(e.attr(n)):n==t&&(l=o(null==r?e.attr(n):r))}var s=v(e),l={},c=s.querySelector(".svg---mgr");switch(c||(c=o("rect"),o(c,{width:10,height:10,"class":"svg---mgr"}),s.appendChild(c)),e.type){case"rect":a("rx",n),a("ry",i);case"image":a("width",n),a("height",i);case"text":a("x",n),a("y",i);break;case"circle":a("cx",n),a("cy",i),a("r",n);break;case"ellipse":a("cx",n),a("cy",i),a("rx",n),a("ry",i);break;case"line":a("x1",n),a("x2",n),a("y1",i),a("y2",i);break;case"marker":a("refX",n),a("markerWidth",n),a("refY",i),a("markerHeight",i);break;case"radialGradient":a("fx",n),a("fy",i);break;case"tspan":a("dx",n),a("dy",i);break;default:a(t,n)}return l}function _(e){i(e,"array")||(e=Array.prototype.slice.call(arguments,0));for(var t=0,r=0,n=this.node;this[t];)delete this[t++];for(t=0;t<e.length;t++)"set"==e[t].type?e[t].forEach(function(e){n.appendChild(e.node)}):n.appendChild(e[t].node);var o=n.childNodes;for(t=0;t<o.length;t++)this[r++]=C(o[t]);return this}function b(e){if(e.snap in se)return se[e.snap];var t,r=this.id=oe();try{t=e.ownerSVGElement}catch(n){}if(this.node=e,t&&(this.paper=new k(t)),this.type=e.tagName,this.anims={},this._={transform:[]},e.snap=r,se[r]=this,"g"==this.type){this.add=_;for(var o in k.prototype)k.prototype[N](o)&&(this[o]=k.prototype[o])}}function x(e){for(var t,r=0,n=e.length;n>r;r++)if(t=t||e[r])return t}function w(e){this.node=e}function S(e,t){var r=o(e);t.appendChild(r);var n=C(r);return n.type=e,n}function k(e,t){var r,n,i,a=k.prototype;if(e&&"svg"==e.tagName){if(e.snap in se)return se[e.snap];r=new b(e),n=e.getElementsByTagName("desc")[0],i=e.getElementsByTagName("defs")[0],n||(n=o("desc"),n.appendChild(j.doc.createTextNode("Created with Snap")),r.node.appendChild(n)),i||(i=o("defs"),r.node.appendChild(i)),r.defs=i;for(var s in a)a[N](s)&&(r[s]=a[s]);r.paper=r.root=r}else r=S("svg",j.doc.body),o(r.node,{height:t,version:1.1,width:e,xmlns:ae});return r}function C(e){return e?e instanceof b||e instanceof w?e:"svg"==e.tagName?new k(e):new b(e):e}function L(){return this.selectAll("stop")}function A(e,t){var r=o("stop"),i={offset:+t+"%"};return e=n.color(e),i["stop-color"]=e.hex,e.opacity<1&&(i["stop-opacity"]=e.opacity),o(r,i),this.node.appendChild(r),this}function q(){if("linearGradient"==this.type){var e=o(this.node,"x1")||0,t=o(this.node,"x2")||1,r=o(this.node,"y1")||0,i=o(this.node,"y2")||0;return n._.box(e,r,D.abs(t-e),D.abs(i-r))}var a=this.node.cx||.5,s=this.node.cy||.5,l=this.node.r||0;return n._.box(a-l,s-l,2*l,2*l)}function E(e,r){function n(e,t){for(var r=(t-c)/(e-u),n=u;e>n;n++)s[n].offset=+(+c+r*(n-u)).toFixed(2);u=e,c=t}var i,a=x(t("snap.util.grad.parse",null,r));if(!a)return null;a.params.unshift(e),i="l"==a.type.toLowerCase()?B.apply(0,a.params):F.apply(0,a.params),a.type!=a.type.toLowerCase()&&o(i.node,{gradientUnits:"userSpaceOnUse"});var s=a.stops,l=s.length,c=0,u=0;l--;for(var h=0;l>h;h++)"offset"in s[h]&&n(h,s[h].offset);for(s[l].offset=s[l].offset||100,n(l,s[l].offset),h=0;l>=h;h++){var d=s[h];i.addStop(d.color,d.offset)}return i}function B(e,t,r,n,i){var a=S("linearGradient",e);return a.stops=L,a.addStop=A,a.getBBox=q,null!=t&&o(a.node,{x1:t,y1:r,x2:n,y2:i}),a}function F(e,t,r,n,i,a){var s=S("radialGradient",e);return s.stops=L,s.addStop=A,s.getBBox=q,null!=t&&o(s.node,{cx:t,cy:r,r:n}),null!=i&&null!=a&&o(s.node,{fx:i,fy:a}),s}function T(e){return function(r){if(t.stop(),r instanceof w&&1==r.node.childNodes.length&&("radialGradient"==r.node.firstChild.tagName||"linearGradient"==r.node.firstChild.tagName||"pattern"==r.node.firstChild.tagName)&&(r=r.node.firstChild,v(this).appendChild(r),r=C(r)),r instanceof b)if("radialGradient"==r.type||"linearGradient"==r.type||"pattern"==r.type){r.node.id||o(r.node,{id:r.id});var i=le(r.node.id)}else i=r.attr(e);else if(i=n.color(r),i.error){var a=E(v(this),r);a?(a.node.id||o(a.node,{id:a.id}),i=le(a.node.id)):i=r}else i=U(i);var s={};s[e]=i,o(this.node,s),this.node.style[e]=G}}function M(e){for(var t=[],r=e.childNodes,n=0,o=r.length;o>n;n++){var i=r[n];3==i.nodeType&&t.push(i.nodeValue),"tspan"==i.tagName&&(1==i.childNodes.length&&3==i.firstChild.nodeType?t.push(i.firstChild.nodeValue):t.push(M(i)))}return t}n.version="0.2.0",n.toString=function(){return"Snap v"+this.version},n._={};var j={win:e,doc:e.document};n._.glob=j;var N="hasOwnProperty",U=String,I=parseFloat,P=parseInt,D=Math,O=D.max,R=D.min,z=D.abs,H=(D.pow,D.PI),G=(D.round,""),V=" ",X=Object.prototype.toString,Y=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?%?)\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?%?)\s*\))\s*$/i,$=/^url\(#?([^)]+)\)$/,W="	\n\f\r   ᠎             　\u2028\u2029",Z=new RegExp("[,"+W+"]+"),Q=(new RegExp("["+W+"]","g"),new RegExp("["+W+"]*,["+W+"]*")),J={hs:1,rg:1},K=new RegExp("([a-z])["+W+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+W+"]*,?["+W+"]*)+)","ig"),ee=new RegExp("([rstm])["+W+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+W+"]*,?["+W+"]*)+)","ig"),te=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+W+"]*,?["+W+"]*","ig"),re=0,ne="S"+(+new Date).toString(36),oe=function(){return ne+(re++).toString(36)},ie="http://www.w3.org/1999/xlink",ae="http://www.w3.org/2000/svg",se={},le=n.url=function(e){return"url('#"+e+"')"};n._.$=o,n._.id=oe,n.format=function(){var e=/\{([^\}]+)\}/g,t=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,r=function(e,r,n){var o=n;return r.replace(t,function(e,t,r,n,i){t=t||n,o&&(t in o&&(o=o[t]),"function"==typeof o&&i&&(o=o()))}),o=(null==o||o==n?e:o)+""};return function(t,n){return U(t).replace(e,function(e,t){return r(e,t,n)})}}();var ce=function(){function e(){this.parentNode.removeChild(this)}return function(t,r){var n=j.doc.createElement("img"),o=j.doc.body;n.style.cssText="position:absolute;left:-9999em;top:-9999em",n.onload=function(){r.call(n),n.onload=n.onerror=null,o.removeChild(n)},n.onerror=e,o.appendChild(n),n.src=t}}();n._.clone=a,n._.cacher=l,n.rad=u,n.deg=h,n.angle=c,n.is=i,n.snapTo=function(e,t,r){if(r=i(r,"finite")?r:10,i(e,"array")){for(var n=e.length;n--;)if(z(e[n]-t)<=r)return e[n]}else{e=+e;var o=t%e;if(r>o)return t-o;if(o>e-r)return t-o+e}return t},function(e){function t(e){return e[0]*e[0]+e[1]*e[1]}function r(e){var r=D.sqrt(t(e));e[0]&&(e[0]/=r),e[1]&&(e[1]/=r)}e.add=function(e,t,r,n,o,i){var a,s,l,c,u=[[],[],[]],h=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1]],f=[[e,r,o],[t,n,i],[0,0,1]];for(e&&e instanceof d&&(f=[[e.a,e.c,e.e],[e.b,e.d,e.f],[0,0,1]]),a=0;3>a;a++)for(s=0;3>s;s++){for(c=0,l=0;3>l;l++)c+=h[a][l]*f[l][s];u[a][s]=c}return this.a=u[0][0],this.b=u[1][0],this.c=u[0][1],this.d=u[1][1],this.e=u[0][2],this.f=u[1][2],this},e.invert=function(){var e=this,t=e.a*e.d-e.b*e.c;return new d(e.d/t,-e.b/t,-e.c/t,e.a/t,(e.c*e.f-e.d*e.e)/t,(e.b*e.e-e.a*e.f)/t)},e.clone=function(){return new d(this.a,this.b,this.c,this.d,this.e,this.f)},e.translate=function(e,t){return this.add(1,0,0,1,e,t)},e.scale=function(e,t,r,n){return null==t&&(t=e),(r||n)&&this.add(1,0,0,1,r,n),this.add(e,0,0,t,0,0),(r||n)&&this.add(1,0,0,1,-r,-n),this},e.rotate=function(e,t,r){e=u(e),t=t||0,r=r||0;var n=+D.cos(e).toFixed(9),o=+D.sin(e).toFixed(9);return this.add(n,o,-o,n,t,r),this.add(1,0,0,1,-t,-r)},e.x=function(e,t){return e*this.a+t*this.c+this.e},e.y=function(e,t){return e*this.b+t*this.d+this.f},e.get=function(e){return+this[U.fromCharCode(97+e)].toFixed(4)},e.toString=function(){return"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")"},e.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]},e.split=function(){var e={};e.dx=this.e,e.dy=this.f;var n=[[this.a,this.c],[this.b,this.d]];e.scalex=D.sqrt(t(n[0])),r(n[0]),e.shear=n[0][0]*n[1][0]+n[0][1]*n[1][1],n[1]=[n[1][0]-n[0][0]*e.shear,n[1][1]-n[0][1]*e.shear],e.scaley=D.sqrt(t(n[1])),r(n[1]),e.shear/=e.scaley;var o=-n[0][1],i=n[1][1];return 0>i?(e.rotate=h(D.acos(i)),0>o&&(e.rotate=360-e.rotate)):e.rotate=h(D.asin(o)),e.isSimple=!(+e.shear.toFixed(9)||e.scalex.toFixed(9)!=e.scaley.toFixed(9)&&e.rotate),e.isSuperSimple=!+e.shear.toFixed(9)&&e.scalex.toFixed(9)==e.scaley.toFixed(9)&&!e.rotate,e.noRotation=!+e.shear.toFixed(9)&&!e.rotate,e},e.toTransformString=function(e){var t=e||this.split();return t.isSimple?(t.scalex=+t.scalex.toFixed(4),t.scaley=+t.scaley.toFixed(4),t.rotate=+t.rotate.toFixed(4),(t.dx||t.dy?"t"+[+t.dx.toFixed(4),+t.dy.toFixed(4)]:G)+(1!=t.scalex||1!=t.scaley?"s"+[t.scalex,t.scaley,0,0]:G)+(t.rotate?"r"+[+t.rotate.toFixed(4),0,0]:G)):"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]}}(d.prototype),n.Matrix=d,n.getRGB=l(function(e){if(!e||(e=U(e)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:fe};if("none"==e)return{r:-1,g:-1,b:-1,hex:"none",toString:fe};if(!(J[N](e.toLowerCase().substring(0,2))||"#"==e.charAt())&&(e=ue(e)),!e)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:fe};var t,r,o,a,s,l,c=e.match(Y);return c?(c[2]&&(o=P(c[2].substring(5),16),r=P(c[2].substring(3,5),16),t=P(c[2].substring(1,3),16)),c[3]&&(o=P((s=c[3].charAt(3))+s,16),r=P((s=c[3].charAt(2))+s,16),t=P((s=c[3].charAt(1))+s,16)),c[4]&&(l=c[4].split(Q),t=I(l[0]),"%"==l[0].slice(-1)&&(t*=2.55),r=I(l[1]),"%"==l[1].slice(-1)&&(r*=2.55),o=I(l[2]),"%"==l[2].slice(-1)&&(o*=2.55),"rgba"==c[1].toLowerCase().slice(0,4)&&(a=I(l[3])),l[3]&&"%"==l[3].slice(-1)&&(a/=100)),c[5]?(l=c[5].split(Q),t=I(l[0]),"%"==l[0].slice(-1)&&(t/=100),r=I(l[1]),"%"==l[1].slice(-1)&&(r/=100),o=I(l[2]),"%"==l[2].slice(-1)&&(o/=100),("deg"==l[0].slice(-3)||"°"==l[0].slice(-1))&&(t/=360),"hsba"==c[1].toLowerCase().slice(0,4)&&(a=I(l[3])),l[3]&&"%"==l[3].slice(-1)&&(a/=100),n.hsb2rgb(t,r,o,a)):c[6]?(l=c[6].split(Q),t=I(l[0]),"%"==l[0].slice(-1)&&(t/=100),r=I(l[1]),"%"==l[1].slice(-1)&&(r/=100),o=I(l[2]),"%"==l[2].slice(-1)&&(o/=100),("deg"==l[0].slice(-3)||"°"==l[0].slice(-1))&&(t/=360),"hsla"==c[1].toLowerCase().slice(0,4)&&(a=I(l[3])),l[3]&&"%"==l[3].slice(-1)&&(a/=100),n.hsl2rgb(t,r,o,a)):(t=R(D.round(t),255),r=R(D.round(r),255),o=R(D.round(o),255),a=R(O(a,0),1),c={r:t,g:r,b:o,toString:fe},c.hex="#"+(16777216|o|r<<8|t<<16).toString(16).slice(1),c.opacity=i(a,"finite")?a:1,c)):{r:-1,g:-1,b:-1,hex:"none",error:1,toString:fe}},n),n.hsb=l(function(e,t,r){return n.hsb2rgb(e,t,r).hex}),n.hsl=l(function(e,t,r){return n.hsl2rgb(e,t,r).hex}),n.rgb=l(function(e,t,r,n){if(i(n,"finite")){var o=D.round;return"rgba("+[o(e),o(t),o(r),+n.toFixed(2)]+")"}return"#"+(16777216|r|t<<8|e<<16).toString(16).slice(1)});var ue=function(e){var t=j.doc.getElementsByTagName("head")[0],r="rgb(255, 0, 0)";return(ue=l(function(e){if("red"==e.toLowerCase())return r;t.style.color=r,t.style.color=e;var n=j.doc.defaultView.getComputedStyle(t,G).getPropertyValue("color");return n==r?null:n}))(e)},he=function(){return"hsb("+[this.h,this.s,this.b]+")"},de=function(){return"hsl("+[this.h,this.s,this.l]+")"},fe=function(){return 1==this.opacity||null==this.opacity?this.hex:"rgba("+[this.r,this.g,this.b,this.opacity]+")"},pe=function(e,t,r){if(null==t&&i(e,"object")&&"r"in e&&"g"in e&&"b"in e&&(r=e.b,t=e.g,e=e.r),null==t&&i(e,string)){var o=n.getRGB(e);e=o.r,t=o.g,r=o.b}return(e>1||t>1||r>1)&&(e/=255,t/=255,r/=255),[e,t,r]},ge=function(e,t,r,o){e=D.round(255*e),t=D.round(255*t),r=D.round(255*r);var a={r:e,g:t,b:r,opacity:i(o,"finite")?o:1,hex:n.rgb(e,t,r),toString:fe};return i(o,"finite")&&(a.opacity=o),a};n.color=function(e){var t;return i(e,"object")&&"h"in e&&"s"in e&&"b"in e?(t=n.hsb2rgb(e),e.r=t.r,e.g=t.g,e.b=t.b,e.opacity=1,e.hex=t.hex):i(e,"object")&&"h"in e&&"s"in e&&"l"in e?(t=n.hsl2rgb(e),e.r=t.r,e.g=t.g,e.b=t.b,e.opacity=1,e.hex=t.hex):(i(e,"string")&&(e=n.getRGB(e)),i(e,"object")&&"r"in e&&"g"in e&&"b"in e&&!("error"in e)?(t=n.rgb2hsl(e),e.h=t.h,e.s=t.s,e.l=t.l,t=n.rgb2hsb(e),e.v=t.b):(e={hex:"none"},e.r=e.g=e.b=e.h=e.s=e.v=e.l=-1,e.error=1)),e.toString=fe,e},n.hsb2rgb=function(e,t,r,n){i(e,"object")&&"h"in e&&"s"in e&&"b"in e&&(r=e.b,t=e.s,e=e.h,n=e.o),e*=360;var o,a,s,l,c;return e=e%360/60,c=r*t,l=c*(1-z(e%2-1)),o=a=s=r-c,e=~~e,o+=[c,l,0,0,l,c][e],a+=[l,c,c,l,0,0][e],s+=[0,0,l,c,c,l][e],ge(o,a,s,n)},n.hsl2rgb=function(e,t,r,n){i(e,"object")&&"h"in e&&"s"in e&&"l"in e&&(r=e.l,t=e.s,e=e.h),(e>1||t>1||r>1)&&(e/=360,t/=100,r/=100),e*=360;var o,a,s,l,c;return e=e%360/60,c=2*t*(.5>r?r:1-r),l=c*(1-z(e%2-1)),o=a=s=r-c/2,e=~~e,o+=[c,l,0,0,l,c][e],a+=[l,c,c,l,0,0][e],s+=[0,0,l,c,c,l][e],ge(o,a,s,n)},n.rgb2hsb=function(e,t,r){r=pe(e,t,r),e=r[0],t=r[1],r=r[2];var n,o,i,a;return i=O(e,t,r),a=i-R(e,t,r),n=0==a?null:i==e?(t-r)/a:i==t?(r-e)/a+2:(e-t)/a+4,n=60*((n+360)%6)/360,o=0==a?0:a/i,{h:n,s:o,b:i,toString:he}},n.rgb2hsl=function(e,t,r){r=pe(e,t,r),e=r[0],t=r[1],r=r[2];var n,o,i,a,s,l;return a=O(e,t,r),s=R(e,t,r),l=a-s,n=0==l?null:a==e?(t-r)/l:a==t?(r-e)/l+2:(e-t)/l+4,n=60*((n+360)%6)/360,i=(a+s)/2,o=0==l?0:.5>i?l/(2*i):l/(2-2*i),{h:n,s:o,l:i,toString:de}},n.parsePathString=function(e){if(!e)return null;var t=n.path(e);if(t.arr)return n.path.clone(t.arr);var r={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},o=[];return i(e,"array")&&i(e[0],"array")&&(o=n.path.clone(e)),o.length||U(e).replace(K,function(e,t,n){var i=[],a=t.toLowerCase();if(n.replace(te,function(e,t){t&&i.push(+t)}),"m"==a&&i.length>2&&(o.push([t].concat(i.splice(0,2))),a="l",t="m"==t?"l":"L"),"o"==a&&1==i.length&&o.push([t,i[0]]),"r"==a)o.push([t].concat(i));else for(;i.length>=r[a]&&(o.push([t].concat(i.splice(0,r[a]))),r[a]););}),o.toString=n.path.toString,t.arr=n.path.clone(o),o};var me=n.parseTransformString=function(e){if(!e)return null;var t=[];return i(e,"array")&&i(e[0],"array")&&(t=n.path.clone(e)),t.length||U(e).replace(ee,function(e,r,n){var o=[];r.toLowerCase(),n.replace(te,function(e,t){t&&o.push(+t)}),t.push([r].concat(o))}),t.toString=n.path.toString,t};n._.svgTransform2string=f,n._.rgTransform=new RegExp("^[a-z]["+W+"]*-?\\.?\\d","i"),n._.transform2matrix=p,n._unit2px=y;var ve=j.doc.contains||j.doc.compareDocumentPosition?function(e,t){var r=9==e.nodeType?e.documentElement:e,n=t&&t.parentNode;return e==n||!(!n||1!=n.nodeType||!(r.contains?r.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))}:function(e,t){if(t)for(;t;)if(t=t.parentNode,t==e)return!0;return!1};n._.getSomeDefs=v,n.select=function(e){return C(j.doc.querySelector(e))},n.selectAll=function(e){for(var t=j.doc.querySelectorAll(e),r=(n.set||Array)(),o=0;o<t.length;o++)r.push(C(t[o]));return r},function(e){function a(e){function t(e,t){var r=o(e.node,t);r=r&&r.match(a),r=r&&r[2],r&&"#"==r.charAt()&&(r=r.substring(1),r&&(l[r]=(l[r]||[]).concat(function(r){var n={};n[t]=le(r),o(e.node,n)})))}function r(e){var t=o(e.node,"xlink:href");t&&"#"==t.charAt()&&(t=t.substring(1),t&&(l[t]=(l[t]||[]).concat(function(t){e.attr("xlink:href","#"+t)})))}for(var n,i=e.selectAll("*"),a=/^\s*url\(("|'|)(.*)\1\)\s*$/,s=[],l={},c=0,u=i.length;u>c;c++){n=i[c],t(n,"fill"),t(n,"stroke"),t(n,"filter"),t(n,"mask"),t(n,"clip-path"),r(n);var h=o(n.node,"id");h&&(o(n.node,{id:n.id}),s.push({old:h,id:n.id}))}for(c=0,u=s.length;u>c;c++){var d=l[s[c].old];if(d)for(var f=0,p=d.length;p>f;f++)d[f](s[c].id)}}function s(e,t,r){return function(n){var o=n.slice(e,t);return 1==o.length&&(o=o[0]),r?r(o):o}}function l(e){return function(){var t=e?"<"+this.type:"",r=this.node.attributes,n=this.node.childNodes;if(e)for(var o=0,i=r.length;i>o;o++)t+=" "+r[o].name+'="'+r[o].value.replace(/"/g,'\\"')+'"';if(n.length){for(e&&(t+=">"),o=0,i=n.length;i>o;o++)3==n[o].nodeType?t+=n[o].nodeValue:1==n[o].nodeType&&(t+=C(n[o]).toString());e&&(t+="</"+this.type+">")}else e&&(t+="/>");return t}}e.attr=function(e,r){var n=this;if(n.node,!e)return n;if(i(e,"string")){if(!(arguments.length>1))return x(t("snap.util.getattr."+e,n));var o={};o[e]=r,e=o}for(var a in e)e[N](a)&&t("snap.util.attr."+a,n,e[a]);return n},e.getBBox=function(e){var t=this;if("use"==t.type&&(t=t.original),t.removed)return{};var r=t._;return e?(r.bboxwt=n.path.get[t.type]?n.path.getBBox(t.realPath=n.path.get[t.type](t)):n._.box(t.node.getBBox()),n._.box(r.bboxwt)):(t.realPath=(n.path.get[t.type]||n.path.get.deflt)(t),r.bbox=n.path.getBBox(n.path.map(t.realPath,t.matrix)),n._.box(r.bbox))};var c=function(){return this.string};e.transform=function(e){var t=this._;if(null==e){var r=new d(this.node.getCTM()),n=m(this),i=n.toTransformString(),a=U(n)==U(this.matrix)?t.transform:i;return{string:a,globalMatrix:r,localMatrix:n,diffMatrix:r.clone().add(n.invert()),global:r.toTransformString(),local:i,toString:c}}return e instanceof d&&(e=e.toTransformString()),m(this,e),this.node&&("linearGradient"==this.type||"radialGradient"==this.type?o(this.node,{gradientTransform:this.matrix}):"pattern"==this.type?o(this.node,{patternTransform:this.matrix}):o(this.node,{transform:this.matrix})),this},e.parent=function(){return C(this.node.parentNode)},e.append=e.add=function(e){if(e){if("set"==e.type){var t=this;return e.forEach(function(e){t.add(e)}),this}e=C(e),this.node.appendChild(e.node),e.paper=this.paper}return this},e.appendTo=function(e){return e&&(e=C(e),e.append(this)),this},e.prepend=function(e){if(e){e=C(e);var t=e.parent();this.node.insertBefore(e.node,this.node.firstChild),this.add&&this.add(),e.paper=this.paper,this.parent()&&this.parent().add(),t&&t.add()}return this},e.prependTo=function(e){return e=C(e),e.prepend(this),this},e.before=function(e){if("set"==e.type){var t=this;return e.forEach(function(e){var r=e.parent();t.node.parentNode.insertBefore(e.node,t.node),r&&r.add()}),this.parent().add(),this}e=C(e);var r=e.parent();return this.node.parentNode.insertBefore(e.node,this.node),this.parent()&&this.parent().add(),r&&r.add(),e.paper=this.paper,this},e.after=function(e){e=C(e);var t=e.parent();return this.node.nextSibling?this.node.parentNode.insertBefore(e.node,this.node.nextSibling):this.node.parentNode.appendChild(e.node),this.parent()&&this.parent().add(),t&&t.add(),e.paper=this.paper,this},e.insertBefore=function(e){e=C(e);var t=this.parent();return e.node.parentNode.insertBefore(this.node,e.node),this.paper=e.paper,t&&t.add(),e.parent()&&e.parent().add(),this},e.insertAfter=function(e){e=C(e);var t=this.parent();return e.node.parentNode.insertBefore(this.node,e.node.nextSibling),this.paper=e.paper,t&&t.add(),e.parent()&&e.parent().add(),this},e.remove=function(){var e=this.parent();return this.node.parentNode&&this.node.parentNode.removeChild(this.node),delete this.paper,this.removed=!0,e&&e.add(),this},e.select=function(e){return C(this.node.querySelector(e))},e.selectAll=function(e){for(var t=this.node.querySelectorAll(e),r=(n.set||Array)(),o=0;o<t.length;o++)r.push(C(t[o]));return r},e.asPX=function(e,t){return null==t&&(t=this.attr(e)),+y(this,e,t)},e.use=function(){var e,t=this.node.id;return t||(t=this.id,o(this.node,{id:t})),e="linearGradient"==this.type||"radialGradient"==this.type||"pattern"==this.type?S(this.type,this.node.parentNode):S("use",this.node.parentNode),o(e.node,{"xlink:href":"#"+t}),e.original=this,e},e.clone=function(){var e=C(this.node.cloneNode(!0));return o(e.node,"id")&&o(e.node,{id:e.id}),a(e),e.insertAfter(this),e},e.toDefs=function(){var e=v(this);return e.appendChild(this.node),this},e.pattern=function(e,t,r,n){var a=S("pattern",v(this));return null==e&&(e=this.getBBox()),i(e,"object")&&"x"in e&&(t=e.y,r=e.width,n=e.height,e=e.x),o(a.node,{x:e,y:t,width:r,
height:n,patternUnits:"userSpaceOnUse",id:a.id,viewBox:[e,t,r,n].join(" ")}),a.node.appendChild(this.node),a},e.marker=function(e,t,r,n,a,s){var l=S("marker",v(this));return null==e&&(e=this.getBBox()),i(e,"object")&&"x"in e&&(t=e.y,r=e.width,n=e.height,a=e.refX||e.cx,s=e.refY||e.cy,e=e.x),o(l.node,{viewBox:[e,t,r,n].join(V),markerWidth:r,markerHeight:n,orient:"auto",refX:a||0,refY:s||0,id:l.id}),l.node.appendChild(this.node),l};var u=function(e,t,n,o){"function"!=typeof n||n.length||(o=n,n=r.linear),this.attr=e,this.dur=t,n&&(this.easing=n),o&&(this.callback=o)};n.animation=function(e,t,r,n){return new u(e,t,r,n)},e.inAnim=function(){var e=this,t=[];for(var r in e.anims)e.anims[N](r)&&!function(e){t.push({anim:new u(e._attrs,e.dur,e.easing,e._callback),curStatus:e.status(),status:function(t){return e.status(t)},stop:function(){e.stop()}})}(e.anims[r]);return t},n.animate=function(e,n,o,i,a,s){"function"!=typeof a||a.length||(s=a,a=r.linear);var l=r.time(),c=r(e,n,l,l+i,r.time,o,a);return s&&t.once("mina.finish."+c.id,s),c},e.stop=function(){for(var e=this.inAnim(),t=0,r=e.length;r>t;t++)e[t].stop();return this},e.animate=function(e,n,o,a){"function"!=typeof o||o.length||(a=o,o=r.linear),e instanceof u&&(a=e.callback,o=e.easing,n=o.dur,e=e.attr);var l,c,h,d,f=[],p=[],g={},m=this;for(var v in e)if(e[N](v)){m.equal?(d=m.equal(v,U(e[v])),l=d.from,c=d.to,h=d.f):(l=+m.attr(v),c=+e[v]);var y=i(l,"array")?l.length:1;g[v]=s(f.length,f.length+y,h),f=f.concat(l),p=p.concat(c)}var _=r.time(),b=r(f,p,_,_+n,r.time,function(e){var t={};for(var r in g)g[N](r)&&(t[r]=g[r](e));m.attr(t)},o);return m.anims[b.id]=b,b._attrs=e,b._callback=a,t.once("mina.finish."+b.id,function(){delete m.anims[b.id],a&&a.call(m)}),t.once("mina.stop."+b.id,function(){delete m.anims[b.id]}),m};var h={};e.data=function(e,r){var o=h[this.id]=h[this.id]||{};if(0==arguments.length)return t("snap.data.get."+this.id,this,o,null),o;if(1==arguments.length){if(n.is(e,"object")){for(var i in e)e[N](i)&&this.data(i,e[i]);return this}return t("snap.data.get."+this.id,this,o[e],e),o[e]}return o[e]=r,t("snap.data.set."+this.id,this,r,e),this},e.removeData=function(e){return null==e?h[this.id]={}:h[this.id]&&delete h[this.id][e],this},e.outerSVG=e.toString=l(1),e.innerSVG=l()}(b.prototype),n.parse=function(e){var t=j.doc.createDocumentFragment(),r=!0,n=j.doc.createElement("div");if(e=U(e),e.match(/^\s*<\s*svg(?:\s|>)/)||(e="<svg>"+e+"</svg>",r=!1),n.innerHTML=e,e=n.getElementsByTagName("svg")[0])if(r)t=e;else for(;e.firstChild;)t.appendChild(e.firstChild);return n.innerHTML=G,new w(t)},w.prototype.select=b.prototype.select,w.prototype.selectAll=b.prototype.selectAll,n.fragment=function(){for(var e=Array.prototype.slice.call(arguments,0),t=j.doc.createDocumentFragment(),r=0,o=e.length;o>r;r++){var i=e[r];i.node&&i.node.nodeType&&t.appendChild(i.node),i.nodeType&&t.appendChild(i),"string"==typeof i&&t.appendChild(n.parse(i).node)}return new w(t)},function(e){e.el=function(e,t){return S(e,this.node).attr(t)},e.rect=function(e,t,r,n,o,a){var s;return null==a&&(a=o),i(e,"object")&&"x"in e?s=e:null!=e&&(s={x:e,y:t,width:r,height:n},null!=o&&(s.rx=o,s.ry=a)),this.el("rect",s)},e.circle=function(e,t,r){var n;return i(e,"object")&&"cx"in e?n=e:null!=e&&(n={cx:e,cy:t,r:r}),this.el("circle",n)},e.image=function(e,t,r,n,a){var s=S("image",this.node);if(i(e,"object")&&"src"in e)s.attr(e);else if(null!=e){var l={"xlink:href":e,preserveAspectRatio:"none"};null!=t&&null!=r&&(l.x=t,l.y=r),null!=n&&null!=a?(l.width=n,l.height=a):ce(e,function(){o(s.node,{width:this.offsetWidth,height:this.offsetHeight})}),o(s.node,l)}return s},e.ellipse=function(e,t,r,n){var o=S("ellipse",this.node);return i(e,"object")&&"cx"in e?o.attr(e):null!=e&&o.attr({cx:e,cy:t,rx:r,ry:n}),o},e.path=function(e){var t=S("path",this.node);return i(e,"object")&&!i(e,"array")?t.attr(e):e&&t.attr({d:e}),t},e.group=e.g=function(t){var r=S("g",this.node);r.add=_;for(var n in e)e[N](n)&&(r[n]=e[n]);return 1==arguments.length&&t&&!t.type?r.attr(t):arguments.length&&r.add(Array.prototype.slice.call(arguments,0)),r},e.text=function(e,t,r){var n=S("text",this.node);return i(e,"object")?n.attr(e):null!=e&&n.attr({x:e,y:t,text:r||""}),n},e.line=function(e,t,r,n){var o=S("line",this.node);return i(e,"object")?o.attr(e):null!=e&&o.attr({x1:e,x2:r,y1:t,y2:n}),o},e.polyline=function(e){arguments.length>1&&(e=Array.prototype.slice.call(arguments,0));var t=S("polyline",this.node);return i(e,"object")&&!i(e,"array")?t.attr(e):null!=e&&t.attr({points:e}),t},e.polygon=function(e){arguments.length>1&&(e=Array.prototype.slice.call(arguments,0));var t=S("polygon",this.node);return i(e,"object")&&!i(e,"array")?t.attr(e):null!=e&&t.attr({points:e}),t},function(){e.gradient=function(e){return E(this.defs,e)},e.gradientLinear=function(e,t,r,n){return B(this.defs,e,t,r,n)},e.gradientRadial=function(e,t,r,n,o){return F(this.defs,e,t,r,n,o)},e.toString=function(){var e,t=j.doc.createDocumentFragment(),r=j.doc.createElement("div"),n=this.node.cloneNode(!0);return t.appendChild(r),r.appendChild(n),o(n,{xmlns:ae}),e=r.innerHTML,t.removeChild(t.firstChild),e},e.clear=function(){for(var e,t=this.node.firstChild;t;)e=t.nextSibling,"defs"!=t.tagName&&t.parentNode.removeChild(t),t=e}}()}(k.prototype),n.ajax=function(e,r,n,o){var a=new XMLHttpRequest,s=oe();if(a){if(i(r,"function"))o=n,n=r,r=null;else if(i(r,"object")){var l=[];for(var c in r)r.hasOwnProperty(c)&&l.push(encodeURIComponent(c)+"="+encodeURIComponent(r[c]));r=l.join("&")}return a.open(r?"POST":"GET",e,!0),a.setRequestHeader("X-Requested-With","XMLHttpRequest"),r&&a.setRequestHeader("Content-type","application/x-www-form-urlencoded"),n&&(t.once("snap.ajax."+s+".0",n),t.once("snap.ajax."+s+".200",n),t.once("snap.ajax."+s+".304",n)),a.onreadystatechange=function(){4==a.readyState&&t("snap.ajax."+s+"."+a.status,o,a)},4==a.readyState?a:(a.send(r),a)}},n.load=function(e,t,r){n.ajax(e,function(e){var o=n.parse(e.responseText);r?t.call(r,o):t(o)})},t.on("snap.util.attr.mask",function(e){if(e instanceof b||e instanceof w){if(t.stop(),e instanceof w&&1==e.node.childNodes.length&&(e=e.node.firstChild,v(this).appendChild(e),e=C(e)),"mask"==e.type)var r=e;else r=S("mask",v(this)),r.node.appendChild(e.node),!r.node.id&&o(r.node,{id:r.id});o(this.node,{mask:le(r.id)})}}),function(e){t.on("snap.util.attr.clip",e),t.on("snap.util.attr.clip-path",e),t.on("snap.util.attr.clipPath",e)}(function(e){if(e instanceof b||e instanceof w){if(t.stop(),"clipPath"==e.type)var r=e;else r=S("clipPath",v(this)),r.node.appendChild(e.node),!r.node.id&&o(r.node,{id:r.id});o(this.node,{"clip-path":le(r.id)})}}),t.on("snap.util.attr.fill",T("fill")),t.on("snap.util.attr.stroke",T("stroke"));var ye=/^([lr])(?:\(([^)]*)\))?(.*)$/i;t.on("snap.util.grad.parse",function(e){e=U(e);var t=e.match(ye);if(!t)return null;var r=t[1],n=t[2],o=t[3];return n=n.split(/\s*,\s*/).map(function(e){return+e==e?+e:e}),1==n.length&&0==n[0]&&(n=[]),o=o.split("-"),o=o.map(function(e){e=e.split(":");var t={color:e[0]};return e[1]&&(t.offset=e[1]),t}),{type:r,params:n,stops:o}}),t.on("snap.util.attr.d",function(e){t.stop(),i(e,"array")&&i(e[0],"array")&&(e=n.path.toString.call(e)),e=U(e),e.match(/[ruo]/i)&&(e=n.path.toAbsolute(e)),o(this.node,{d:e})})(-1),t.on("snap.util.attr.#text",function(e){t.stop(),e=U(e);for(var r=j.doc.createTextNode(e);this.node.firstChild;)this.node.removeChild(this.node.firstChild);this.node.appendChild(r)})(-1),t.on("snap.util.attr.path",function(e){t.stop(),this.attr({d:e})})(-1),t.on("snap.util.attr.viewBox",function(e){var r;r=i(e,"object")&&"x"in e?[e.x,e.y,e.width,e.height].join(" "):i(e,"array")?e.join(" "):e,o(this.node,{viewBox:r}),t.stop()})(-1),t.on("snap.util.attr.transform",function(e){this.transform(e),t.stop()})(-1),t.on("snap.util.attr.r",function(e){"rect"==this.type&&(t.stop(),o(this.node,{rx:e,ry:e}))})(-1),t.on("snap.util.attr.textpath",function(e){if(t.stop(),"text"==this.type){var r,n,a;if(!e&&this.textPath){for(n=this.textPath;n.node.firstChild;)this.node.appendChild(n.node.firstChild);return n.remove(),void delete this.textPath}if(i(e,"string")){var s=v(this),l=C(s.parentNode).path(e);s.appendChild(l.node),r=l.id,l.attr({id:r})}else e=C(e),e instanceof b&&(r=e.attr("id"),r||(r=e.id,e.attr({id:r})));if(r)if(n=this.textPath,a=this.node,n)n.attr({"xlink:href":"#"+r});else{for(n=o("textPath",{"xlink:href":"#"+r});a.firstChild;)n.appendChild(a.firstChild);a.appendChild(n),this.textPath=C(n)}}})(-1),t.on("snap.util.attr.text",function(e){if("text"==this.type){for(var r=this.node,n=function(e){var t=o("tspan");if(i(e,"array"))for(var r=0;r<e.length;r++)t.appendChild(n(e[r]));else t.appendChild(j.doc.createTextNode(e));return t.normalize&&t.normalize(),t};r.firstChild;)r.removeChild(r.firstChild);for(var a=n(e);a.firstChild;)r.appendChild(a.firstChild)}t.stop()})(-1);var _e={"alignment-baseline":0,"baseline-shift":0,clip:0,"clip-path":0,"clip-rule":0,color:0,"color-interpolation":0,"color-interpolation-filters":0,"color-profile":0,"color-rendering":0,cursor:0,direction:0,display:0,"dominant-baseline":0,"enable-background":0,fill:0,"fill-opacity":0,"fill-rule":0,filter:0,"flood-color":0,"flood-opacity":0,font:0,"font-family":0,"font-size":0,"font-size-adjust":0,"font-stretch":0,"font-style":0,"font-variant":0,"font-weight":0,"glyph-orientation-horizontal":0,"glyph-orientation-vertical":0,"image-rendering":0,kerning:0,"letter-spacing":0,"lighting-color":0,marker:0,"marker-end":0,"marker-mid":0,"marker-start":0,mask:0,opacity:0,overflow:0,"pointer-events":0,"shape-rendering":0,"stop-color":0,"stop-opacity":0,stroke:0,"stroke-dasharray":0,"stroke-dashoffset":0,"stroke-linecap":0,"stroke-linejoin":0,"stroke-miterlimit":0,"stroke-opacity":0,"stroke-width":0,"text-anchor":0,"text-decoration":0,"text-rendering":0,"unicode-bidi":0,visibility:0,"word-spacing":0,"writing-mode":0};t.on("snap.util.attr",function(e){var r=t.nt(),n={};r=r.substring(r.lastIndexOf(".")+1),n[r]=e;var i=r.replace(/-(\w)/gi,function(e,t){return t.toUpperCase()}),a=r.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()});_e[N](a)?this.node.style[i]=null==e?G:e:o(this.node,n)}),t.on("snap.util.getattr.transform",function(){return t.stop(),this.transform()})(-1),t.on("snap.util.getattr.textpath",function(){return t.stop(),this.textPath})(-1),function(){function e(e){return function(){t.stop();var r=j.doc.defaultView.getComputedStyle(this.node,null).getPropertyValue("marker-"+e);return"none"==r?r:n(j.doc.getElementById(r.match($)[1]))}}function r(e){return function(r){t.stop();var n="marker"+e.charAt(0).toUpperCase()+e.substring(1);if(""==r||!r)return void(this.node.style[n]="none");if("marker"==r.type){var i=r.node.id;return i||o(r.node,{id:r.id}),void(this.node.style[n]=le(i))}}}t.on("snap.util.getattr.marker-end",e("end"))(-1),t.on("snap.util.getattr.markerEnd",e("end"))(-1),t.on("snap.util.getattr.marker-start",e("start"))(-1),t.on("snap.util.getattr.markerStart",e("start"))(-1),t.on("snap.util.getattr.marker-mid",e("mid"))(-1),t.on("snap.util.getattr.markerMid",e("mid"))(-1),t.on("snap.util.attr.marker-end",r("end"))(-1),t.on("snap.util.attr.markerEnd",r("end"))(-1),t.on("snap.util.attr.marker-start",r("start"))(-1),t.on("snap.util.attr.markerStart",r("start"))(-1),t.on("snap.util.attr.marker-mid",r("mid"))(-1),t.on("snap.util.attr.markerMid",r("mid"))(-1)}(),t.on("snap.util.getattr.r",function(){return"rect"==this.type&&o(this.node,"rx")==o(this.node,"ry")?(t.stop(),o(this.node,"rx")):void 0})(-1),t.on("snap.util.getattr.text",function(){if("text"==this.type||"tspan"==this.type){t.stop();var e=M(this.node);return 1==e.length?e[0]:e}})(-1),t.on("snap.util.getattr.#text",function(){return this.node.textContent})(-1),t.on("snap.util.getattr.viewBox",function(){t.stop();var e=o(this.node,"viewBox").split(Z);return n._.box(+e[0],+e[1],+e[2],+e[3])})(-1),t.on("snap.util.getattr.points",function(){var e=o(this.node,"points");return t.stop(),e.split(Z)}),t.on("snap.util.getattr.path",function(){var e=o(this.node,"d");return t.stop(),e}),t.on("snap.util.getattr",function(){var e=t.nt();e=e.substring(e.lastIndexOf(".")+1);var r=e.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()});return _e[N](r)?j.doc.defaultView.getComputedStyle(this.node,null).getPropertyValue(r):o(this.node,e)});var be=function(e){var t=e.getBoundingClientRect(),r=e.ownerDocument,n=r.body,o=r.documentElement,i=o.clientTop||n.clientTop||0,a=o.clientLeft||n.clientLeft||0,s=t.top+(g.win.pageYOffset||o.scrollTop||n.scrollTop)-i,l=t.left+(g.win.pageXOffset||o.scrollLeft||n.scrollLeft)-a;return{y:s,x:l}};return n.getElementByPoint=function(e,t){var r=this,n=(r.canvas,j.doc.elementFromPoint(e,t));if(j.win.opera&&"svg"==n.tagName){var o=be(n),i=n.createSVGRect();i.x=e-o.x,i.y=t-o.y,i.width=i.height=1;var a=n.getIntersectionList(i,null);a.length&&(n=a[a.length-1])}return n?C(n):null},n.plugin=function(e){e(n,b,k,j)},j.win.Snap=n,n}();return n.plugin(function(e,t){function r(e){var t=r.ps=r.ps||{};return t[e]?t[e].sleep=100:t[e]={sleep:100},setTimeout(function(){for(var r in t)t[I](r)&&r!=e&&(t[r].sleep--,!t[r].sleep&&delete t[r])}),t[e]}function n(e,t,r,n){return null==e&&(e=t=r=n=0),null==t&&(t=e.y,r=e.width,n=e.height,e=e.x),{x:e,y:t,width:r,w:r,height:n,h:n,x2:e+r,y2:t+n,cx:e+r/2,cy:t+n/2,r1:O.min(r,n)/2,r2:O.max(r,n)/2,r0:O.sqrt(r*r+n*n)/2,path:w(e,t,r,n),vb:[e,t,r,n].join(" ")}}function o(){return this.join(",").replace(P,"$1")}function i(e){var t=U(e);return t.toString=o,t}function a(e,t,r,n,o,i,a,s,c){return null==c?f(e,t,r,n,o,i,a,s):l(e,t,r,n,o,i,a,s,p(e,t,r,n,o,i,a,s,c))}function s(r,n){function o(e){return+(+e).toFixed(3)}return e._.cacher(function(e,i,s){e instanceof t&&(e=e.attr("d")),e=F(e);for(var c,u,h,d,f,p="",g={},m=0,v=0,y=e.length;y>v;v++){if(h=e[v],"M"==h[0])c=+h[1],u=+h[2];else{if(d=a(c,u,h[1],h[2],h[3],h[4],h[5],h[6]),m+d>i){if(n&&!g.start){if(f=a(c,u,h[1],h[2],h[3],h[4],h[5],h[6],i-m),p+=["C"+o(f.start.x),o(f.start.y),o(f.m.x),o(f.m.y),o(f.x),o(f.y)],s)return p;g.start=p,p=["M"+o(f.x),o(f.y)+"C"+o(f.n.x),o(f.n.y),o(f.end.x),o(f.end.y),o(h[5]),o(h[6])].join(),m+=d,c=+h[5],u=+h[6];continue}if(!r&&!n)return f=a(c,u,h[1],h[2],h[3],h[4],h[5],h[6],i-m)}m+=d,c=+h[5],u=+h[6]}p+=h.shift()+h}return g.end=p,f=r?m:n?g:l(c,u,h[0],h[1],h[2],h[3],h[4],h[5],1)},null,e._.clone)}function l(e,t,r,n,o,i,a,s,l){var c=1-l,u=G(c,3),h=G(c,2),d=l*l,f=d*l,p=u*e+3*h*l*r+3*c*l*l*o+f*a,g=u*t+3*h*l*n+3*c*l*l*i+f*s,m=e+2*l*(r-e)+d*(o-2*r+e),v=t+2*l*(n-t)+d*(i-2*n+t),y=r+2*l*(o-r)+d*(a-2*o+r),_=n+2*l*(i-n)+d*(s-2*i+n),b=c*e+l*r,x=c*t+l*n,w=c*o+l*a,S=c*i+l*s,k=90-180*O.atan2(m-y,v-_)/R;return{x:p,y:g,m:{x:m,y:v},n:{x:y,y:_},start:{x:b,y:x},end:{x:w,y:S},alpha:k}}function c(t,r,o,i,a,s,l,c){e.is(t,"array")||(t=[t,r,o,i,a,s,l,c]);var u=B.apply(null,t);return n(u.min.x,u.min.y,u.max.x-u.min.x,u.max.y-u.min.y)}function u(e,t,r){return t>=e.x&&t<=e.x+e.width&&r>=e.y&&r<=e.y+e.height}function h(e,t){return e=n(e),t=n(t),u(t,e.x,e.y)||u(t,e.x2,e.y)||u(t,e.x,e.y2)||u(t,e.x2,e.y2)||u(e,t.x,t.y)||u(e,t.x2,t.y)||u(e,t.x,t.y2)||u(e,t.x2,t.y2)||(e.x<t.x2&&e.x>t.x||t.x<e.x2&&t.x>e.x)&&(e.y<t.y2&&e.y>t.y||t.y<e.y2&&t.y>e.y)}function d(e,t,r,n,o){var i=-3*t+9*r-9*n+3*o,a=e*i+6*t-12*r+6*n;return e*a-3*t+3*r}function f(e,t,r,n,o,i,a,s,l){null==l&&(l=1),l=l>1?1:0>l?0:l;for(var c=l/2,u=12,h=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],f=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],p=0,g=0;u>g;g++){var m=c*h[g]+c,v=d(m,e,r,o,a),y=d(m,t,n,i,s),_=v*v+y*y;p+=f[g]*O.sqrt(_)}return c*p}function p(e,t,r,n,o,i,a,s,l){if(!(0>l||f(e,t,r,n,o,i,a,s)<l)){var c,u=1,h=u/2,d=u-h,p=.01;for(c=f(e,t,r,n,o,i,a,s,d);V(c-l)>p;)h/=2,d+=(l>c?1:-1)*h,c=f(e,t,r,n,o,i,a,s,d);return d}}function g(e,t,r,n,o,i,a,s){if(!(H(e,r)<z(o,a)||z(e,r)>H(o,a)||H(t,n)<z(i,s)||z(t,n)>H(i,s))){var l=(e*n-t*r)*(o-a)-(e-r)*(o*s-i*a),c=(e*n-t*r)*(i-s)-(t-n)*(o*s-i*a),u=(e-r)*(i-s)-(t-n)*(o-a);if(u){var h=l/u,d=c/u,f=+h.toFixed(2),p=+d.toFixed(2);if(!(f<+z(e,r).toFixed(2)||f>+H(e,r).toFixed(2)||f<+z(o,a).toFixed(2)||f>+H(o,a).toFixed(2)||p<+z(t,n).toFixed(2)||p>+H(t,n).toFixed(2)||p<+z(i,s).toFixed(2)||p>+H(i,s).toFixed(2)))return{x:h,y:d}}}}function m(e,t,r){var n=c(e),o=c(t);if(!h(n,o))return r?0:[];for(var i=f.apply(0,e),a=f.apply(0,t),s=~~(i/5),u=~~(a/5),d=[],p=[],m={},v=r?0:[],y=0;s+1>y;y++){var _=l.apply(0,e.concat(y/s));d.push({x:_.x,y:_.y,t:y/s})}for(y=0;u+1>y;y++)_=l.apply(0,t.concat(y/u)),p.push({x:_.x,y:_.y,t:y/u});for(y=0;s>y;y++)for(var b=0;u>b;b++){var x=d[y],w=d[y+1],S=p[b],k=p[b+1],C=V(w.x-x.x)<.001?"y":"x",L=V(k.x-S.x)<.001?"y":"x",A=g(x.x,x.y,w.x,w.y,S.x,S.y,k.x,k.y);if(A){if(m[A.x.toFixed(4)]==A.y.toFixed(4))continue;m[A.x.toFixed(4)]=A.y.toFixed(4);var q=x.t+V((A[C]-x[C])/(w[C]-x[C]))*(w.t-x.t),E=S.t+V((A[L]-S[L])/(k[L]-S[L]))*(k.t-S.t);q>=0&&1>=q&&E>=0&&1>=E&&(r?v++:v.push({x:A.x,y:A.y,t1:q,t2:E}))}}return v}function v(e,t){return _(e,t)}function y(e,t){return _(e,t,1)}function _(e,t,r){e=F(e),t=F(t);for(var n,o,i,a,s,l,c,u,h,d,f=r?0:[],p=0,g=e.length;g>p;p++){var v=e[p];if("M"==v[0])n=s=v[1],o=l=v[2];else{"C"==v[0]?(h=[n,o].concat(v.slice(1)),n=h[6],o=h[7]):(h=[n,o,n,o,s,l,s,l],n=s,o=l);for(var y=0,_=t.length;_>y;y++){var b=t[y];if("M"==b[0])i=c=b[1],a=u=b[2];else{"C"==b[0]?(d=[i,a].concat(b.slice(1)),i=d[6],a=d[7]):(d=[i,a,i,a,c,u,c,u],i=c,a=u);var x=m(h,d,r);if(r)f+=x;else{for(var w=0,S=x.length;S>w;w++)x[w].segment1=p,x[w].segment2=y,x[w].bez1=h,x[w].bez2=d;f=f.concat(x)}}}}}return f}function b(e,t,r){var n=x(e);return u(n,t,r)&&1==_(e,[["M",t,r],["H",n.x2+10]],1)%2}function x(e){var t=r(e);if(t.bbox)return U(t.bbox);if(!e)return n();e=F(e);for(var o,i=0,a=0,s=[],l=[],c=0,u=e.length;u>c;c++)if(o=e[c],"M"==o[0])i=o[1],a=o[2],s.push(i),l.push(a);else{var h=B(i,a,o[1],o[2],o[3],o[4],o[5],o[6]);s=s.concat(h.min.x,h.max.x),l=l.concat(h.min.y,h.max.y),i=o[5],a=o[6]}var d=z.apply(0,s),f=z.apply(0,l),p=H.apply(0,s),g=H.apply(0,l),m=n(d,f,p-d,g-f);return t.bbox=U(m),m}function w(e,t,r,n,i){if(i)return[["M",e+i,t],["l",r-2*i,0],["a",i,i,0,0,1,i,i],["l",0,n-2*i],["a",i,i,0,0,1,-i,i],["l",2*i-r,0],["a",i,i,0,0,1,-i,-i],["l",0,2*i-n],["a",i,i,0,0,1,i,-i],["z"]];var a=[["M",e,t],["l",r,0],["l",0,n],["l",-r,0],["z"]];return a.toString=o,a}function S(e,t,r,n,i){if(null==i&&null==n&&(n=r),null!=i)var a=Math.PI/180,s=e+r*Math.cos(-n*a),l=e+r*Math.cos(-i*a),c=t+r*Math.sin(-n*a),u=t+r*Math.sin(-i*a),h=[["M",s,c],["A",r,r,0,+(i-n>180),0,l,u]];else h=[["M",e,t],["m",0,-n],["a",r,n,0,1,1,0,2*n],["a",r,n,0,1,1,0,-2*n],["z"]];return h.toString=o,h}function k(t){var n=r(t),a=String.prototype.toLowerCase;if(n.rel)return i(n.rel);e.is(t,"array")&&e.is(t&&t[0],"array")||(t=e.parsePathString(t));var s=[],l=0,c=0,u=0,h=0,d=0;"M"==t[0][0]&&(l=t[0][1],c=t[0][2],u=l,h=c,d++,s.push(["M",l,c]));for(var f=d,p=t.length;p>f;f++){var g=s[f]=[],m=t[f];if(m[0]!=a.call(m[0]))switch(g[0]=a.call(m[0]),g[0]){case"a":g[1]=m[1],g[2]=m[2],g[3]=m[3],g[4]=m[4],g[5]=m[5],g[6]=+(m[6]-l).toFixed(3),g[7]=+(m[7]-c).toFixed(3);break;case"v":g[1]=+(m[1]-c).toFixed(3);break;case"m":u=m[1],h=m[2];default:for(var v=1,y=m.length;y>v;v++)g[v]=+(m[v]-(v%2?l:c)).toFixed(3)}else{g=s[f]=[],"m"==m[0]&&(u=m[1]+l,h=m[2]+c);for(var _=0,b=m.length;b>_;_++)s[f][_]=m[_]}var x=s[f].length;switch(s[f][0]){case"z":l=u,c=h;break;case"h":l+=+s[f][x-1];break;case"v":c+=+s[f][x-1];break;default:l+=+s[f][x-2],c+=+s[f][x-1]}}return s.toString=o,n.rel=i(s),s}function C(t){var n=r(t);if(n.abs)return i(n.abs);if(N(t,"array")&&N(t&&t[0],"array")||(t=e.parsePathString(t)),!t||!t.length)return[["M",0,0]];var a,s=[],l=0,c=0,u=0,h=0,d=0;"M"==t[0][0]&&(l=+t[0][1],c=+t[0][2],u=l,h=c,d++,s[0]=["M",l,c]);for(var f,p,g=3==t.length&&"M"==t[0][0]&&"R"==t[1][0].toUpperCase()&&"Z"==t[2][0].toUpperCase(),m=d,v=t.length;v>m;m++){if(s.push(f=[]),p=t[m],a=p[0],a!=a.toUpperCase())switch(f[0]=a.toUpperCase(),f[0]){case"A":f[1]=p[1],f[2]=p[2],f[3]=p[3],f[4]=p[4],f[5]=p[5],f[6]=+(p[6]+l),f[7]=+(p[7]+c);break;case"V":f[1]=+p[1]+c;break;case"H":f[1]=+p[1]+l;break;case"R":for(var y=[l,c].concat(p.slice(1)),_=2,b=y.length;b>_;_++)y[_]=+y[_]+l,y[++_]=+y[_]+c;s.pop(),s=s.concat(M(y,g));break;case"O":s.pop(),y=S(l,c,p[1],p[2]),y.push(y[0]),s=s.concat(y);break;case"U":s.pop(),s=s.concat(S(l,c,p[1],p[2],p[3])),f=["U"].concat(s[s.length-1].slice(-2));break;case"M":u=+p[1]+l,h=+p[2]+c;default:for(_=1,b=p.length;b>_;_++)f[_]=+p[_]+(_%2?l:c)}else if("R"==a)y=[l,c].concat(p.slice(1)),s.pop(),s=s.concat(M(y,g)),f=["R"].concat(p.slice(-2));else if("O"==a)s.pop(),y=S(l,c,p[1],p[2]),y.push(y[0]),s=s.concat(y);else if("U"==a)s.pop(),s=s.concat(S(l,c,p[1],p[2],p[3])),f=["U"].concat(s[s.length-1].slice(-2));else for(var x=0,w=p.length;w>x;x++)f[x]=p[x];if(a=a.toUpperCase(),"O"!=a)switch(f[0]){case"Z":l=u,c=h;break;case"H":l=f[1];break;case"V":c=f[1];break;case"M":u=f[f.length-2],h=f[f.length-1];default:l=f[f.length-2],c=f[f.length-1]}}return s.toString=o,n.abs=i(s),s}function L(e,t,r,n){return[e,t,r,n,r,n]}function A(e,t,r,n,o,i){var a=1/3,s=2/3;return[a*e+s*r,a*t+s*n,a*o+s*r,a*i+s*n,o,i]}function q(t,r,n,o,i,a,s,l,c,u){var h,d=120*R/180,f=R/180*(+i||0),p=[],g=e._.cacher(function(e,t,r){var n=e*O.cos(r)-t*O.sin(r),o=e*O.sin(r)+t*O.cos(r);return{x:n,y:o}});if(u)k=u[0],C=u[1],w=u[2],S=u[3];else{h=g(t,r,-f),t=h.x,r=h.y,h=g(l,c,-f),l=h.x,c=h.y;var m=(O.cos(R/180*i),O.sin(R/180*i),(t-l)/2),v=(r-c)/2,y=m*m/(n*n)+v*v/(o*o);y>1&&(y=O.sqrt(y),n=y*n,o=y*o);var _=n*n,b=o*o,x=(a==s?-1:1)*O.sqrt(V((_*b-_*v*v-b*m*m)/(_*v*v+b*m*m))),w=x*n*v/o+(t+l)/2,S=x*-o*m/n+(r+c)/2,k=O.asin(((r-S)/o).toFixed(9)),C=O.asin(((c-S)/o).toFixed(9));k=w>t?R-k:k,C=w>l?R-C:C,0>k&&(k=2*R+k),0>C&&(C=2*R+C),s&&k>C&&(k-=2*R),!s&&C>k&&(C-=2*R)}var L=C-k;if(V(L)>d){var A=C,E=l,B=c;C=k+d*(s&&C>k?1:-1),l=w+n*O.cos(C),c=S+o*O.sin(C),p=q(l,c,n,o,i,0,s,E,B,[C,A,w,S])}L=C-k;var F=O.cos(k),T=O.sin(k),M=O.cos(C),j=O.sin(C),N=O.tan(L/4),U=4/3*n*N,I=4/3*o*N,P=[t,r],D=[t+U*T,r-I*F],z=[l+U*j,c-I*M],H=[l,c];if(D[0]=2*P[0]-D[0],D[1]=2*P[1]-D[1],u)return[D,z,H].concat(p);p=[D,z,H].concat(p).join().split(",");for(var G=[],X=0,Y=p.length;Y>X;X++)G[X]=X%2?g(p[X-1],p[X],f).y:g(p[X],p[X+1],f).x;return G}function E(e,t,r,n,o,i,a,s,l){var c=1-l;return{x:G(c,3)*e+3*G(c,2)*l*r+3*c*l*l*o+G(l,3)*a,y:G(c,3)*t+3*G(c,2)*l*n+3*c*l*l*i+G(l,3)*s}}function B(e,t,r,n,o,i,a,s){var l,c=o-2*r+e-(a-2*o+r),u=2*(r-e)-2*(o-r),h=e-r,d=(-u+O.sqrt(u*u-4*c*h))/2/c,f=(-u-O.sqrt(u*u-4*c*h))/2/c,p=[t,s],g=[e,a];return V(d)>"1e12"&&(d=.5),V(f)>"1e12"&&(f=.5),d>0&&1>d&&(l=E(e,t,r,n,o,i,a,s,d),g.push(l.x),p.push(l.y)),f>0&&1>f&&(l=E(e,t,r,n,o,i,a,s,f),g.push(l.x),p.push(l.y)),c=i-2*n+t-(s-2*i+n),u=2*(n-t)-2*(i-n),h=t-n,d=(-u+O.sqrt(u*u-4*c*h))/2/c,f=(-u-O.sqrt(u*u-4*c*h))/2/c,V(d)>"1e12"&&(d=.5),V(f)>"1e12"&&(f=.5),d>0&&1>d&&(l=E(e,t,r,n,o,i,a,s,d),g.push(l.x),p.push(l.y)),f>0&&1>f&&(l=E(e,t,r,n,o,i,a,s,f),g.push(l.x),p.push(l.y)),{min:{x:z.apply(0,g),y:z.apply(0,p)},max:{x:H.apply(0,g),y:H.apply(0,p)}}}function F(e,t){var n=!t&&r(e);if(!t&&n.curve)return i(n.curve);for(var o=C(e),a=t&&C(t),s={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},l={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},c=(function(e,t){var r,n;if(!e)return["C",t.x,t.y,t.x,t.y,t.x,t.y];switch(!(e[0]in{T:1,Q:1})&&(t.qx=t.qy=null),e[0]){case"M":t.X=e[1],t.Y=e[2];break;case"A":e=["C"].concat(q.apply(0,[t.x,t.y].concat(e.slice(1))));break;case"S":r=t.x+(t.x-(t.bx||t.x)),n=t.y+(t.y-(t.by||t.y)),e=["C",r,n].concat(e.slice(1));break;case"T":t.qx=t.x+(t.x-(t.qx||t.x)),t.qy=t.y+(t.y-(t.qy||t.y)),e=["C"].concat(A(t.x,t.y,t.qx,t.qy,e[1],e[2]));break;case"Q":t.qx=e[1],t.qy=e[2],e=["C"].concat(A(t.x,t.y,e[1],e[2],e[3],e[4]));break;case"L":e=["C"].concat(L(t.x,t.y,e[1],e[2]));break;case"H":e=["C"].concat(L(t.x,t.y,e[1],t.y));break;case"V":e=["C"].concat(L(t.x,t.y,t.x,e[1]));break;case"Z":e=["C"].concat(L(t.x,t.y,t.X,t.Y))}return e}),u=function(e,t){if(e[t].length>7){e[t].shift();for(var r=e[t];r.length;)e.splice(t++,0,["C"].concat(r.splice(0,6)));e.splice(t,1),f=H(o.length,a&&a.length||0)}},h=function(e,t,r,n,i){e&&t&&"M"==e[i][0]&&"M"!=t[i][0]&&(t.splice(i,0,["M",n.x,n.y]),r.bx=0,r.by=0,r.x=e[i][1],r.y=e[i][2],f=H(o.length,a&&a.length||0))},d=0,f=H(o.length,a&&a.length||0);f>d;d++){o[d]=c(o[d],s),u(o,d),a&&(a[d]=c(a[d],l)),a&&u(a,d),h(o,a,s,l,d),h(a,o,l,s,d);var p=o[d],g=a&&a[d],m=p.length,v=a&&g.length;s.x=p[m-2],s.y=p[m-1],s.bx=D(p[m-4])||s.x,s.by=D(p[m-3])||s.y,l.bx=a&&(D(g[v-4])||l.x),l.by=a&&(D(g[v-3])||l.y),l.x=a&&g[v-2],l.y=a&&g[v-1]}return a||(n.curve=i(o)),a?[o,a]:o}function T(e,t){if(!t)return e;var r,n,o,i,a,s,l;for(e=F(e),o=0,a=e.length;a>o;o++)for(l=e[o],i=1,s=l.length;s>i;i+=2)r=t.x(l[i],l[i+1]),n=t.y(l[i],l[i+1]),l[i]=r,l[i+1]=n;return e}function M(e,t){for(var r=[],n=0,o=e.length;o-2*!t>n;n+=2){var i=[{x:+e[n-2],y:+e[n-1]},{x:+e[n],y:+e[n+1]},{x:+e[n+2],y:+e[n+3]},{x:+e[n+4],y:+e[n+5]}];t?n?o-4==n?i[3]={x:+e[0],y:+e[1]}:o-2==n&&(i[2]={x:+e[0],y:+e[1]},i[3]={x:+e[2],y:+e[3]}):i[0]={x:+e[o-2],y:+e[o-1]}:o-4==n?i[3]=i[2]:n||(i[0]={x:+e[n],y:+e[n+1]}),r.push(["C",(-i[0].x+6*i[1].x+i[2].x)/6,(-i[0].y+6*i[1].y+i[2].y)/6,(i[1].x+6*i[2].x-i[3].x)/6,(i[1].y+6*i[2].y-i[3].y)/6,i[2].x,i[2].y])}return r}var j=t.prototype,N=e.is,U=e._.clone,I="hasOwnProperty",P=/,?([a-z]),?/gi,D=parseFloat,O=Math,R=O.PI,z=O.min,H=O.max,G=O.pow,V=O.abs,X=s(1),Y=s(),$=s(0,1),W=e._unit2px,Z={path:function(e){return e.attr("path")},circle:function(e){var t=W(e);return S(t.cx,t.cy,t.r)},ellipse:function(e){var t=W(e);return S(t.cx,t.cy,t.rx,t.ry)},rect:function(e){var t=W(e);return w(t.x,t.y,t.width,t.height,t.rx,t.ry)},image:function(e){var t=W(e);return w(t.x,t.y,t.width,t.height)},text:function(e){var t=e.node.getBBox();return w(t.x,t.y,t.width,t.height)},g:function(e){var t=e.node.getBBox();return w(t.x,t.y,t.width,t.height)},symbol:function(e){var t=e.getBBox();return w(t.x,t.y,t.width,t.height)},line:function(e){return"M"+[e.attr("x1"),e.attr("y1"),e.attr("x2"),e.attr("y2")]},polyline:function(e){return"M"+e.attr("points")},polygon:function(e){return"M"+e.attr("points")+"z"},svg:function(e){var t=e.node.getBBox();return w(t.x,t.y,t.width,t.height)},deflt:function(e){var t=e.node.getBBox();return w(t.x,t.y,t.width,t.height)}};e.path=r,e.path.getTotalLength=X,e.path.getPointAtLength=Y,e.path.getSubpath=function(e,t,r){if(this.getTotalLength(e)-r<1e-6)return $(e,t).end;var n=$(e,r,1);return t?$(n,t).end:n},j.getTotalLength=function(){return this.node.getTotalLength?this.node.getTotalLength():void 0},j.getPointAtLength=function(e){return Y(this.attr("d"),e)},j.getSubpath=function(t,r){return e.path.getSubpath(this.attr("d"),t,r)},e._.box=n,e.path.findDotsAtSegment=l,e.path.bezierBBox=c,e.path.isPointInsideBBox=u,e.path.isBBoxIntersect=h,e.path.intersection=v,e.path.intersectionNumber=y,e.path.isPointInside=b,e.path.getBBox=x,e.path.get=Z,e.path.toRelative=k,e.path.toAbsolute=C,e.path.toCubic=F,e.path.map=T,e.path.toString=o,e.path.clone=i}),n.plugin(function(e){var t=Math.max,r=Math.min,n=function(e){if(this.items=[],this.length=0,this.type="set",e)for(var t=0,r=e.length;r>t;t++)e[t]&&(this[this.items.length]=this.items[this.items.length]=e[t],this.length++)},o=n.prototype;o.push=function(){for(var e,t,r=0,n=arguments.length;n>r;r++)e=arguments[r],e&&(t=this.items.length,this[t]=this.items[t]=e,this.length++);return this},o.pop=function(){return this.length&&delete this[this.length--],this.items.pop()},o.forEach=function(e,t){for(var r=0,n=this.items.length;n>r;r++)if(e.call(t,this.items[r],r)===!1)return this;return this},o.remove=function(){for(;this.length;)this.pop().remove();return this},o.attr=function(e){for(var t=0,r=this.items.length;r>t;t++)this.items[t].attr(e);return this},o.clear=function(){for(;this.length;)this.pop()},o.splice=function(e,o){e=0>e?t(this.length+e,0):e,o=t(0,r(this.length-e,o));var i,a=[],s=[],l=[];for(i=2;i<arguments.length;i++)l.push(arguments[i]);for(i=0;o>i;i++)s.push(this[e+i]);for(;i<this.length-e;i++)a.push(this[e+i]);var c=l.length;for(i=0;i<c+a.length;i++)this.items[e+i]=this[e+i]=c>i?l[i]:a[i-c];for(i=this.items.length=this.length-=o-c;this[i];)delete this[i++];return new n(s)},o.exclude=function(e){for(var t=0,r=this.length;r>t;t++)if(this[t]==e)return this.splice(t,1),!0;return!1},o.insertAfter=function(e){for(var t=this.items.length;t--;)this.items[t].insertAfter(e);return this},o.getBBox=function(){for(var e=[],n=[],o=[],i=[],a=this.items.length;a--;)if(!this.items[a].removed){var s=this.items[a].getBBox();e.push(s.x),n.push(s.y),o.push(s.x+s.width),i.push(s.y+s.height)}return e=r.apply(0,e),n=r.apply(0,n),o=t.apply(0,o),i=t.apply(0,i),{x:e,y:n,x2:o,y2:i,width:o-e,height:i-n,cx:e+(o-e)/2,cy:n+(i-n)/2}},o.clone=function(e){e=new n;for(var t=0,r=this.items.length;r>t;t++)e.push(this.items[t].clone());return e},o.toString=function(){return"Snap‘s set"},o.type="set",e.set=function(){var e=new n;return arguments.length&&e.push.apply(e,Array.prototype.slice.call(arguments,0)),e}}),n.plugin(function(e,t){function r(e){var t=e[0];switch(t.toLowerCase()){case"t":return[t,0,0];case"m":return[t,1,0,0,1,0,0];case"r":return 4==e.length?[t,0,e[2],e[3]]:[t,0];case"s":return 5==e.length?[t,1,1,e[3],e[4]]:3==e.length?[t,1,1]:[t,1]}}function n(t,n,o){n=h(n).replace(/\.{3}|\u2026/g,t),t=e.parseTransformString(t)||[],n=e.parseTransformString(n)||[];for(var i,a,c,u,d=Math.max(t.length,n.length),f=[],p=[],g=0;d>g;g++){if(c=t[g]||r(n[g]),u=n[g]||r(c),c[0]!=u[0]||"r"==c[0].toLowerCase()&&(c[2]!=u[2]||c[3]!=u[3])||"s"==c[0].toLowerCase()&&(c[3]!=u[3]||c[4]!=u[4])){t=e._.transform2matrix(t,o()),n=e._.transform2matrix(n,o()),f=[["m",t.a,t.b,t.c,t.d,t.e,t.f]],p=[["m",n.a,n.b,n.c,n.d,n.e,n.f]];break}for(f[g]=[],p[g]=[],i=0,a=Math.max(c.length,u.length);a>i;i++)i in c&&(f[g][i]=c[i]),i in u&&(p[g][i]=u[i])}return{from:l(f),to:l(p),f:s(f)}}function o(e){return e}function i(e){return function(t){return+t.toFixed(3)+e}}function a(t){return e.rgb(t[0],t[1],t[2])}function s(e){var t,r,n,o,i,a,s=0,l=[];for(t=0,r=e.length;r>t;t++){for(i="[",a=['"'+e[t][0]+'"'],n=1,o=e[t].length;o>n;n++)a[n]="val["+s++ +"]";i+=a+"]",l[t]=i}return Function("val","return Snap.path.toString.call(["+l+"])")}function l(e){for(var t=[],r=0,n=e.length;n>r;r++)for(var o=1,i=e[r].length;i>o;o++)t.push(e[r][o]);return t}var c={},u=/[a-z]+$/i,h=String;c.stroke=c.fill="colour",t.prototype.equal=function(t,r){var d,f,p=h(this.attr(t)||""),g=this;if(p==+p&&r==+r)return{from:+p,to:+r,f:o};if("colour"==c[t])return d=e.color(p),f=e.color(r),{from:[d.r,d.g,d.b,d.opacity],to:[f.r,f.g,f.b,f.opacity],f:a};if("transform"==t||"gradientTransform"==t||"patternTransform"==t)return r instanceof e.Matrix&&(r=r.toTransformString()),e._.rgTransform.test(r)||(r=e._.svgTransform2string(r)),n(p,r,function(){return g.getBBox(1)});if("d"==t||"path"==t)return d=e.path.toCubic(p,r),{from:l(d[0]),to:l(d[1]),f:s(d[0])};if("points"==t)return d=h(p).split(","),f=h(r).split(","),{from:d,to:f,f:function(e){return e}};var m=p.match(u),v=h(r).match(u);return m&&m==v?{from:parseFloat(p),to:parseFloat(r),f:i(m)}:{from:this.asPX(t),to:this.asPX(t,r),f:o}}}),n.plugin(function(e,r,n,o){for(var i=r.prototype,a="hasOwnProperty",s=("createTouch"in o.doc),l=["click","dblclick","mousedown","mousemove","mouseout","mouseover","mouseup","touchstart","touchmove","touchend","touchcancel"],c={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},u=function(e){var t="y"==e?"scrollTop":"scrollLeft";return o.doc.documentElement[t]||o.doc.body[t]},h=function(){this.returnValue=!1},d=function(){return this.originalEvent.preventDefault()},f=function(){this.cancelBubble=!0},p=function(){return this.originalEvent.stopPropagation()},g=function(){return o.doc.addEventListener?function(e,t,r,n){var o=s&&c[t]?c[t]:t,i=function(o){var i=u("y"),l=u("x");if(s&&c[a](t))for(var h=0,f=o.targetTouches&&o.targetTouches.length;f>h;h++)if(o.targetTouches[h].target==e||e.contains(o.targetTouches[h].target)){var g=o;o=o.targetTouches[h],o.originalEvent=g,o.preventDefault=d,o.stopPropagation=p;break}var m=o.clientX+l,v=o.clientY+i;return r.call(n,o,m,v)};return t!==o&&e.addEventListener(t,i,!1),e.addEventListener(o,i,!1),
function(){return t!==o&&e.removeEventListener(t,i,!1),e.removeEventListener(o,i,!1),!0}}:o.doc.attachEvent?function(e,t,r,n){var i=function(e){e=e||o.win.event;var t=u("y"),i=u("x"),a=e.clientX+i,s=e.clientY+t;return e.preventDefault=e.preventDefault||h,e.stopPropagation=e.stopPropagation||f,r.call(n,e,a,s)};e.attachEvent("on"+t,i);var a=function(){return e.detachEvent("on"+t,i),!0};return a}:void 0}(),m=[],v=function(r){for(var n,o=r.clientX,i=r.clientY,a=u("y"),l=u("x"),c=m.length;c--;){if(n=m[c],s){for(var h,d=r.touches&&r.touches.length;d--;)if(h=r.touches[d],h.identifier==n.el._drag.id||n.el.node.contains(h.target)){o=h.clientX,i=h.clientY,(r.originalEvent?r.originalEvent:r).preventDefault();break}}else r.preventDefault();var f=n.el.node;e._.glob,f.nextSibling,f.parentNode,f.style.display,o+=l,i+=a,t("snap.drag.move."+n.el.id,n.move_scope||n.el,o-n.el._drag.x,i-n.el._drag.y,o,i,r)}},y=function(r){e.unmousemove(v).unmouseup(y);for(var n,o=m.length;o--;)n=m[o],n.el._drag={},t("snap.drag.end."+n.el.id,n.end_scope||n.start_scope||n.move_scope||n.el,r);m=[]},_=l.length;_--;)!function(t){e[t]=i[t]=function(r,n){return e.is(r,"function")&&(this.events=this.events||[],this.events.push({name:t,f:r,unbind:g(this.shape||this.node||o.doc,t,r,n||this)})),this},e["un"+t]=i["un"+t]=function(e){for(var r=this.events||[],n=r.length;n--;)if(r[n].name==t&&(r[n].f==e||!e))return r[n].unbind(),r.splice(n,1),!r.length&&delete this.events,this;return this}}(l[_]);i.hover=function(e,t,r,n){return this.mouseover(e,r).mouseout(t,n||r)},i.unhover=function(e,t){return this.unmouseover(e).unmouseout(t)};var b=[];i.drag=function(r,n,o,i,a,s){function l(l,c,u){(l.originalEvent||l).preventDefault(),this._drag.x=c,this._drag.y=u,this._drag.id=l.identifier,!m.length&&e.mousemove(v).mouseup(y),m.push({el:this,move_scope:i,start_scope:a,end_scope:s}),n&&t.on("snap.drag.start."+this.id,n),r&&t.on("snap.drag.move."+this.id,r),o&&t.on("snap.drag.end."+this.id,o),t("snap.drag.start."+this.id,a||i||this,c,u,l)}if(!arguments.length){var c;return this.drag(function(e,t){this.attr({transform:c+(c?"T":"t")+[e,t]})},function(){c=this.transform().local})}return this._drag={},b.push({el:this,start:l}),this.mousedown(l),this},i.undrag=function(){for(var r=b.length;r--;)b[r].el==this&&(this.unmousedown(b[r].start),b.splice(r,1),t.unbind("snap.drag.*."+this.id));return!b.length&&e.unmousemove(v).unmouseup(y),this}}),n.plugin(function(e,r,n){var o=(r.prototype,n.prototype),i=/^\s*url\((.+)\)/,a=String,s=e._.$;e.filter={},o.filter=function(t){var n=this;"svg"!=n.type&&(n=n.paper);var o=e.parse(a(t)),i=e._.id(),l=(n.node.offsetWidth,n.node.offsetHeight,s("filter"));return s(l,{id:i,filterUnits:"userSpaceOnUse"}),l.appendChild(o.node),n.defs.appendChild(l),new r(l)},t.on("snap.util.getattr.filter",function(){t.stop();var r=s(this.node,"filter");if(r){var n=a(r).match(i);return n&&e.select(n[1])}}),t.on("snap.util.attr.filter",function(n){if(n instanceof r&&"filter"==n.type){t.stop();var o=n.node.id;o||(s(n.node,{id:n.id}),o=n.id),s(this.node,{filter:e.url(o)})}n&&"none"!=n||(t.stop(),this.node.removeAttribute("filter"))}),e.filter.blur=function(t,r){null==t&&(t=2);var n=null==r?t:[t,r];return e.format('<feGaussianBlur stdDeviation="{def}"/>',{def:n})},e.filter.blur.toString=function(){return this()},e.filter.shadow=function(t,r,n,o){return o=o||"#000",null==n&&(n=4),"string"==typeof n&&(o=n,n=4),null==t&&(t=0,r=2),null==r&&(r=t),o=e.color(o),e.format('<feGaussianBlur in="SourceAlpha" stdDeviation="{blur}"/><feOffset dx="{dx}" dy="{dy}" result="offsetblur"/><feFlood flood-color="{color}"/><feComposite in2="offsetblur" operator="in"/><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge>',{color:o,dx:t,dy:r,blur:n})},e.filter.shadow.toString=function(){return this()},e.filter.grayscale=function(t){return null==t&&(t=1),e.format('<feColorMatrix type="matrix" values="{a} {b} {c} 0 0 {d} {e} {f} 0 0 {g} {b} {h} 0 0 0 0 0 1 0"/>',{a:.2126+.7874*(1-t),b:.7152-.7152*(1-t),c:.0722-.0722*(1-t),d:.2126-.2126*(1-t),e:.7152+.2848*(1-t),f:.0722-.0722*(1-t),g:.2126-.2126*(1-t),h:.0722+.9278*(1-t)})},e.filter.grayscale.toString=function(){return this()},e.filter.sepia=function(t){return null==t&&(t=1),e.format('<feColorMatrix type="matrix" values="{a} {b} {c} 0 0 {d} {e} {f} 0 0 {g} {h} {i} 0 0 0 0 0 1 0"/>',{a:.393+.607*(1-t),b:.769-.769*(1-t),c:.189-.189*(1-t),d:.349-.349*(1-t),e:.686+.314*(1-t),f:.168-.168*(1-t),g:.272-.272*(1-t),h:.534-.534*(1-t),i:.131+.869*(1-t)})},e.filter.sepia.toString=function(){return this()},e.filter.saturate=function(t){return null==t&&(t=1),e.format('<feColorMatrix type="saturate" values="{amount}"/>',{amount:1-t})},e.filter.saturate.toString=function(){return this()},e.filter.hueRotate=function(t){return t=t||0,e.format('<feColorMatrix type="hueRotate" values="{angle}"/>',{angle:t})},e.filter.hueRotate.toString=function(){return this()},e.filter.invert=function(t){return null==t&&(t=1),e.format('<feComponentTransfer><feFuncR type="table" tableValues="{amount} {amount2}"/><feFuncG type="table" tableValues="{amount} {amount2}"/><feFuncB type="table" tableValues="{amount} {amount2}"/></feComponentTransfer>',{amount:t,amount2:1-t})},e.filter.invert.toString=function(){return this()},e.filter.brightness=function(t){return null==t&&(t=1),e.format('<feComponentTransfer><feFuncR type="linear" slope="{amount}"/><feFuncG type="linear" slope="{amount}"/><feFuncB type="linear" slope="{amount}"/></feComponentTransfer>',{amount:t})},e.filter.brightness.toString=function(){return this()},e.filter.contrast=function(t){return null==t&&(t=1),e.format('<feComponentTransfer><feFuncR type="linear" slope="{amount}" intercept="{amount2}"/><feFuncG type="linear" slope="{amount}" intercept="{amount2}"/><feFuncB type="linear" slope="{amount}" intercept="{amount2}"/></feComponentTransfer>',{amount:t,amount2:.5-t/2})},e.filter.contrast.toString=function(){return this()}}),n}),Snap.plugin(function(e,t,r,n){function o(e,t,r){for(var n=0;n<t.length;n++)myEl=e.append(t[n]);r()}r.prototype.loadFilesDisplayOrdered=function(t,r,n){for(var i=0,a=t.length,s=new Array,l=this,c=0;a>c;c++)!function(){var u=c,h=t[u]+".svg";e.load(h,function(e){i++,n(e,h),s[u]=e,i>=a&&o(l,s,r)})}()}}),Object.size=function(e){var t,r=0;for(t in e)e.hasOwnProperty(t)&&r++;return r};var myUsername=!1,currentUser=!1,personnages={},personnageActuel=!1,fetchDb=function(){var e={credentials:"same-origin",headers:{accept:"application/json","Content-Type":"application/json"}},t=["get","delete","head"],r=["post","put"],n=function(t,r,n){var o="/api/"+t,i={};return n||"string"!=typeof r||(n=r,r=!1),console.log("fetchDb",t,n||"get"),r&&(i.body=JSON.stringify(r),i.method="post"),n&&(i.method=n),window.fetch(o,Object.assign(i,e))};return t.forEach(function(e){n[e]=function(t){return n(t,e)}}),r.forEach(function(e){n[e]=function(t,r){return n(t,r,e)}}),n.reject=function(e,t){var r=new Error(t||e.statusText);return r.statusText=e.statusText,r.status=e.status,r.url=e.url,Promise.reject(r)},n}();getDbSession().then(getDbUser).then(function(e){var t,r=[];if(myUsername=e.name,currentUser=e,e.cc&&e.cc.personnages&&e.cc.personnageActuel&&e.cc.personnages[e.cc.personnageActuel]){personnages=e.cc.personnages,personnageActuel=e.cc.personnageActuel;for(t in e.cc.personnages[e.cc.personnageActuel])r.push(encodeURIComponent(t)+"="+encodeURIComponent(e.cc.personnages[e.cc.personnageActuel][t]))}manageCharacters(currentUser)})["catch"](function(e){console.log("getDbUser error",e)}),window.onload=function(){var e=document.querySelector("#whoButton"),t=document.querySelector("#logoutButton"),r=document.querySelector("#loginButton"),n=document.querySelector("#registerButton"),o=document.querySelector(".js-register-link"),i=document.getElementById("male_silhouette"),a=document.getElementById("female_silhouette"),s=(/Firefox/i.test(navigator.userAgent)?"DOMMouseScroll":"mousewheel",document.querySelector("#sidebar"));rightSidebarClone=s.cloneNode(!0),e&&"function"==typeof whoami&&e.addEventListener("click",whoami,!1),t&&"function"==typeof logout&&t.addEventListener("click",logout,!1),r&&"function"==typeof loginMenu&&r.addEventListener("click",loginMenu,!1),n&&"function"==typeof registerMenu&&n.addEventListener("click",registerMenu,!1),o&&"function"==typeof registerMenu&&o.addEventListener("click",registerMenu,!1),i&&"function"==typeof selectMale&&i.addEventListener("click",selectMale,!1),a&&"function"==typeof selectFemale&&a.addEventListener("click",selectFemale,!1),startup()};