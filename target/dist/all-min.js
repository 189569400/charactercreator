function newChar(){var e=document.querySelector(".js-new-card"),t=e.querySelector(".first-input");e.classList.add("overlay__char-new--create"),t.focus()}function createChar(e){e&&e.preventDefault();var t=document.querySelector(".overlay__char-new--create"),r=this.parentNode.querySelector(".js-new-char-name").value;t.classList.remove("overlay__char-new--create");var o=r;o&&(currentUser.cc||(currentUser.cc={}),currentUser.cc.personnageActuel||(currentUser.cc.personnageActuel=o),currentUser.cc.personnages||(currentUser.cc.personnages={}),currentUser.cc.personnages[o]=window.hash.get(),Object.assign(currentUser.cc.personnages,personnages),updateDbUser(currentUser).then(function(e){return currentUser._rev=e.rev,e}).catch(function(e){console.log("err",e)}),manageCharacters())}function deleteChar(){var e=this.parentNode.parentNode.querySelector(".overlay__char-name").innerHTML;delete currentUser.cc.personnages[e],updateDbUser(currentUser).then(function(e){return currentUser._rev=e.rev,e}).catch(function(e){console.log("err",e)}),manageCharacters()}function saveChar(){document.querySelector(".save-btn").classList.remove("save--enabled");var e=currentUser.cc.personnageActuel;myUsername&&currentUser&&currentUser&&e&&(currentUser.cc||(currentUser.cc={}),currentUser.cc.personnageActuel||(currentUser.cc.personnageActuel=e),currentUser.cc.personnages||(currentUser.cc.personnages={}),currentUser.cc.personnages[e]=window.hash.get(),Object.assign(currentUser.cc.personnages,personnages),updateDbUser(currentUser).then(function(e){return currentUser._rev=e.rev,e}).catch(function(e){console.log("err",e)}))}function changeClipPathOnEyes(e){e.slice(1).split("_")[1];var t=document.querySelector("#svg1"),r=t.querySelector("#eye_right"),o=t.querySelector("#eye_left");r&&o&&(r.setAttribute("clip-path","url("+e+"--right)"),o.setAttribute("clip-path","url("+e+"--left)"))}function applyClipPath(){setTimeout(function(){changeClipPathOnEyes("#eyes_"+c.choices.emotion)},50)}function defaultEyeColor(e){var t={"#ffdfc4":"#6F918A","#f0d5be":"#FF6600","#eeceb3":"#A0892C","#e1b899":"#784421","#e5c298":"#784421","#ffdcb2":"#784421","#e5b887":"#784421","#e5a073":"#784421","#e79e6d":"#784421","#db9065":"#784421","#ce967c":"#784421","#c67856":"#784421","#ba6c49":"#784421","#a57257":"#784421","#f0c8c9":"#37ABC8","#dda8a0":"#AAD400","#b97c6d":"#552200","#a8756c":"#552200","#ad6452":"#552200","#5c3836":"#552200","#cb8442":"#552200","#bd723c":"#552200","#704139":"#552200","#a3866a":"#552200"}[e];c.choices.irisColor=t,hash.add({irisColor:t})}function defaultHairColor(e){var t={"#ffdfc4":"#803300","#f0d5be":"#803300","#eeceb3":"#803300","#e1b899":"#1a1a1a","#e5c298":"#1a1a1a","#ffdcb2":"#1a1a1a","#e5b887":"#1a1a1a","#e5a073":"#1a1a1a","#e79e6d":"#1a1a1a","#db9065":"#1a1a1a","#ce967c":"#1a1a1a","#c67856":"#1a1a1a","#ba6c49":"#1a1a1a","#a57257":"#1a1a1a","#f0c8c9":"#ffcc00","#dda8a0":"#ff6600","#b97c6d":"#1a1a1a","#a8756c":"#1a1a1a","#ad6452":"#1a1a1a","#5c3836":"#1a1a1a","#cb8442":"#1a1a1a","#bd723c":"#1a1a1a","#704139":"#1a1a1a","#a3866a":"#1a1a1a"}[e];c.choices.hairColor=t,hash.add({hairColor:t})}function shadeColor(e,t){var r=parseInt(e.slice(1),16),o=Math.round(2.55*t),n=(r>>16)+o,a=(r>>8&255)+o,s=(255&r)+o;return"#"+(16777216+65536*(n<255?n<1?0:n:255)+256*(a<255?a<1?0:a:255)+(s<255?s<1?0:s:255)).toString(16).slice(1)}function ColorLuminance(e,t){(e=String(e).replace(/[^0-9a-f]/gi,"")).length<6&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),t=t||0;var r,o,n="#";for(o=0;o<3;o++)r=parseInt(e.substr(2*o,2),16),n+=("00"+(r=Math.round(Math.min(Math.max(0,r+r*t),255)).toString(16))).substr(r.length);return n}function colorizeByClass(e,t){for(var r=document.querySelectorAll("."+e),o=r.length,n=o;n--;)r[o-(n+1)].style.fill=t}function colorSkin(e){colorizeByClass("upperlip",shadeColor(e,-10)),colorizeByClass("lowerlip",shadeColor(e,10))}function colorElement(e){var t,r,o,n,a,s=e.id.split("_"),i=s[0],l=s[1];return"eyeballs"===i&&(i="iris"),t=c.choices[i+"Color"],r=c.choices[i+"Color-bet"],o=c.choices[i+"Color-gam"],n=c.choices[i+"Color-del"],a=c.choices[i+"Color-eps"],"skin"!==processSection(i,l)&&"mouth"!==processSection(i,l)||void 0==c.choices.skinColor?"hair"===processSection(i,l)&&(e=colorElementLoop(e,"alpha",c.choices.hairColor)):e=colorElementLoop(e,"skin",c.choices.skinColor),void 0!=t&&(e=colorElementLoop(e,"alpha",t,!1),"mouth"===i&&(e=colorElementLoop(e,"lips",t,!0))),void 0!=r&&(e=colorElementLoop(e,"beta",r,!1)),void 0!=o&&(e=colorElementLoop(e,"gamma",o,!1)),void 0!=n&&(e=colorElementLoop(e,"delta",n,!1)),void 0!=a&&(e=colorElementLoop(e,"epsilon",a,!1)),e}function colorElementLoop(e,t,r,o){var n,a,s,i,l,c=["dark","light"],u=c.length,h=["er","est"],d=getColorList(r),f=".";if(o&&(f=".lips."),s=(a=e.querySelectorAll("."+t)).length,"lips"===t&&(t="skin"),s>0)for(l=getColorPair(d,i=3);s--;)a[s]=applyColorToChild(a[s],l);for(;u--;){if((s=(a=e.querySelectorAll(f+t+"--"+c[u])).length)>0)for("light"===c[u]&&(i=4),"dark"===c[u]&&(i=2),l=getColorPair(d,i);s--;)a[s]=applyColorToChild(a[s],l);for(n=h.length;n--;)if((s=(a=e.querySelectorAll("."+t+"--"+c[u]+h[n])).length)>0)for(c[u]+h[n]==="darkest"&&(i=0),c[u]+h[n]==="darker"&&(i=1),c[u]+h[n]==="lighter"&&(i=5),c[u]+h[n]==="lightest"&&(i=6),l=getColorPair(d,i);s--;)a[s]=applyColorToChild(a[s],l)}return e}function applyColorToChild(e,t){return"none"!=e.style.fill&&""!=e.style.fill&&(e.style.fill=t[0]),"none"!=e.style.stroke&&""!=e.style.stroke&&(e.style.stroke=t[1]),e}function getColorPair(e,t){var r,o=e[t],n=[];return n.push(o),r=t-2<0?e[0]:e[t-2],n.push(r),n}function getColorList(e){var t=[];return t.push(shadeColor(e,-30)),t.push(shadeColor(e,-20)),t.push(shadeColor(e,-10)),t.push(e),t.push(shadeColor(e,10)),t.push(shadeColor(e,20)),t.push(shadeColor(e,30)),t}function getColorClassPrefix(e){var t=document.querySelector(".section-pallette");return t.querySelector("input:checked")?t.querySelector("input:checked").value:"body"===e||"body_head"===e||"ears"===e||"nose"===e||"age"===e||"eyes"===e||"freckles"===e||"sockets"===e?"skin":"alpha"}function colorize(e,t){var r=window.forms,o=e,a=[],s=shadeColor(t,10),l=shadeColor(t,20),c=shadeColor(t,30),u=shadeColor(t,-10),h=shadeColor(t,-20),d=shadeColor(t,-30),f=getColorClassPrefix(e),_=document.querySelector('.section-pallette input[type="radio"]:checked+label'),p=" .";for(var g in _&&(_.style.background=t),r){var m=Object.keys(r[g]);for(var y in m)if(m[y].toLowerCase()===o){var v=o.replace(/^[a-z]/,function(e){return e.toUpperCase()});if("skin"!==f||"body"!==o&&"body_head"!==o&&"ears"!==o&&"nose"!==o&&"age"!==o&&"eyes"!==o&&"freckles"!==o&&"sockets"!==o)if("facialhair"===o||"hair"===o){a=window.hairLayers;w="hairColor"}else if("iris"===o){a=["eyeballs_default"];w="irisColor"}else{a=[];w=o+"Color";if("skin"!=f&&"alpha"!=f&&"lips"!=f&&(w=w+"-"+f.slice(0,3)),"irisColor"===w||"browsColor"===w||"lashesColor"===w||"socketsColor"===w||"mouthColor"===w){for(i in r[0].Emotion){""!=(b=r[0].Emotion[i])&&a.push(o+"_"+b)}"mouthColor"===w&&(f="skin")}else for(i in r[g][v]){var b;""!=(b=r[g][v][i])&&a.push(o+"_"+b)}}else{a=skinLayers;var w="skinColor"}origList=a,a=getAffectedListFromOrig(origList,multiLayer);var x=t.toString(),k=new Array;for(n in k[w]=x,hash.add(k),modCharacter(w,x),a){fullId="#"+a[n],"mouth"===o&&(p=" .lips.");for(var S=document.querySelectorAll(fullId+p+f),C=document.querySelectorAll(fullId+p+f+"--light"),L=document.querySelectorAll(fullId+p+f+"--lighter"),q=document.querySelectorAll(fullId+p+f+"--lightest"),E=document.querySelectorAll(fullId+p+f+"--dark"),F=document.querySelectorAll(fullId+p+f+"--darker"),A=document.querySelectorAll(fullId+p+f+"--darkest"),B=S.length,j=C.length,T=L.length,M=q.length,O=E.length,N=F.length,P=A.length;B--;)colorPaths(S[B],t,h);for(;j--;)colorPaths(C[j],s,u);for(;T--;)colorPaths(L[T],l,t);for(;M--;)colorPaths(q[M],c,s);for(;O--;)colorPaths(E[O],u,h);for(;N--;)colorPaths(F[N],h,d);for(;P--;)colorPaths(A[P],d,d)}}}}function colorPaths(e,t,r){"none"!=e.style.fill&&""!=e.style.fill&&(e.style.fill=t),"none"!=e.style.stroke&&""!=e.style.stroke&&(e.style.stroke=r)}function getAffectedListFromOrig(e,t){var r;for(a in affectedList=[],e){for(lyr in r=!1,t)if(e[a]==t[lyr][0])for(var o=1;o<=t[lyr][1];o++)idOf=e[a]+"_"+o+"_of_"+t[lyr][1],affectedList.push(idOf),r=!0;r||affectedList.push(e[a])}return affectedList}function replacementStyle(e,t){var r=e.style,o="";for(n in Object.keys(r)){var a=Object.keys(r)[n];if("fill"===a)if("none"!=r[a])if(void 0===e.style["stroke-width"])var s=ColorLuminance(t,-.12);else s=t;else s=r[a];else if("stroke"===a)if("none"!=r[a]){if(void 0!=e.style["stroke-width"])s=ColorLuminance(t,-.2)}else s=r[a];else s=r[a];var i=a+": "+s+"; ";o=o.concat(i)}return o}function addColorPicker(){getColor(document.querySelector(".section--selected").innerHTML.toLowerCase())}function hideColorPicker(){var e=document.querySelector(".colorpicker-wrapper");e&&!e.classList.contains("section--hide")&&e.classList.add("section--hide")}function getPallette(e){var t,r,o,n,a={},s=[],i=["skin","lips","alpha","beta","gamma","delta","epsilon"];if("body"===e)s=getAllBodyLayers();else if("mouth"===e)for(t=(o=getSectionLayersList("emotion")).length;t--;)s.push(e+"_"+o[t]);else s=replaceMultilayer(s=getSectionLayersList(e),e);for(t=s.length;t--;)for(n=i.length;n--;)null!=(r=document.querySelector("#svg1 #"+s[t]+" ."+i[n]))&&null!=r.style&&null!=r.style.fill&&(a[i[n]]=r.style.fill);drawPallette(a)}function drawPallette(e){for(var t,r,o=document.querySelector(".section-pallette"),n=Object.keys(e),a=n.length;a--;)t=document.createElement("INPUT"),(r=document.createElement("LABEL")).setAttribute("for","btn-"+[n[a]]),t.type="radio",t.id="btn-"+[n[a]],t.name="btn-pallette",t.value=[n[a]],t.setAttribute("checked","checked"),t.classList=[n[a]],r.style.background=e[n[a]],o.appendChild(t),o.appendChild(r)}function getColor(e){clearPicker();var t=e,r=document.getElementById("slide"),o=document.getElementById("picker"),n=document.querySelector(".section-id");document.querySelector(".colorpicker-wrapper");n.innerHTML=t,getPallette(e);try{ColorPicker(r,o,function(e,r,o){colorize(t,e)})}catch(e){console.error(e)}}function emptyPicker(){document.querySelector(".colorpicker-wrapper").innerHTML=""}function clearPicker(){document.querySelector(".colorpicker-wrapper").innerHTML='<div class="colorpicker-controls"><span class="section-id"></span><div class="section-pallette"></div></div><div class="colorpicker-align"><div id="picker" style="background-color:rgb(255,0,0);"></div><div id="slide"></div></div>'}function rollCredits(e){e&&e.preventDefault();var t=document.querySelector(".js-credits");t.querySelector(".close-btn");closeAllOverlays(),t.classList.add("overlay--show"),t.addEventListener("click",closeCredits,!0),setTimeout(function(){closeAllOverlays()},52e3)}function closeCredits(e){var t,r=document.querySelector(".js-credits");e.target===r&&(t=document.querySelector(".overlay--show"))&&t.classList.remove("overlay--show")}function getSVG(){console.log("getSVG");var e,t='\x3c!-- ?xml version="1.0" encoding="UTF-8" standalone="no"? --\x3e\n<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"  id="character" width="560" height="560">\n',r=document.getElementById("svg1").childNodes;return currentUser&&""!==currentUser.cc.personnageActuel&&(filename=currentUser.cc.personnageActuel+".svg"),Array.prototype.slice.call(r).forEach(function(r){void 0!=r.innerHTML&&(r.style&&r.style.opacity&&0==r.style.opacity||(e='<g id="'+r.id+'">'+r.innerHTML+"</g>",t+=e))}),t+="</svg>"}function download(){ga("send","event",{eventCategory:"Navigation",eventAction:"Download",eventLabel:"Download SVG file of character"});var e,t=c.choices.name||"my_character.svg",r=getSVG();(e=document.createElement("a")).setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(r)),e.setAttribute("download",t),document.createEvent?(event=document.createEvent("MouseEvents"),event.initEvent("click",!0,!0),e.dispatchEvent(event)):e.click(),caboose()}function initEyes(){console.log("initEyes");var e,t,r=document.querySelector("#svg1"),o=document.querySelector("#body_head_default"),n=document.querySelector("#eyes_neutral"),a=document.querySelector("#eye_left"),s=document.querySelector("#eye_right"),i=document.querySelector("#eyeball_left"),l=document.querySelector("#eyeball_right"),c={},u={},h={};function d(){console.log("centerGaze"),l.style.transform="scale(1, 1)",i.style.transform="scale(1, 1)",n.style.transform="translateY(0)",a.style.transform="translateX(0)",s.style.transform="translateX(0)"}console.log("svgContainer",r),function(){console.log("svgContainer",r),console.log("characterHead",o);var t=getPosition(r),n=o.getBoundingClientRect(),a=i.getBoundingClientRect(),s=l.getBoundingClientRect();e=n.width/41,c.y=t.y+.4243902439*n.height,u.x=s.x+s.width/2,h.x=a.x+a.width/2}(),document.onmousemove=function(r){var o,n,a,s,f,_,p,g,m,y,v,b,w,x,k,S=.08333333333;null==(r=r||window.event).pageX&&null!=r.clientX&&(o=r.target&&r.target.ownerDocument||document,n=o.documentElement,a=o.body,r.pageX=r.clientX+(n&&n.scrollLeft||a&&a.scrollLeft||0)-(n&&n.clientLeft||a&&a.clientLeft||0),r.pageY=r.clientY+(n&&n.scrollTop||a&&a.scrollTop||0)-(n&&n.clientTop||a&&a.clientTop||0));f=r.pageX-u.x,s=r.pageX-h.x,_=r.pageY-c.y,p=s<0?-1*s:s,(g=f<0?-1*f:f)>(m=_<0?-1*_:_)?(y=f>3*e?3:f<-3*e?-3:f/e,b=3*m/g,_<0&&(b*=-1)):(b=_>0?3:-3,y=3*g/m,f<0&&(y*=-1));p>m?(v=s>0?3:-3,b=3*m/p,_<0&&(b*=-1)):(b=_>0?3:-3,v=3*p/m,s<0&&(v*=-1));w=v<0?-1*v:v;x=y<0?-1*y:y;k=b<0?-1*b:b;1-k*S,NaN,1-x*S,1-w*S,_<0&&(y<0&&(y+=-2*b/3)>0&&(y=0),v>0&&(v-=-2*b/3)<0&&(v=0));i.style.transform="translateX("+v+"px)",l.style.transform="translateX("+y+"px)",clearTimeout(t),t=setTimeout(d,1500)}}function createForm(e,t){document.querySelector("#content_1").innerHTML="";e=e||c.choices.sex,t=t||window.forms;var r=["Head","Accessories","Torso","Body","Legs","Feet"],o='<h2 class="sidebar__title"><svg class="icon"><use xlink:href="#icon-coathanger"></use></svg>Categories</h2>';for(var n in o+='<ul class="section__list">',t){var a=document.querySelector("#content_1"),s="";o+='<section class="accordeon__section-label"><span class="accordeon__section-title"><svg class="icon"><use xlink:href="#'+getIconId(r[n],e)+'"></use></svg><span class="accordeon__section-title__text">'+r[n]+'</span></span><div class="accordeon__svg-container section-btn--hide"><svg width="1em" height="1em"><use xlink:href="#accordeon_btn"/></svg></div></section><div class="accordeon__content section--hide">';t.length;for(var i in t[n]){o+='    <a class="section__link"><li class="sbl__option" tabindex="0">'+i+"</li></a>";var l=i.toLowerCase();s+='    <div class="Row options__container options__'+l+'"><span class="svg__section__title">'+l+'</span><div class="thumbnails__container">';hash.get(l),t[n][i].map(function(e,t){var r="#"+l+"_"+e,o=getSectionsFromIdMultiLayer(window.multiLayer,r);if("emotion"===l){o=[];var n=GetEmotionGetLayers(e);for(emo in n){var a="#"+n[emo]+"_"+e;o.push(a)}}var i=getViewBox(l,e);s+='    <div class="option__container option__'+l+"_"+e+'" tabindex="0"><svg viewBox="'+i+'" class="svg__option '+l+"_"+e+'">'+(""===e?'<use xlink:href="#icon-none"></use>':"")+'</svg><span class="option__label">'+e+"</span></div>"}).join("\n");var u=hash.get(i);if(void 0!==u);else;htagc=i.toLowerCase()+"Color";var h=hash.get(htagc);if(void 0!==h);else;s+="    </div>",s+="</div>",0}o+="</div>";var d=document.createElement("div");d.innerHTML=s,a.appendChild(d)}o+="</ul>";var f=document.querySelector("#sidebar-left"),_=document.createElement("div");_.innerHTML=o,f.innerHTML="",f.appendChild(_);var p=document.querySelectorAll(".sbl__option"),g=document.querySelectorAll(".option__container"),m=document.querySelectorAll(".accordeon__section-label"),y=document.querySelectorAll(".section__color");addEventListenerList(p,"mouseover",showThumbOptions),addEventListenerList(p,"focus",showThumbOptions),addEventListenerList(p,"click",openThumbs),addEventListenerList(g,"click",changeOption),addEventListenerList(m,"click",toggleSection),addEventListenerList(y,"click",addColorPicker)}function getSectionsFromIdMultiLayer(e,t){var r=[];for(lyr in e){if(t.slice(1)===e[lyr][0])for(var o=1;o<=e[lyr][1];o++)newLayer=t+"_"+o+"_of_"+e[lyr][1],r.push(newLayer);0===r.length&&(r=[t])}return r}function getSectionLayersList(e){var t,r,o,n=c.choices.sex;for(e=capitalizeFirstLetter(e),r=(t="m"===n?window.maleFormList:window.femaleFormList).length;r--;)e in t[r]&&(o=t[r][e]);return o}function replaceMultilayer(e,t){var r,o,n,a,s,i,l=c.choices.sex,u=e.length,h=[];if(r="m"===l?window.multiLayerMale:window.multiLayerFemale,void 0!=t)for(;u--;)""!=e[u]&&h.push(t+"_"+e[u]);else for(u=e.length;u--;)"_"!=e[u].slice(-1)&&h.push(e[u]);for(o=multiLayer.length;o--;)if(isInArray(n=r[o][0],h))for(s=h.indexOf(n),h.splice(s,1),i=a=r[o][1];i--;)h.push(n+"_"+(i+1)+"_of_"+a);return h}function loadSectionLayers(e,t,r,o){var n,a=[];if(n=t.length,"emotion"===e){for(;n--;)a=a.concat(fromEmotionGetLayers(t[n]));t=a}else if("pupils"===e)t=["eyeballs_default"];else if("body"===e){for(;n--;)a=a.concat(bodyTypesToLayers(t[n]));t=a}else t=replaceMultilayer(t,e);loadFilesFromList(t,r,o)}function loadFilesFromList(e,t,r){var o,n,a,s;for("m"===c.choices.sex?(o="layer/male/",s=window.layersMale):(o="layer/female/",s=window.layersFemale),a=e.length;a--;)n=e[a],-1!==s.indexOf(n)&&fetch(o+n+".svg").then(function(e){return e.text()}).then(function(e){var t,o,n,a=document.createElementNS("http://www.w3.org/2000/svg","svg"),s=document.querySelector("#svg1"),i=s.querySelector("#outline");return a.innerHTML=e,t=a.querySelector("g"),r&&(t.style.opacity=0,t.style.pointerEvents="none"),"eyeballs_default"===(o=(t=colorElement(t)).id)&&(t=showPupilObject(t,getPupilShape())),o.split("_"),n=findNextLayerInDom(o),null===s.querySelector("#"+o)&&(null!=n?n.parentNode.insertBefore(t,n):i?i.parentNode.insertBefore(t,i):document.querySelector("#svg1").appendChild(t)),t}).then(function(e){var o;t&&"function"==typeof t&&r&&((o=e.querySelector("#eyeball_right"))&&(e=o),t(e))})}function getPupilShape(){return c.choices.pupils||"round"}function addEventListenerList(e,t,r){for(var o=e.length,n=o;n--;)e[o-n-1].addEventListener(t,r,!1)}function closeSections(e){for(var t=document.querySelectorAll(".accordeon__section-label"),r=document.querySelectorAll(".accordeon__svg-container"),o=t.length;o--;){var n=t[o];if(n!==e&&n.parentNode.parentNode.parentNode.classList.contains("sidebar-left")){var a=r[o],s=n.nextSibling;void 0===s.classList&&void 0!=s.nextSibling.classList&&(s=s.nextSibling),s.classList.contains("section--hide")||s.classList.toggle("section--hide"),a.classList.contains("section-btn--hide")||a.classList.toggle("section-btn--hide")}}}function toggleSection(e){var t;null!=(t=getParent(e.target,".accordeon__section-label").querySelector(".accordeon__section-title__text"))&&sectionZoom(t.innerHTML);var r=this;this.parentNode.parentNode.parentNode.classList.contains("sidebar-left")&&closeSections(r),removeAlert(r),showSection(r)}function showSection(e){var t,r,o=e.nextSibling;void 0===o.classList&&void 0!=o.nextSibling.classList&&(o=o.nextSibling),t=o.clientHeight,r=e.querySelector(".accordeon__svg-container"),o.classList.contains("accordeon__content")&&(o.classList.contains("section--hide")||(o.style.maxHeight=t),o.classList.toggle("section--hide"),r.classList.toggle("section-btn--hide"))}function removeAlert(e){var t=document.querySelector(".alert");null!=t&&t.classList.remove("alert"),e.classList.contains("alert")&&e.classList.remove("alert")}function changeOption(){var e=this.parentNode.parentNode.firstChild.innerHTML,t=this.lastChild.innerHTML,r=document.querySelector(".colorpicker-wrapper").previousSibling;void 0===r.classList&&void 0!=r.previousSibling.classList&&(r=r.previousSibling),show(t,e),r.classList.add("alert")}function getIconId(e,t){return"f"===t?{Head:"icon-face",Accessories:"icon-glasses",Torso:"icon-shirt",Body:"icon-underwear",Legs:"icon-dress",Feet:"icon-shoes"}[e]:"m"===t?{Head:"icon-face",Accessories:"icon-glasses",Torso:"icon-shirt",Body:"icon-underwear",Legs:"icon-pants",Feet:"icon-shoes"}[e]:"icon-face"}!function(e,t,r){var o,n,a=e.SVGAngle||t.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML",s=15,i="http://www.w3.org/2000/svg",l=['<div class="picker-wrapper">','<div class="picker"></div>','<div class="picker-indicator"></div>',"</div>",'<div class="slide-wrapper">','<div class="slide"></div>','<div class="slide-indicator"></div>',"</div>"].join("");function c(t){if(e.event&&e.event.contentOverflow!==r)return{x:e.event.offsetX,y:e.event.offsetY};if(t.offsetX!==r&&t.offsetY!==r)return{x:t.offsetX,y:t.offsetY};var o=t.target.parentNode.parentNode;return{x:t.layerX-o.offsetLeft,y:t.layerY-o.offsetTop}}function u(e,r,o){for(var n in e=t.createElementNS(i,e),r)e.setAttribute(n,r[n]);"[object Array]"!=Object.prototype.toString.call(o)&&(o=[o]);for(var a=0,s=o[0]&&o.length||0;a<s;a++)e.appendChild(o[a]);return e}function h(e){var t,r,o,n,a,s=e.h%360/60;n=(a=e.v*e.s)*(1-Math.abs(s%2-1)),t=r=o=e.v-a,t+=[a,n,0,0,n,a][s=~~s],r+=[n,a,a,n,0,0][s],o+=[0,0,n,a,a,n][s];var i=Math.floor(255*t),l=Math.floor(255*r),c=Math.floor(255*o);return{r:i,g:l,b:c,hex:"#"+(16777216|c|l<<8|i<<16).toString(16).slice(1)}}function d(e){var t,r,o=e.r,n=e.g,a=e.b;return(e.r>1||e.g>1||e.b>1)&&(o/=255,n/=255,a/=255),{h:(0==(r=(t=Math.max(o,n,a))-Math.min(o,n,a))?null:t==o?(n-a)/r+(n<a?6:0):t==n?(a-o)/r+2:(o-n)/r+4)%6*60,s:0==r?0:r/t,v:t}}function f(t,o,n){return function(a){var i=c(a=a||e.event);t.h=i.y/o.offsetHeight*360+s;var l=h({h:t.h,s:1,v:1}),u=h({h:t.h,s:t.s,v:t.v});n.style.backgroundColor=l.hex,t.callback&&t.callback(u.hex,{h:t.h-s,s:t.s,v:t.v},{r:u.r,g:u.g,b:u.b},r,i)}}function _(t,r){return function(o){var n=c(o=o||e.event),a=r.offsetWidth,i=r.offsetHeight;t.s=n.x/a,t.v=(i-n.y)/i;var l=h(t);t.callback&&t.callback(l.hex,{h:t.h-s,s:t.s,v:t.v},{r:l.r,g:l.g,b:l.b},n)}}"SVG"==a?(n=u("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"100%",height:"100%"},[u("defs",{},u("linearGradient",{id:"gradient-hsv",x1:"0%",y1:"100%",x2:"0%",y2:"0%"},[u("stop",{offset:"0%","stop-color":"#FF0000","stop-opacity":"1"}),u("stop",{offset:"13%","stop-color":"#FF00FF","stop-opacity":"1"}),u("stop",{offset:"25%","stop-color":"#8000FF","stop-opacity":"1"}),u("stop",{offset:"38%","stop-color":"#0040FF","stop-opacity":"1"}),u("stop",{offset:"50%","stop-color":"#00FFFF","stop-opacity":"1"}),u("stop",{offset:"63%","stop-color":"#00FF40","stop-opacity":"1"}),u("stop",{offset:"75%","stop-color":"#0BED00","stop-opacity":"1"}),u("stop",{offset:"88%","stop-color":"#FFFF00","stop-opacity":"1"}),u("stop",{offset:"100%","stop-color":"#FF0000","stop-opacity":"1"})])),u("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#gradient-hsv)"})]),o=u("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"100%",height:"100%"},[u("defs",{},[u("linearGradient",{id:"gradient-black",x1:"0%",y1:"100%",x2:"0%",y2:"0%"},[u("stop",{offset:"0%","stop-color":"#000000","stop-opacity":"1"}),u("stop",{offset:"100%","stop-color":"#CC9A81","stop-opacity":"0"})]),u("linearGradient",{id:"gradient-white",x1:"0%",y1:"100%",x2:"100%",y2:"100%"},[u("stop",{offset:"0%","stop-color":"#FFFFFF","stop-opacity":"1"}),u("stop",{offset:"100%","stop-color":"#CC9A81","stop-opacity":"0"})])]),u("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#gradient-white)"}),u("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#gradient-black)"})])):"VML"==a&&(n=['<DIV style="position: relative; width: 100%; height: 100%">','<v:rect style="position: absolute; top: 0; left: 0; width: 100%; height: 100%" stroked="f" filled="t">','<v:fill type="gradient" method="none" angle="0" color="red" color2="red" colors="8519f fuchsia;.25 #8000ff;24903f #0040ff;.5 aqua;41287f #00ff40;.75 #0bed00;57671f yellow"></v:fill>',"</v:rect>","</DIV>"].join(""),o=['<DIV style="position: relative; width: 100%; height: 100%">','<v:rect style="position: absolute; left: -1px; top: -1px; width: 101%; height: 101%" stroked="f" filled="t">','<v:fill type="gradient" method="none" angle="270" color="#FFFFFF" opacity="100%" color2="#CC9A81" o:opacity2="0%"></v:fill>',"</v:rect>",'<v:rect style="position: absolute; left: 0px; top: 0px; width: 100%; height: 101%" stroked="f" filled="t">','<v:fill type="gradient" method="none" angle="0" color="#000000" opacity="100%" color2="#CC9A81" o:opacity2="0%"></v:fill>',"</v:rect>","</DIV>"].join(""),t.namespaces.v||t.namespaces.add("v","urn:schemas-microsoft-com:vml","#default#VML"));var p=0;function g(e,t,r){if(!(this instanceof g))return new g(e,t,r);if(this.h=0,this.s=1,this.v=1,r)this.callback=r,this.pickerElement=t,this.slideElement=e;else{var s=e;s.innerHTML=l,this.slideElement=s.getElementsByClassName("slide")[0],this.pickerElement=s.getElementsByClassName("picker")[0];var i=s.getElementsByClassName("slide-indicator")[0],c=s.getElementsByClassName("picker-indicator")[0];g.fixIndicators(i,c),this.callback=function(e,r,o,n,a){g.positionIndicators(i,c,a,n),t(e,r,o)}}if("SVG"==a){var u=n.cloneNode(!0),h=o.cloneNode(!0),d=u.getElementsByTagName("defs")[0].firstChild,v=u.getElementsByTagName("rect")[0];d.id="gradient-hsv-"+p,v.setAttribute("fill","url(#"+d.id+")");var b=h.getElementsByTagName("defs")[0],w=[b.firstChild,b.lastChild],x=h.getElementsByTagName("rect");w[0].id="gradient-black-"+p,w[1].id="gradient-white-"+p,x[0].setAttribute("fill","url(#"+w[1].id+")"),x[1].setAttribute("fill","url(#"+w[0].id+")"),this.slideElement.appendChild(u),this.pickerElement.appendChild(h),p++}else this.slideElement.innerHTML=n,this.pickerElement.innerHTML=o;m(this.slideElement,"click",f(this,this.slideElement,this.pickerElement)),m(this.pickerElement,"click",_(this,this.pickerElement)),y(this,this.slideElement,f(this,this.slideElement,this.pickerElement)),y(this,this.pickerElement,_(this,this.pickerElement))}function m(e,t,r){e.attachEvent?e.attachEvent("on"+t,r):e.addEventListener&&e.addEventListener(t,r,!1)}function y(e,t,r){var o=!1;m(t,"mousedown",function(e){o=!0}),m(t,"mouseup",function(e){o=!1}),m(t,"mouseout",function(e){o=!1}),m(t,"mousemove",function(e){o&&r(e)})}function v(e,t,r,o){e.h=t.h%360,e.s=t.s,e.v=t.v;var n=h(e),a={y:e.h*e.slideElement.offsetHeight/360,x:0},s=e.pickerElement.offsetHeight,i={x:e.s*e.pickerElement.offsetWidth,y:s-e.v*s};return e.pickerElement.style.backgroundColor=h({h:e.h,s:1,v:1}).hex,e.callback&&e.callback(o||n.hex,{h:e.h,s:e.s,v:e.v},r||{r:n.r,g:n.g,b:n.b},i,a),e}g.hsv2rgb=function(e){var t=h(e);return delete t.hex,t},g.hsv2hex=function(e){return h(e).hex},g.rgb2hsv=d,g.rgb2hex=function(e){return h(d(e)).hex},g.hex2hsv=function(e){return d(g.hex2rgb(e))},g.hex2rgb=function(e){return{r:parseInt(e.substr(1,2),16),g:parseInt(e.substr(3,2),16),b:parseInt(e.substr(5,2),16)}},g.prototype.setHsv=function(e){return v(this,e)},g.prototype.setRgb=function(e){return v(this,d(e),e)},g.prototype.setHex=function(e){return v(this,g.hex2hsv(e),r,e)},g.positionIndicators=function(e,t,r,o){r&&(e.style.top=r.y-e.offsetHeight/2+"px"),o&&(t.style.top=o.y-t.offsetHeight/2+"px",t.style.left=o.x-t.offsetWidth/2+"px")},g.fixIndicators=function(e,t){t.style.pointerEvents="none",e.style.pointerEvents="none"},e.ColorPicker=g}(window,window.document),function(e,t){"use strict";var r=function(){var t=function(){for(var t=e.location.hash?e.location.hash.substr(1).split("&"):[],r={},o=0;o<t.length;o++){var n=t[o].split("=");r[n[0]]=decodeURIComponent(n[1])}return r},r=function(t){var r=[];for(var o in t)r.push(o+"="+encodeURIComponent(t[o]));e.location.hash=r.join("&")};return{get:function(e){var r=t();return e?r[e]:r},add:function(e){var o=t();for(var n in e)o[n]=e[n];r(o)},remove:function(e){e="string"==typeof e?[e]:e;for(var o=t(),n=0;n<e.length;n++)delete o[e[n]];r(o)},clear:function(){r({})}}}();e.hash=r}(window),function(e){var t,r,o="0.4.2",n="hasOwnProperty",a=/[\.\/]/,s=function(){},i=function(e,t){return e-t},l={n:{}},c=function(e,o){e=String(e);var n,a=r,s=Array.prototype.slice.call(arguments,2),l=c.listeners(e),u=0,h=[],d={},f=[],_=t;t=e,r=0;for(var p=0,g=l.length;g>p;p++)"zIndex"in l[p]&&(h.push(l[p].zIndex),l[p].zIndex<0&&(d[l[p].zIndex]=l[p]));for(h.sort(i);h[u]<0;)if(n=d[h[u++]],f.push(n.apply(o,s)),r)return r=a,f;for(p=0;g>p;p++)if("zIndex"in(n=l[p]))if(n.zIndex==h[u]){if(f.push(n.apply(o,s)),r)break;do{if((n=d[h[++u]])&&f.push(n.apply(o,s)),r)break}while(n)}else d[n.zIndex]=n;else if(f.push(n.apply(o,s)),r)break;return r=a,t=_,f.length?f:null};c._events=l,c.listeners=function(e){var t,r,o,n,s,i,c,u,h=e.split(a),d=l,f=[d],_=[];for(n=0,s=h.length;s>n;n++){for(u=[],i=0,c=f.length;c>i;i++)for(r=[(d=f[i].n)[h[n]],d["*"]],o=2;o--;)(t=r[o])&&(u.push(t),_=_.concat(t.f||[]));f=u}return _},c.on=function(e,t){if(e=String(e),"function"!=typeof t)return function(){};for(var r=e.split(a),o=l,n=0,i=r.length;i>n;n++)o=(o=o.n).hasOwnProperty(r[n])&&o[r[n]]||(o[r[n]]={n:{}});for(o.f=o.f||[],n=0,i=o.f.length;i>n;n++)if(o.f[n]==t)return s;return o.f.push(t),function(e){+e==+e&&(t.zIndex=+e)}},c.f=function(e){var t=[].slice.call(arguments,1);return function(){c.apply(null,[e,null].concat(t).concat([].slice.call(arguments,0)))}},c.stop=function(){r=1},c.nt=function(e){return e?new RegExp("(?:\\.|\\/|^)"+e+"(?:\\.|\\/|$)").test(t):t},c.nts=function(){return t.split(a)},c.off=c.unbind=function(e,t){if(e){var r,o,s,i,u,h,d,f=e.split(a),_=[l];for(i=0,u=f.length;u>i;i++)for(h=0;h<_.length;h+=s.length-2){if(s=[h,1],r=_[h].n,"*"!=f[i])r[f[i]]&&s.push(r[f[i]]);else for(o in r)r[n](o)&&s.push(r[o]);_.splice.apply(_,s)}for(i=0,u=_.length;u>i;i++)for(r=_[i];r.n;){if(t){if(r.f){for(h=0,d=r.f.length;d>h;h++)if(r.f[h]==t){r.f.splice(h,1);break}!r.f.length&&delete r.f}for(o in r.n)if(r.n[n](o)&&r.n[o].f){var p=r.n[o].f;for(h=0,d=p.length;d>h;h++)if(p[h]==t){p.splice(h,1);break}!p.length&&delete r.n[o].f}}else for(o in delete r.f,r.n)r.n[n](o)&&r.n[o].f&&delete r.n[o].f;r=r.n}}else c._events=l={n:{}}},c.once=function(e,t){var r=function(){return c.unbind(e,r),t.apply(this,arguments)};return c.on(e,r)},c.version=o,c.toString=function(){return"You are running Eve "+o},"undefined"!=typeof module&&module.exports?module.exports=c:"undefined"!=typeof define?define("eve",[],function(){return c}):e.eve=c}(this),function(e,t){"function"==typeof define&&define.amd?define(["eve"],function(r){return t(e,r)}):t(e,e.eve)}(this,function(e,t){var r=function(t){var r={},o=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||function(e){setTimeout(e,16)},n=Array.isArray||function(e){return e instanceof Array||"[object Array]"==Object.prototype.toString.call(e)},a=0,s="M"+(+new Date).toString(36),i=function(){return s+(a++).toString(36)},l=Date.now||function(){return+new Date},c=function(e){var t=this;if(null==e)return t.s;var r=t.s-e;t.b+=t.dur*r,t.B+=t.dur*r,t.s=e},u=function(e){return null==e?this.spd:void(this.spd=e)},h=function(e){var t=this;return null==e?t.dur:(t.s=t.s*e/t.dur,void(t.dur=e))},d=function(){var e=this;delete r[e.id],t("mina.stop."+e.id,e)},f=function(){var e=this;e.pdif||(delete r[e.id],e.pdif=e.get()-e.b)},_=function(){var e=this;e.pdif&&(e.b=e.get()-e.pdif,delete e.pdif,r[e.id]=e)},p=function(){var e=0;for(var a in r)if(r.hasOwnProperty(a)){var s,i=r[a],l=i.get();if(e++,i.s=(l-i.b)/(i.dur/i.spd),i.s>=1&&(delete r[a],i.s=1,e--,function(e){setTimeout(function(){t("mina.finish."+e.id,e)})}(i)),n(i.start)){s=[];for(var c=0,u=i.start.length;u>c;c++)s[c]=+i.start[c]+(i.end[c]-i.start[c])*i.easing(i.s)}else s=+i.start+(i.end-i.start)*i.easing(i.s);i.set(s)}e&&o(p)},g=function(e,t,n,a,s,l,m){var y={id:i(),start:e,end:t,b:n,s:0,dur:a-n,spd:1,get:s,set:l,easing:m||g.linear,status:c,speed:u,duration:h,stop:d,pause:f,resume:_};r[y.id]=y;var v,b=0;for(v in r)if(r.hasOwnProperty(v)&&2==++b)break;return 1==b&&o(p),y};return g.time=l,g.getById=function(e){return r[e]||null},g.linear=function(e){return e},g.easeout=function(e){return Math.pow(e,1.7)},g.easein=function(e){return Math.pow(e,.48)},g.easeinout=function(e){if(1==e)return 1;if(0==e)return 0;var t=.48-e/1.04,r=Math.sqrt(.1734+t*t),o=r-t,n=-r-t,a=Math.pow(Math.abs(o),1/3)*(0>o?-1:1)+Math.pow(Math.abs(n),1/3)*(0>n?-1:1)+.5;return 3*(1-a)*a*a+a*a*a},g.backin=function(e){if(1==e)return 1;var t=1.70158;return e*e*((t+1)*e-t)},g.backout=function(e){if(0==e)return 0;var t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},g.elastic=function(e){return e==!!e?e:Math.pow(2,-10*e)*Math.sin(2*(e-.075)*Math.PI/.3)+1},g.bounce=function(e){var t,r=7.5625,o=2.75;return 1/o>e?t=r*e*e:2/o>e?t=r*(e-=1.5/o)*e+.75:2.5/o>e?t=r*(e-=2.25/o)*e+.9375:t=r*(e-=2.625/o)*e+.984375,t},e.mina=g,g}(void 0===t?function(){}:t),o=function(){function o(e,t){if(e){if(e.tagName)return x(e);if(e instanceof m)return e;if(null==t)return x(e=A.doc.querySelector(e))}return new w(e=null==e?"100%":e,t=null==t?"100%":t)}function n(e,t){if(t){if("string"==typeof e&&(e=n(e)),"string"==typeof t)return"xlink:"==t.substring(0,6)?e.getAttributeNS(ee,t.substring(6)):"xml:"==t.substring(0,4)?e.getAttributeNS(te,t.substring(4)):e.getAttribute(t);for(var r in t)if(t[B](r)){var o=j(t[r]);o?"xlink:"==r.substring(0,6)?e.setAttributeNS(ee,r.substring(6),o):"xml:"==r.substring(0,4)?e.setAttributeNS(te,r.substring(4),o):e.setAttribute(r,o):e.removeAttribute(r)}}else e=A.doc.createElementNS(te,e);return e}function a(e,t){return"finite"==(t=j.prototype.toLowerCase.call(t))?isFinite(e):!("array"!=t||!(e instanceof Array||Array.isArray&&Array.isArray(e)))||("null"==t&&null===e||t==typeof e&&null!==e||"object"==t&&e===Object(e)||H.call(e).slice(8,-1).toLowerCase()==t)}function s(e,t,r){return function o(){var n=Array.prototype.slice.call(arguments,0),a=n.join("␀"),s=o.cache=o.cache||{},i=o.count=o.count||[];return s[B](a)?(function(e,t){for(var r=0,o=e.length;o>r;r++)if(e[r]===t)return e.push(e.splice(r,1)[0])}(i,a),r?r(s[a]):s[a]):(i.length>=1e3&&delete s[i.shift()],i.push(a),s[a]=e.apply(t,n),r?r(s[a]):s[a])}}function i(e){return e%360*U/180}function l(e){return 180*e/U%360}function c(e,t,r,o,n,a){return null==t&&"[object SVGMatrix]"==H.call(e)?(this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.e=e.e,void(this.f=e.f)):void(null!=e?(this.a=+e,this.b=+t,this.c=+r,this.d=+o,this.e=+n,this.f=+a):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0))}function u(e){var t=[];return e=e.replace(/(?:^|\s)(\w+)\(([^)]+)\)/g,function(e,r,o){return o=o.split(/\s*,\s*|\s+/),"rotate"==r&&1==o.length&&o.push(0,0),"scale"==r&&(2==o.length&&o.push(0,0),1==o.length&&o.push(o[0],0,0)),"skewX"==r?t.push(["m",1,0,O.tan(i(o[0])),1,0,0]):"skewY"==r?t.push(["m",1,O.tan(i(o[0])),0,1,0,0]):t.push([r.charAt(0)].concat(o)),e}),t}function h(e,t){var r=he(e),o=new c;if(r)for(var n=0,a=r.length;a>n;n++){var s,i,l,u,h,d=r[n],f=d.length,_=j(d[0]).toLowerCase(),p=d[0]!=_,g=p?o.invert():0;"t"==_&&2==f?o.translate(d[1],0):"t"==_&&3==f?p?(s=g.x(0,0),i=g.y(0,0),l=g.x(d[1],d[2]),u=g.y(d[1],d[2]),o.translate(l-s,u-i)):o.translate(d[1],d[2]):"r"==_?2==f?(h=h||t,o.rotate(d[1],h.x+h.width/2,h.y+h.height/2)):4==f&&(p?(l=g.x(d[2],d[3]),u=g.y(d[2],d[3]),o.rotate(d[1],l,u)):o.rotate(d[1],d[2],d[3])):"s"==_?2==f||3==f?(h=h||t,o.scale(d[1],d[f-1],h.x+h.width/2,h.y+h.height/2)):4==f?p?(l=g.x(d[2],d[3]),u=g.y(d[2],d[3]),o.scale(d[1],d[1],l,u)):o.scale(d[1],d[1],d[2],d[3]):5==f&&(p?(l=g.x(d[3],d[4]),u=g.y(d[3],d[4]),o.scale(d[1],d[2],l,u)):o.scale(d[1],d[2],d[3],d[4])):"m"==_&&7==f&&o.add(d[1],d[2],d[3],d[4],d[5],d[6])}return o}function d(e,t){if(null==t){var r=!0;if(!(t="linearGradient"==e.type||"radialGradient"==e.type?e.node.getAttribute("gradientTransform"):"pattern"==e.type?e.node.getAttribute("patternTransform"):e.node.getAttribute("transform")))return new c;t=u(t)}else a(t=o._.rgTransform.test(t)?j(t).replace(/\.{3}|\u2026/g,e._.transform||D):u(t),"array")&&(t=o.path?o.path.toString.call(t):j(t)),e._.transform=t;var n=h(t,e.getBBox(1));return r?n:void(e.matrix=n)}function f(e){var t=o._.someDefs;if(t&&de(t.ownerDocument.documentElement,t))return t;var r=e.node.ownerSVGElement&&x(e.node.ownerSVGElement)||e.node.parentNode&&x(e.node.parentNode)||o.select("svg")||o(0,0),n=r.select("defs"),a=null!=n&&n.node;return a||(a=b("defs",r.node).node),o._.someDefs=a,a}function _(e,t,r){function o(e){return null==e?D:e==+e?e:(n(c,{width:e}),c.getBBox().width)}function a(e){return null==e?D:e==+e?e:(n(c,{height:e}),c.getBBox().height)}function s(o,n){null==t?l[o]=n(e.attr(o)):o==t&&(l=n(null==r?e.attr(o):r))}var i=f(e),l={},c=i.querySelector(".svg---mgr");switch(c||(n(c=n("rect"),{width:10,height:10,class:"svg---mgr"}),i.appendChild(c)),e.type){case"rect":s("rx",o),s("ry",a);case"image":s("width",o),s("height",a);case"text":s("x",o),s("y",a);break;case"circle":s("cx",o),s("cy",a),s("r",o);break;case"ellipse":s("cx",o),s("cy",a),s("rx",o),s("ry",a);break;case"line":s("x1",o),s("x2",o),s("y1",a),s("y2",a);break;case"marker":s("refX",o),s("markerWidth",o),s("refY",a),s("markerHeight",a);break;case"radialGradient":s("fx",o),s("fy",a);break;case"tspan":s("dx",o),s("dy",a);break;default:s(t,o)}return l}function p(e){a(e,"array")||(e=Array.prototype.slice.call(arguments,0));for(var t=0,r=0,o=this.node;this[t];)delete this[t++];for(t=0;t<e.length;t++)"set"==e[t].type?e[t].forEach(function(e){o.appendChild(e.node)}):o.appendChild(e[t].node);var n=o.childNodes;for(t=0;t<n.length;t++)this[r++]=x(n[t]);return this}function m(e){if(e.snap in re)return re[e.snap];var t,r=this.id=K();try{t=e.ownerSVGElement}catch(e){}if(this.node=e,t&&(this.paper=new w(t)),this.type=e.tagName,this.anims={},this._={transform:[]},e.snap=r,re[r]=this,"g"==this.type)for(var o in this.add=p,w.prototype)w.prototype[B](o)&&(this[o]=w.prototype[o])}function y(e){for(var t,r=0,o=e.length;o>r;r++)if(t=t||e[r])return t}function v(e){this.node=e}function b(e,t){var r=n(e);t.appendChild(r);var o=x(r);return o.type=e,o}function w(e,t){var r,o,a,s=w.prototype;if(e&&"svg"==e.tagName){if(e.snap in re)return re[e.snap];for(var i in r=new m(e),o=e.getElementsByTagName("desc")[0],a=e.getElementsByTagName("defs")[0],o||((o=n("desc")).appendChild(A.doc.createTextNode("Created with Snap")),r.node.appendChild(o)),a||(a=n("defs"),r.node.appendChild(a)),r.defs=a,s)s[B](i)&&(r[i]=s[i]);r.paper=r.root=r}else n((r=b("svg",A.doc.body)).node,{height:t,version:1.1,width:e,xmlns:te});return r}function x(e){return e?e instanceof m||e instanceof v?e:"svg"==e.tagName?new w(e):new m(e):e}function k(){return this.selectAll("stop")}function S(e,t){var r=n("stop"),a={offset:+t+"%"};return e=o.color(e),a["stop-color"]=e.hex,e.opacity<1&&(a["stop-opacity"]=e.opacity),n(r,a),this.node.appendChild(r),this}function C(){if("linearGradient"==this.type){var e=n(this.node,"x1")||0,t=n(this.node,"x2")||1,r=n(this.node,"y1")||0,a=n(this.node,"y2")||0;return o._.box(e,r,O.abs(t-e),O.abs(a-r))}var s=this.node.cx||.5,i=this.node.cy||.5,l=this.node.r||0;return o._.box(s-l,i-l,2*l,2*l)}function L(e,r){function o(e,t){for(var r=(t-c)/(e-u),o=u;e>o;o++)i[o].offset=+(+c+r*(o-u)).toFixed(2);u=e,c=t}var a,s=y(t("snap.util.grad.parse",null,r));if(!s)return null;s.params.unshift(e),a="l"==s.type.toLowerCase()?q.apply(0,s.params):E.apply(0,s.params),s.type!=s.type.toLowerCase()&&n(a.node,{gradientUnits:"userSpaceOnUse"});var i=s.stops,l=i.length,c=0,u=0;l--;for(var h=0;l>h;h++)"offset"in i[h]&&o(h,i[h].offset);for(i[l].offset=i[l].offset||100,o(l,i[l].offset),h=0;l>=h;h++){var d=i[h];a.addStop(d.color,d.offset)}return a}function q(e,t,r,o,a){var s=b("linearGradient",e);return s.stops=k,s.addStop=S,s.getBBox=C,null!=t&&n(s.node,{x1:t,y1:r,x2:o,y2:a}),s}function E(e,t,r,o,a,s){var i=b("radialGradient",e);return i.stops=k,i.addStop=S,i.getBBox=C,null!=t&&n(i.node,{cx:t,cy:r,r:o}),null!=a&&null!=s&&n(i.node,{fx:a,fy:s}),i}function F(e){return function(r){if(t.stop(),r instanceof v&&1==r.node.childNodes.length&&("radialGradient"==r.node.firstChild.tagName||"linearGradient"==r.node.firstChild.tagName||"pattern"==r.node.firstChild.tagName)&&(r=r.node.firstChild,f(this).appendChild(r),r=x(r)),r instanceof m)if("radialGradient"==r.type||"linearGradient"==r.type||"pattern"==r.type){r.node.id||n(r.node,{id:r.id});var a=oe(r.node.id)}else a=r.attr(e);else if((a=o.color(r)).error){var s=L(f(this),r);s?(s.node.id||n(s.node,{id:s.id}),a=oe(s.node.id)):a=r}else a=j(a);var i={};i[e]=a,n(this.node,i),this.node.style[e]=D}}o.version="0.2.0",o.toString=function(){return"Snap v"+this.version},o._={};var A={win:e,doc:e.document};o._.glob=A;var B="hasOwnProperty",j=String,T=parseFloat,M=parseInt,O=Math,N=O.max,P=O.min,I=O.abs,U=(O.pow,O.PI),D=(O.round,""),H=Object.prototype.toString,z=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?%?)\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?%?)\s*\))\s*$/i,R=/^url\(#?([^)]+)\)$/,G="\t\n\v\f\r   ᠎             　\u2028\u2029",V=new RegExp("[,"+G+"]+"),X=(new RegExp("["+G+"]","g"),new RegExp("["+G+"]*,["+G+"]*")),Y={hs:1,rg:1},Z=new RegExp("([a-z])["+G+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+G+"]*,?["+G+"]*)+)","ig"),W=new RegExp("([rstm])["+G+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+G+"]*,?["+G+"]*)+)","ig"),$=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+G+"]*,?["+G+"]*","ig"),Q=0,J="S"+(+new Date).toString(36),K=function(){return J+(Q++).toString(36)},ee="http://www.w3.org/1999/xlink",te="http://www.w3.org/2000/svg",re={},oe=o.url=function(e){return"url('#"+e+"')"};o._.$=n,o._.id=K,o.format=function(){var e=/\{([^\}]+)\}/g,t=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,r=function(e,r,o){var n=o;return r.replace(t,function(e,t,r,o,a){t=t||o,n&&(t in n&&(n=n[t]),"function"==typeof n&&a&&(n=n()))}),n=(null==n||n==o?e:n)+""};return function(t,o){return j(t).replace(e,function(e,t){return r(e,t,o)})}}();var ne=function(){function e(){this.parentNode.removeChild(this)}return function(t,r){var o=A.doc.createElement("img"),n=A.doc.body;o.style.cssText="position:absolute;left:-9999em;top:-9999em",o.onload=function(){r.call(o),o.onload=o.onerror=null,n.removeChild(o)},o.onerror=e,n.appendChild(o),o.src=t}}();o._.clone=function e(t){if("function"==typeof t||Object(t)!==t)return t;var r=new t.constructor;for(var o in t)t[B](o)&&(r[o]=e(t[o]));return r},o._.cacher=s,o.rad=i,o.deg=l,o.angle=function e(t,r,o,n,a,s){if(null==a){var i=t-o,l=r-n;return i||l?(180+180*O.atan2(-l,-i)/U+360)%360:0}return e(t,r,a,s)-e(o,n,a,s)},o.is=a,o.snapTo=function(e,t,r){if(r=a(r,"finite")?r:10,a(e,"array")){for(var o=e.length;o--;)if(I(e[o]-t)<=r)return e[o]}else{var n=t%(e=+e);if(r>n)return t-n;if(n>e-r)return t-n+e}return t},function(e){function t(e){return e[0]*e[0]+e[1]*e[1]}function r(e){var r=O.sqrt(t(e));e[0]&&(e[0]/=r),e[1]&&(e[1]/=r)}e.add=function(e,t,r,o,n,a){var s,i,l,u,h=[[],[],[]],d=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1]],f=[[e,r,n],[t,o,a],[0,0,1]];for(e&&e instanceof c&&(f=[[e.a,e.c,e.e],[e.b,e.d,e.f],[0,0,1]]),s=0;3>s;s++)for(i=0;3>i;i++){for(u=0,l=0;3>l;l++)u+=d[s][l]*f[l][i];h[s][i]=u}return this.a=h[0][0],this.b=h[1][0],this.c=h[0][1],this.d=h[1][1],this.e=h[0][2],this.f=h[1][2],this},e.invert=function(){var e=this,t=e.a*e.d-e.b*e.c;return new c(e.d/t,-e.b/t,-e.c/t,e.a/t,(e.c*e.f-e.d*e.e)/t,(e.b*e.e-e.a*e.f)/t)},e.clone=function(){return new c(this.a,this.b,this.c,this.d,this.e,this.f)},e.translate=function(e,t){return this.add(1,0,0,1,e,t)},e.scale=function(e,t,r,o){return null==t&&(t=e),(r||o)&&this.add(1,0,0,1,r,o),this.add(e,0,0,t,0,0),(r||o)&&this.add(1,0,0,1,-r,-o),this},e.rotate=function(e,t,r){e=i(e),t=t||0,r=r||0;var o=+O.cos(e).toFixed(9),n=+O.sin(e).toFixed(9);return this.add(o,n,-n,o,t,r),this.add(1,0,0,1,-t,-r)},e.x=function(e,t){return e*this.a+t*this.c+this.e},e.y=function(e,t){return e*this.b+t*this.d+this.f},e.get=function(e){return+this[j.fromCharCode(97+e)].toFixed(4)},e.toString=function(){return"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")"},e.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]},e.split=function(){var e={};e.dx=this.e,e.dy=this.f;var o=[[this.a,this.c],[this.b,this.d]];e.scalex=O.sqrt(t(o[0])),r(o[0]),e.shear=o[0][0]*o[1][0]+o[0][1]*o[1][1],o[1]=[o[1][0]-o[0][0]*e.shear,o[1][1]-o[0][1]*e.shear],e.scaley=O.sqrt(t(o[1])),r(o[1]),e.shear/=e.scaley;var n=-o[0][1],a=o[1][1];return 0>a?(e.rotate=l(O.acos(a)),0>n&&(e.rotate=360-e.rotate)):e.rotate=l(O.asin(n)),e.isSimple=!(+e.shear.toFixed(9)||e.scalex.toFixed(9)!=e.scaley.toFixed(9)&&e.rotate),e.isSuperSimple=!+e.shear.toFixed(9)&&e.scalex.toFixed(9)==e.scaley.toFixed(9)&&!e.rotate,e.noRotation=!+e.shear.toFixed(9)&&!e.rotate,e},e.toTransformString=function(e){var t=e||this.split();return t.isSimple?(t.scalex=+t.scalex.toFixed(4),t.scaley=+t.scaley.toFixed(4),t.rotate=+t.rotate.toFixed(4),(t.dx||t.dy?"t"+[+t.dx.toFixed(4),+t.dy.toFixed(4)]:D)+(1!=t.scalex||1!=t.scaley?"s"+[t.scalex,t.scaley,0,0]:D)+(t.rotate?"r"+[+t.rotate.toFixed(4),0,0]:D)):"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]}}(c.prototype),o.Matrix=c,o.getRGB=s(function(e){if(!e||(e=j(e)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:le};if("none"==e)return{r:-1,g:-1,b:-1,hex:"none",toString:le};if(!(Y[B](e.toLowerCase().substring(0,2))||"#"==e.charAt())&&(e=ae(e)),!e)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:le};var t,r,n,s,i,l,c=e.match(z);return c?(c[2]&&(n=M(c[2].substring(5),16),r=M(c[2].substring(3,5),16),t=M(c[2].substring(1,3),16)),c[3]&&(n=M((i=c[3].charAt(3))+i,16),r=M((i=c[3].charAt(2))+i,16),t=M((i=c[3].charAt(1))+i,16)),c[4]&&(l=c[4].split(X),t=T(l[0]),"%"==l[0].slice(-1)&&(t*=2.55),r=T(l[1]),"%"==l[1].slice(-1)&&(r*=2.55),n=T(l[2]),"%"==l[2].slice(-1)&&(n*=2.55),"rgba"==c[1].toLowerCase().slice(0,4)&&(s=T(l[3])),l[3]&&"%"==l[3].slice(-1)&&(s/=100)),c[5]?(l=c[5].split(X),t=T(l[0]),"%"==l[0].slice(-1)&&(t/=100),r=T(l[1]),"%"==l[1].slice(-1)&&(r/=100),n=T(l[2]),"%"==l[2].slice(-1)&&(n/=100),("deg"==l[0].slice(-3)||"°"==l[0].slice(-1))&&(t/=360),"hsba"==c[1].toLowerCase().slice(0,4)&&(s=T(l[3])),l[3]&&"%"==l[3].slice(-1)&&(s/=100),o.hsb2rgb(t,r,n,s)):c[6]?(l=c[6].split(X),t=T(l[0]),"%"==l[0].slice(-1)&&(t/=100),r=T(l[1]),"%"==l[1].slice(-1)&&(r/=100),n=T(l[2]),"%"==l[2].slice(-1)&&(n/=100),("deg"==l[0].slice(-3)||"°"==l[0].slice(-1))&&(t/=360),"hsla"==c[1].toLowerCase().slice(0,4)&&(s=T(l[3])),l[3]&&"%"==l[3].slice(-1)&&(s/=100),o.hsl2rgb(t,r,n,s)):(t=P(O.round(t),255),r=P(O.round(r),255),n=P(O.round(n),255),s=P(N(s,0),1),(c={r:t,g:r,b:n,toString:le}).hex="#"+(16777216|n|r<<8|t<<16).toString(16).slice(1),c.opacity=a(s,"finite")?s:1,c)):{r:-1,g:-1,b:-1,hex:"none",error:1,toString:le}},o),o.hsb=s(function(e,t,r){return o.hsb2rgb(e,t,r).hex}),o.hsl=s(function(e,t,r){return o.hsl2rgb(e,t,r).hex}),o.rgb=s(function(e,t,r,o){if(a(o,"finite")){var n=O.round;return"rgba("+[n(e),n(t),n(r),+o.toFixed(2)]+")"}return"#"+(16777216|r|t<<8|e<<16).toString(16).slice(1)});var ae=function(e){var t=A.doc.getElementsByTagName("head")[0],r="rgb(255, 0, 0)";return(ae=s(function(e){if("red"==e.toLowerCase())return r;t.style.color=r,t.style.color=e;var o=A.doc.defaultView.getComputedStyle(t,D).getPropertyValue("color");return o==r?null:o}))(e)},se=function(){return"hsb("+[this.h,this.s,this.b]+")"},ie=function(){return"hsl("+[this.h,this.s,this.l]+")"},le=function(){return 1==this.opacity||null==this.opacity?this.hex:"rgba("+[this.r,this.g,this.b,this.opacity]+")"},ce=function(e,t,r){if(null==t&&a(e,"object")&&"r"in e&&"g"in e&&"b"in e&&(r=e.b,t=e.g,e=e.r),null==t&&a(e,string)){var n=o.getRGB(e);e=n.r,t=n.g,r=n.b}return(e>1||t>1||r>1)&&(e/=255,t/=255,r/=255),[e,t,r]},ue=function(e,t,r,n){var s={r:e=O.round(255*e),g:t=O.round(255*t),b:r=O.round(255*r),opacity:a(n,"finite")?n:1,hex:o.rgb(e,t,r),toString:le};return a(n,"finite")&&(s.opacity=n),s};o.color=function(e){var t;return a(e,"object")&&"h"in e&&"s"in e&&"b"in e?(t=o.hsb2rgb(e),e.r=t.r,e.g=t.g,e.b=t.b,e.opacity=1,e.hex=t.hex):a(e,"object")&&"h"in e&&"s"in e&&"l"in e?(t=o.hsl2rgb(e),e.r=t.r,e.g=t.g,e.b=t.b,e.opacity=1,e.hex=t.hex):(a(e,"string")&&(e=o.getRGB(e)),a(e,"object")&&"r"in e&&"g"in e&&"b"in e&&!("error"in e)?(t=o.rgb2hsl(e),e.h=t.h,e.s=t.s,e.l=t.l,t=o.rgb2hsb(e),e.v=t.b):((e={hex:"none"}).r=e.g=e.b=e.h=e.s=e.v=e.l=-1,e.error=1)),e.toString=le,e},o.hsb2rgb=function(e,t,r,o){var n,s,i,l,c;return a(e,"object")&&"h"in e&&"s"in e&&"b"in e&&(r=e.b,t=e.s,o=(e=e.h).o),l=(c=r*t)*(1-I((e=(e*=360)%360/60)%2-1)),n=s=i=r-c,ue(n+=[c,l,0,0,l,c][e=~~e],s+=[l,c,c,l,0,0][e],i+=[0,0,l,c,c,l][e],o)},o.hsl2rgb=function(e,t,r,o){var n,s,i,l,c;return a(e,"object")&&"h"in e&&"s"in e&&"l"in e&&(r=e.l,t=e.s,e=e.h),(e>1||t>1||r>1)&&(e/=360,t/=100,r/=100),e=(e*=360)%360/60,l=(c=2*t*(.5>r?r:1-r))*(1-I(e%2-1)),n=s=i=r-c/2,ue(n+=[c,l,0,0,l,c][e=~~e],s+=[l,c,c,l,0,0][e],i+=[0,0,l,c,c,l][e],o)},o.rgb2hsb=function(e,t,r){var o,n;return e=(r=ce(e,t,r))[0],t=r[1],r=r[2],{h:((0==(n=(o=N(e,t,r))-P(e,t,r))?null:o==e?(t-r)/n:o==t?(r-e)/n+2:(e-t)/n+4)+360)%6*60/360,s:0==n?0:n/o,b:o,toString:se}},o.rgb2hsl=function(e,t,r){var o,n,a,s;return e=(r=ce(e,t,r))[0],t=r[1],r=r[2],o=((n=N(e,t,r))+(a=P(e,t,r)))/2,{h:((0==(s=n-a)?null:n==e?(t-r)/s:n==t?(r-e)/s+2:(e-t)/s+4)+360)%6*60/360,s:0==s?0:.5>o?s/(2*o):s/(2-2*o),l:o,toString:ie}},o.parsePathString=function(e){if(!e)return null;var t=o.path(e);if(t.arr)return o.path.clone(t.arr);var r={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},n=[];return a(e,"array")&&a(e[0],"array")&&(n=o.path.clone(e)),n.length||j(e).replace(Z,function(e,t,o){var a=[],s=t.toLowerCase();if(o.replace($,function(e,t){t&&a.push(+t)}),"m"==s&&a.length>2&&(n.push([t].concat(a.splice(0,2))),s="l",t="m"==t?"l":"L"),"o"==s&&1==a.length&&n.push([t,a[0]]),"r"==s)n.push([t].concat(a));else for(;a.length>=r[s]&&(n.push([t].concat(a.splice(0,r[s]))),r[s]););}),n.toString=o.path.toString,t.arr=o.path.clone(n),n};var he=o.parseTransformString=function(e){if(!e)return null;var t=[];return a(e,"array")&&a(e[0],"array")&&(t=o.path.clone(e)),t.length||j(e).replace(W,function(e,r,o){var n=[];r.toLowerCase(),o.replace($,function(e,t){t&&n.push(+t)}),t.push([r].concat(n))}),t.toString=o.path.toString,t};o._.svgTransform2string=u,o._.rgTransform=new RegExp("^[a-z]["+G+"]*-?\\.?\\d","i"),o._.transform2matrix=h,o._unit2px=_;var de=A.doc.contains||A.doc.compareDocumentPosition?function(e,t){var r=9==e.nodeType?e.documentElement:e,o=t&&t.parentNode;return e==o||!(!o||1!=o.nodeType||!(r.contains?r.contains(o):e.compareDocumentPosition&&16&e.compareDocumentPosition(o)))}:function(e,t){if(t)for(;t;)if((t=t.parentNode)==e)return!0;return!1};o._.getSomeDefs=f,o.select=function(e){return x(A.doc.querySelector(e))},o.selectAll=function(e){for(var t=A.doc.querySelectorAll(e),r=(o.set||Array)(),n=0;n<t.length;n++)r.push(x(t[n]));return r},function(e){function s(e,t,r){return function(o){var n=o.slice(e,t);return 1==n.length&&(n=n[0]),r?r(n):n}}function i(e){return function(){var t=e?"<"+this.type:"",r=this.node.attributes,o=this.node.childNodes;if(e)for(var n=0,a=r.length;a>n;n++)t+=" "+r[n].name+'="'+r[n].value.replace(/"/g,'\\"')+'"';if(o.length){for(e&&(t+=">"),n=0,a=o.length;a>n;n++)3==o[n].nodeType?t+=o[n].nodeValue:1==o[n].nodeType&&(t+=x(o[n]).toString());e&&(t+="</"+this.type+">")}else e&&(t+="/>");return t}}e.attr=function(e,r){var o=this;if(o.node,!e)return o;if(a(e,"string")){if(!(arguments.length>1))return y(t("snap.util.getattr."+e,o));var n={};n[e]=r,e=n}for(var s in e)e[B](s)&&t("snap.util.attr."+s,o,e[s]);return o},e.getBBox=function(e){var t=this;if("use"==t.type&&(t=t.original),t.removed)return{};var r=t._;return e?(r.bboxwt=o.path.get[t.type]?o.path.getBBox(t.realPath=o.path.get[t.type](t)):o._.box(t.node.getBBox()),o._.box(r.bboxwt)):(t.realPath=(o.path.get[t.type]||o.path.get.deflt)(t),r.bbox=o.path.getBBox(o.path.map(t.realPath,t.matrix)),o._.box(r.bbox))};var l=function(){return this.string};e.transform=function(e){var t=this._;if(null==e){var r=new c(this.node.getCTM()),o=d(this),a=o.toTransformString();return{string:j(o)==j(this.matrix)?t.transform:a,globalMatrix:r,localMatrix:o,diffMatrix:r.clone().add(o.invert()),global:r.toTransformString(),local:a,toString:l}}return e instanceof c&&(e=e.toTransformString()),d(this,e),this.node&&("linearGradient"==this.type||"radialGradient"==this.type?n(this.node,{gradientTransform:this.matrix}):"pattern"==this.type?n(this.node,{patternTransform:this.matrix}):n(this.node,{transform:this.matrix})),this},e.parent=function(){return x(this.node.parentNode)},e.append=e.add=function(e){if(e){if("set"==e.type){var t=this;return e.forEach(function(e){t.add(e)}),this}e=x(e),this.node.appendChild(e.node),e.paper=this.paper}return this},e.appendTo=function(e){return e&&(e=x(e)).append(this),this},e.prepend=function(e){if(e){var t=(e=x(e)).parent();this.node.insertBefore(e.node,this.node.firstChild),this.add&&this.add(),e.paper=this.paper,this.parent()&&this.parent().add(),t&&t.add()}return this},e.prependTo=function(e){return(e=x(e)).prepend(this),this},e.before=function(e){if("set"==e.type){var t=this;return e.forEach(function(e){var r=e.parent();t.node.parentNode.insertBefore(e.node,t.node),r&&r.add()}),this.parent().add(),this}var r=(e=x(e)).parent();return this.node.parentNode.insertBefore(e.node,this.node),this.parent()&&this.parent().add(),r&&r.add(),e.paper=this.paper,this},e.after=function(e){var t=(e=x(e)).parent();return this.node.nextSibling?this.node.parentNode.insertBefore(e.node,this.node.nextSibling):this.node.parentNode.appendChild(e.node),this.parent()&&this.parent().add(),t&&t.add(),e.paper=this.paper,this},e.insertBefore=function(e){e=x(e);var t=this.parent();return e.node.parentNode.insertBefore(this.node,e.node),this.paper=e.paper,t&&t.add(),e.parent()&&e.parent().add(),this},e.insertAfter=function(e){e=x(e);var t=this.parent();return e.node.parentNode.insertBefore(this.node,e.node.nextSibling),this.paper=e.paper,t&&t.add(),e.parent()&&e.parent().add(),this},e.remove=function(){var e=this.parent();return this.node.parentNode&&this.node.parentNode.removeChild(this.node),delete this.paper,this.removed=!0,e&&e.add(),this},e.select=function(e){return x(this.node.querySelector(e))},e.selectAll=function(e){for(var t=this.node.querySelectorAll(e),r=(o.set||Array)(),n=0;n<t.length;n++)r.push(x(t[n]));return r},e.asPX=function(e,t){return null==t&&(t=this.attr(e)),+_(this,e,t)},e.use=function(){var e,t=this.node.id;return t||(t=this.id,n(this.node,{id:t})),n((e="linearGradient"==this.type||"radialGradient"==this.type||"pattern"==this.type?b(this.type,this.node.parentNode):b("use",this.node.parentNode)).node,{"xlink:href":"#"+t}),e.original=this,e},e.clone=function(){var e=x(this.node.cloneNode(!0));return n(e.node,"id")&&n(e.node,{id:e.id}),function(e){function t(e,t){var r=n(e.node,t);(r=(r=r&&r.match(s))&&r[2])&&"#"==r.charAt()&&(r=r.substring(1))&&(l[r]=(l[r]||[]).concat(function(r){var o={};o[t]=oe(r),n(e.node,o)}))}function r(e){var t=n(e.node,"xlink:href");t&&"#"==t.charAt()&&(t=t.substring(1))&&(l[t]=(l[t]||[]).concat(function(t){e.attr("xlink:href","#"+t)}))}for(var o,a=e.selectAll("*"),s=/^\s*url\(("|'|)(.*)\1\)\s*$/,i=[],l={},c=0,u=a.length;u>c;c++){t(o=a[c],"fill"),t(o,"stroke"),t(o,"filter"),t(o,"mask"),t(o,"clip-path"),r(o);var h=n(o.node,"id");h&&(n(o.node,{id:o.id}),i.push({old:h,id:o.id}))}for(c=0,u=i.length;u>c;c++){var d=l[i[c].old];if(d)for(var f=0,_=d.length;_>f;f++)d[f](i[c].id)}}(e),e.insertAfter(this),e},e.toDefs=function(){return f(this).appendChild(this.node),this},e.pattern=function(e,t,r,o){var s=b("pattern",f(this));return null==e&&(e=this.getBBox()),a(e,"object")&&"x"in e&&(t=e.y,r=e.width,o=e.height,e=e.x),n(s.node,{x:e,y:t,width:r,height:o,patternUnits:"userSpaceOnUse",id:s.id,viewBox:[e,t,r,o].join(" ")}),s.node.appendChild(this.node),s},e.marker=function(e,t,r,o,s,i){var l=b("marker",f(this));return null==e&&(e=this.getBBox()),a(e,"object")&&"x"in e&&(t=e.y,r=e.width,o=e.height,s=e.refX||e.cx,i=e.refY||e.cy,e=e.x),n(l.node,{viewBox:[e,t,r,o].join(" "),markerWidth:r,markerHeight:o,orient:"auto",refX:s||0,refY:i||0,id:l.id}),l.node.appendChild(this.node),l};var u=function(e,t,o,n){"function"!=typeof o||o.length||(n=o,o=r.linear),this.attr=e,this.dur=t,o&&(this.easing=o),n&&(this.callback=n)};o.animation=function(e,t,r,o){return new u(e,t,r,o)},e.inAnim=function(){var e=this,t=[];for(var r in e.anims)e.anims[B](r)&&function(e){t.push({anim:new u(e._attrs,e.dur,e.easing,e._callback),curStatus:e.status(),status:function(t){return e.status(t)},stop:function(){e.stop()}})}(e.anims[r]);return t},o.animate=function(e,o,n,a,s,i){"function"!=typeof s||s.length||(i=s,s=r.linear);var l=r.time(),c=r(e,o,l,l+a,r.time,n,s);return i&&t.once("mina.finish."+c.id,i),c},e.stop=function(){for(var e=this.inAnim(),t=0,r=e.length;r>t;t++)e[t].stop();return this},e.animate=function(e,o,n,i){"function"!=typeof n||n.length||(i=n,n=r.linear),e instanceof u&&(i=e.callback,o=(n=e.easing).dur,e=e.attr);var l,c,h,d,f=[],_=[],p={},g=this;for(var m in e)if(e[B](m)){g.equal?(l=(d=g.equal(m,j(e[m]))).from,c=d.to,h=d.f):(l=+g.attr(m),c=+e[m]);var y=a(l,"array")?l.length:1;p[m]=s(f.length,f.length+y,h),f=f.concat(l),_=_.concat(c)}var v=r.time(),b=r(f,_,v,v+o,r.time,function(e){var t={};for(var r in p)p[B](r)&&(t[r]=p[r](e));g.attr(t)},n);return g.anims[b.id]=b,b._attrs=e,b._callback=i,t.once("mina.finish."+b.id,function(){delete g.anims[b.id],i&&i.call(g)}),t.once("mina.stop."+b.id,function(){delete g.anims[b.id]}),g};var h={};e.data=function(e,r){var n=h[this.id]=h[this.id]||{};if(0==arguments.length)return t("snap.data.get."+this.id,this,n,null),n;if(1==arguments.length){if(o.is(e,"object")){for(var a in e)e[B](a)&&this.data(a,e[a]);return this}return t("snap.data.get."+this.id,this,n[e],e),n[e]}return n[e]=r,t("snap.data.set."+this.id,this,r,e),this},e.removeData=function(e){return null==e?h[this.id]={}:h[this.id]&&delete h[this.id][e],this},e.outerSVG=e.toString=i(1),e.innerSVG=i()}(m.prototype),o.parse=function(e){var t=A.doc.createDocumentFragment(),r=!0,o=A.doc.createElement("div");if((e=j(e)).match(/^\s*<\s*svg(?:\s|>)/)||(e="<svg>"+e+"</svg>",r=!1),o.innerHTML=e,e=o.getElementsByTagName("svg")[0])if(r)t=e;else for(;e.firstChild;)t.appendChild(e.firstChild);return o.innerHTML=D,new v(t)},v.prototype.select=m.prototype.select,v.prototype.selectAll=m.prototype.selectAll,o.fragment=function(){for(var e=Array.prototype.slice.call(arguments,0),t=A.doc.createDocumentFragment(),r=0,n=e.length;n>r;r++){var a=e[r];a.node&&a.node.nodeType&&t.appendChild(a.node),a.nodeType&&t.appendChild(a),"string"==typeof a&&t.appendChild(o.parse(a).node)}return new v(t)},function(e){e.el=function(e,t){return b(e,this.node).attr(t)},e.rect=function(e,t,r,o,n,s){var i;return null==s&&(s=n),a(e,"object")&&"x"in e?i=e:null!=e&&(i={x:e,y:t,width:r,height:o},null!=n&&(i.rx=n,i.ry=s)),this.el("rect",i)},e.circle=function(e,t,r){var o;return a(e,"object")&&"cx"in e?o=e:null!=e&&(o={cx:e,cy:t,r:r}),this.el("circle",o)},e.image=function(e,t,r,o,s){var i=b("image",this.node);if(a(e,"object")&&"src"in e)i.attr(e);else if(null!=e){var l={"xlink:href":e,preserveAspectRatio:"none"};null!=t&&null!=r&&(l.x=t,l.y=r),null!=o&&null!=s?(l.width=o,l.height=s):ne(e,function(){n(i.node,{width:this.offsetWidth,height:this.offsetHeight})}),n(i.node,l)}return i},e.ellipse=function(e,t,r,o){var n=b("ellipse",this.node);return a(e,"object")&&"cx"in e?n.attr(e):null!=e&&n.attr({cx:e,cy:t,rx:r,ry:o}),n},e.path=function(e){var t=b("path",this.node);return a(e,"object")&&!a(e,"array")?t.attr(e):e&&t.attr({d:e}),t},e.group=e.g=function(t){var r=b("g",this.node);for(var o in r.add=p,e)e[B](o)&&(r[o]=e[o]);return 1==arguments.length&&t&&!t.type?r.attr(t):arguments.length&&r.add(Array.prototype.slice.call(arguments,0)),r},e.text=function(e,t,r){var o=b("text",this.node);return a(e,"object")?o.attr(e):null!=e&&o.attr({x:e,y:t,text:r||""}),o},e.line=function(e,t,r,o){var n=b("line",this.node);return a(e,"object")?n.attr(e):null!=e&&n.attr({x1:e,x2:r,y1:t,y2:o}),n},e.polyline=function(e){arguments.length>1&&(e=Array.prototype.slice.call(arguments,0));var t=b("polyline",this.node);return a(e,"object")&&!a(e,"array")?t.attr(e):null!=e&&t.attr({points:e}),t},e.polygon=function(e){arguments.length>1&&(e=Array.prototype.slice.call(arguments,0));var t=b("polygon",this.node);return a(e,"object")&&!a(e,"array")?t.attr(e):null!=e&&t.attr({points:e}),t},e.gradient=function(e){return L(this.defs,e)},e.gradientLinear=function(e,t,r,o){return q(this.defs,e,t,r,o)},e.gradientRadial=function(e,t,r,o,n){return E(this.defs,e,t,r,o,n)},e.toString=function(){var e,t=A.doc.createDocumentFragment(),r=A.doc.createElement("div"),o=this.node.cloneNode(!0);return t.appendChild(r),r.appendChild(o),n(o,{xmlns:te}),e=r.innerHTML,t.removeChild(t.firstChild),e},e.clear=function(){for(var e,t=this.node.firstChild;t;)e=t.nextSibling,"defs"!=t.tagName&&t.parentNode.removeChild(t),t=e}}(w.prototype),o.ajax=function(e,r,o,n){var s=new XMLHttpRequest,i=K();if(s){if(a(r,"function"))n=o,o=r,r=null;else if(a(r,"object")){var l=[];for(var c in r)r.hasOwnProperty(c)&&l.push(encodeURIComponent(c)+"="+encodeURIComponent(r[c]));r=l.join("&")}return s.open(r?"POST":"GET",e,!0),s.setRequestHeader("X-Requested-With","XMLHttpRequest"),r&&s.setRequestHeader("Content-type","application/x-www-form-urlencoded"),o&&(t.once("snap.ajax."+i+".0",o),t.once("snap.ajax."+i+".200",o),t.once("snap.ajax."+i+".304",o)),s.onreadystatechange=function(){4==s.readyState&&t("snap.ajax."+i+"."+s.status,n,s)},4==s.readyState?s:(s.send(r),s)}},o.load=function(e,t,r){o.ajax(e,function(e){var n=o.parse(e.responseText);r?t.call(r,n):t(n)})},t.on("snap.util.attr.mask",function(e){if(e instanceof m||e instanceof v){if(t.stop(),e instanceof v&&1==e.node.childNodes.length&&(e=e.node.firstChild,f(this).appendChild(e),e=x(e)),"mask"==e.type)var r=e;else(r=b("mask",f(this))).node.appendChild(e.node),!r.node.id&&n(r.node,{id:r.id});n(this.node,{mask:oe(r.id)})}}),function(e){t.on("snap.util.attr.clip",e),t.on("snap.util.attr.clip-path",e),t.on("snap.util.attr.clipPath",e)}(function(e){if(e instanceof m||e instanceof v){if(t.stop(),"clipPath"==e.type)var r=e;else(r=b("clipPath",f(this))).node.appendChild(e.node),!r.node.id&&n(r.node,{id:r.id});n(this.node,{"clip-path":oe(r.id)})}}),t.on("snap.util.attr.fill",F("fill")),t.on("snap.util.attr.stroke",F("stroke"));var fe=/^([lr])(?:\(([^)]*)\))?(.*)$/i;t.on("snap.util.grad.parse",function(e){var t=(e=j(e)).match(fe);if(!t)return null;var r=t[1],o=t[2],n=t[3];return 1==(o=o.split(/\s*,\s*/).map(function(e){return+e==e?+e:e})).length&&0==o[0]&&(o=[]),{type:r,params:o,stops:n=(n=n.split("-")).map(function(e){var t={color:(e=e.split(":"))[0]};return e[1]&&(t.offset=e[1]),t})}}),t.on("snap.util.attr.d",function(e){t.stop(),a(e,"array")&&a(e[0],"array")&&(e=o.path.toString.call(e)),(e=j(e)).match(/[ruo]/i)&&(e=o.path.toAbsolute(e)),n(this.node,{d:e})})(-1),t.on("snap.util.attr.#text",function(e){t.stop(),e=j(e);for(var r=A.doc.createTextNode(e);this.node.firstChild;)this.node.removeChild(this.node.firstChild);this.node.appendChild(r)})(-1),t.on("snap.util.attr.path",function(e){t.stop(),this.attr({d:e})})(-1),t.on("snap.util.attr.viewBox",function(e){var r;r=a(e,"object")&&"x"in e?[e.x,e.y,e.width,e.height].join(" "):a(e,"array")?e.join(" "):e,n(this.node,{viewBox:r}),t.stop()})(-1),t.on("snap.util.attr.transform",function(e){this.transform(e),t.stop()})(-1),t.on("snap.util.attr.r",function(e){"rect"==this.type&&(t.stop(),n(this.node,{rx:e,ry:e}))})(-1),t.on("snap.util.attr.textpath",function(e){if(t.stop(),"text"==this.type){var r,o,s;if(!e&&this.textPath){for(o=this.textPath;o.node.firstChild;)this.node.appendChild(o.node.firstChild);return o.remove(),void delete this.textPath}if(a(e,"string")){var i=f(this),l=x(i.parentNode).path(e);i.appendChild(l.node),r=l.id,l.attr({id:r})}else(e=x(e))instanceof m&&((r=e.attr("id"))||(r=e.id,e.attr({id:r})));if(r)if(o=this.textPath,s=this.node,o)o.attr({"xlink:href":"#"+r});else{for(o=n("textPath",{"xlink:href":"#"+r});s.firstChild;)o.appendChild(s.firstChild);s.appendChild(o),this.textPath=x(o)}}})(-1),t.on("snap.util.attr.text",function(e){if("text"==this.type){for(var r=this.node,o=function(e){var t=n("tspan");if(a(e,"array"))for(var r=0;r<e.length;r++)t.appendChild(o(e[r]));else t.appendChild(A.doc.createTextNode(e));return t.normalize&&t.normalize(),t};r.firstChild;)r.removeChild(r.firstChild);for(var s=o(e);s.firstChild;)r.appendChild(s.firstChild)}t.stop()})(-1);var _e={"alignment-baseline":0,"baseline-shift":0,clip:0,"clip-path":0,"clip-rule":0,color:0,"color-interpolation":0,"color-interpolation-filters":0,"color-profile":0,"color-rendering":0,cursor:0,direction:0,display:0,"dominant-baseline":0,"enable-background":0,fill:0,"fill-opacity":0,"fill-rule":0,filter:0,"flood-color":0,"flood-opacity":0,font:0,"font-family":0,"font-size":0,"font-size-adjust":0,"font-stretch":0,"font-style":0,"font-variant":0,"font-weight":0,"glyph-orientation-horizontal":0,"glyph-orientation-vertical":0,"image-rendering":0,kerning:0,"letter-spacing":0,"lighting-color":0,marker:0,"marker-end":0,"marker-mid":0,"marker-start":0,mask:0,opacity:0,overflow:0,"pointer-events":0,"shape-rendering":0,"stop-color":0,"stop-opacity":0,stroke:0,"stroke-dasharray":0,"stroke-dashoffset":0,"stroke-linecap":0,"stroke-linejoin":0,"stroke-miterlimit":0,"stroke-opacity":0,"stroke-width":0,"text-anchor":0,"text-decoration":0,"text-rendering":0,"unicode-bidi":0,visibility:0,"word-spacing":0,"writing-mode":0};t.on("snap.util.attr",function(e){var r=t.nt(),o={};o[r=r.substring(r.lastIndexOf(".")+1)]=e;var a=r.replace(/-(\w)/gi,function(e,t){return t.toUpperCase()}),s=r.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()});_e[B](s)?this.node.style[a]=null==e?D:e:n(this.node,o)}),t.on("snap.util.getattr.transform",function(){return t.stop(),this.transform()})(-1),t.on("snap.util.getattr.textpath",function(){return t.stop(),this.textPath})(-1),function(){function e(e){return function(){t.stop();var r=A.doc.defaultView.getComputedStyle(this.node,null).getPropertyValue("marker-"+e);return"none"==r?r:o(A.doc.getElementById(r.match(R)[1]))}}function r(e){return function(r){t.stop();var o="marker"+e.charAt(0).toUpperCase()+e.substring(1);if(""!=r&&r){if("marker"==r.type){var a=r.node.id;return a||n(r.node,{id:r.id}),void(this.node.style[o]=oe(a))}}else this.node.style[o]="none"}}t.on("snap.util.getattr.marker-end",e("end"))(-1),t.on("snap.util.getattr.markerEnd",e("end"))(-1),t.on("snap.util.getattr.marker-start",e("start"))(-1),t.on("snap.util.getattr.markerStart",e("start"))(-1),t.on("snap.util.getattr.marker-mid",e("mid"))(-1),t.on("snap.util.getattr.markerMid",e("mid"))(-1),t.on("snap.util.attr.marker-end",r("end"))(-1),t.on("snap.util.attr.markerEnd",r("end"))(-1),t.on("snap.util.attr.marker-start",r("start"))(-1),t.on("snap.util.attr.markerStart",r("start"))(-1),t.on("snap.util.attr.marker-mid",r("mid"))(-1),t.on("snap.util.attr.markerMid",r("mid"))(-1)}(),t.on("snap.util.getattr.r",function(){return"rect"==this.type&&n(this.node,"rx")==n(this.node,"ry")?(t.stop(),n(this.node,"rx")):void 0})(-1),t.on("snap.util.getattr.text",function(){if("text"==this.type||"tspan"==this.type){t.stop();var e=function e(t){for(var r=[],o=t.childNodes,n=0,a=o.length;a>n;n++){var s=o[n];3==s.nodeType&&r.push(s.nodeValue),"tspan"==s.tagName&&(1==s.childNodes.length&&3==s.firstChild.nodeType?r.push(s.firstChild.nodeValue):r.push(e(s)))}return r}(this.node);return 1==e.length?e[0]:e}})(-1),t.on("snap.util.getattr.#text",function(){return this.node.textContent})(-1),t.on("snap.util.getattr.viewBox",function(){t.stop();var e=n(this.node,"viewBox").split(V);return o._.box(+e[0],+e[1],+e[2],+e[3])})(-1),t.on("snap.util.getattr.points",function(){var e=n(this.node,"points");return t.stop(),e.split(V)}),t.on("snap.util.getattr.path",function(){var e=n(this.node,"d");return t.stop(),e}),t.on("snap.util.getattr",function(){var e=t.nt(),r=(e=e.substring(e.lastIndexOf(".")+1)).replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()});return _e[B](r)?A.doc.defaultView.getComputedStyle(this.node,null).getPropertyValue(r):n(this.node,e)});var pe=function(e){var t=e.getBoundingClientRect(),r=e.ownerDocument,o=r.body,n=r.documentElement,a=n.clientTop||o.clientTop||0,s=n.clientLeft||o.clientLeft||0;return{y:t.top+(g.win.pageYOffset||n.scrollTop||o.scrollTop)-a,x:t.left+(g.win.pageXOffset||n.scrollLeft||o.scrollLeft)-s}};return o.getElementByPoint=function(e,t){var r=(this.canvas,A.doc.elementFromPoint(e,t));if(A.win.opera&&"svg"==r.tagName){var o=pe(r),n=r.createSVGRect();n.x=e-o.x,n.y=t-o.y,n.width=n.height=1;var a=r.getIntersectionList(n,null);a.length&&(r=a[a.length-1])}return r?x(r):null},o.plugin=function(e){e(o,m,w,A)},A.win.Snap=o,o}();return o.plugin(function(e,t){function r(e){var t=r.ps=r.ps||{};return t[e]?t[e].sleep=100:t[e]={sleep:100},setTimeout(function(){for(var r in t)t[B](r)&&r!=e&&(t[r].sleep--,!t[r].sleep&&delete t[r])}),t[e]}function o(e,t,r,o){return null==e&&(e=t=r=o=0),null==t&&(t=e.y,r=e.width,o=e.height,e=e.x),{x:e,y:t,width:r,w:r,height:o,h:o,x2:e+r,y2:t+o,cx:e+r/2,cy:t+o/2,r1:M.min(r,o)/2,r2:M.max(r,o)/2,r0:M.sqrt(r*r+o*o)/2,path:y(e,t,r,o),vb:[e,t,r,o].join(" ")}}function n(){return this.join(",").replace(j,"$1")}function a(e){var t=A(e);return t.toString=n,t}function s(e,t,r,o,n,a,s,i,c){return null==c?f(e,t,r,o,n,a,s,i):l(e,t,r,o,n,a,s,i,function(e,t,r,o,n,a,s,i,l){if(!(0>l||f(e,t,r,o,n,a,s,i)<l)){var c,u=.5,h=1-u;for(c=f(e,t,r,o,n,a,s,i,h);U(c-l)>.01;)u/=2,c=f(e,t,r,o,n,a,s,i,h+=(l>c?1:-1)*u);return h}}(e,t,r,o,n,a,s,i,c))}function i(r,o){function n(e){return+(+e).toFixed(3)}return e._.cacher(function(e,a,i){e instanceof t&&(e=e.attr("d"));for(var c,u,h,d,f,_="",p={},g=0,m=0,y=(e=L(e)).length;y>m;m++){if("M"==(h=e[m])[0])c=+h[1],u=+h[2];else{if(g+(d=s(c,u,h[1],h[2],h[3],h[4],h[5],h[6]))>a){if(o&&!p.start){if(_+=["C"+n((f=s(c,u,h[1],h[2],h[3],h[4],h[5],h[6],a-g)).start.x),n(f.start.y),n(f.m.x),n(f.m.y),n(f.x),n(f.y)],i)return _;p.start=_,_=["M"+n(f.x),n(f.y)+"C"+n(f.n.x),n(f.n.y),n(f.end.x),n(f.end.y),n(h[5]),n(h[6])].join(),g+=d,c=+h[5],u=+h[6];continue}if(!r&&!o)return s(c,u,h[1],h[2],h[3],h[4],h[5],h[6],a-g)}g+=d,c=+h[5],u=+h[6]}_+=h.shift()+h}return p.end=_,r?g:o?p:l(c,u,h[0],h[1],h[2],h[3],h[4],h[5],1)},null,e._.clone)}function l(e,t,r,o,n,a,s,i,l){var c=1-l,u=I(c,3),h=I(c,2),d=l*l,f=d*l,_=e+2*l*(r-e)+d*(n-2*r+e),p=t+2*l*(o-t)+d*(a-2*o+t),g=r+2*l*(n-r)+d*(s-2*n+r),m=o+2*l*(a-o)+d*(i-2*a+o);return{x:u*e+3*h*l*r+3*c*l*l*n+f*s,y:u*t+3*h*l*o+3*c*l*l*a+f*i,m:{x:_,y:p},n:{x:g,y:m},start:{x:c*e+l*r,y:c*t+l*o},end:{x:c*n+l*s,y:c*a+l*i},alpha:90-180*M.atan2(_-g,p-m)/O}}function c(t,r,n,a,s,i,l,c){e.is(t,"array")||(t=[t,r,n,a,s,i,l,c]);var u=C.apply(null,t);return o(u.min.x,u.min.y,u.max.x-u.min.x,u.max.y-u.min.y)}function u(e,t,r){return t>=e.x&&t<=e.x+e.width&&r>=e.y&&r<=e.y+e.height}function h(e,t){return e=o(e),u(t=o(t),e.x,e.y)||u(t,e.x2,e.y)||u(t,e.x,e.y2)||u(t,e.x2,e.y2)||u(e,t.x,t.y)||u(e,t.x2,t.y)||u(e,t.x,t.y2)||u(e,t.x2,t.y2)||(e.x<t.x2&&e.x>t.x||t.x<e.x2&&t.x>e.x)&&(e.y<t.y2&&e.y>t.y||t.y<e.y2&&t.y>e.y)}function d(e,t,r,o,n){return e*(e*(-3*t+9*r-9*o+3*n)+6*t-12*r+6*o)-3*t+3*r}function f(e,t,r,o,n,a,s,i,l){null==l&&(l=1);for(var c=(l=l>1?1:0>l?0:l)/2,u=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],h=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],f=0,_=0;12>_;_++){var p=c*u[_]+c,g=d(p,e,r,n,s),m=d(p,t,o,a,i),y=g*g+m*m;f+=h[_]*M.sqrt(y)}return c*f}function _(e,t,r,o,n,a,s,i){if(!(P(e,r)<N(n,s)||N(e,r)>P(n,s)||P(t,o)<N(a,i)||N(t,o)>P(a,i))){var l=(e-r)*(a-i)-(t-o)*(n-s);if(l){var c=((e*o-t*r)*(n-s)-(e-r)*(n*i-a*s))/l,u=((e*o-t*r)*(a-i)-(t-o)*(n*i-a*s))/l,h=+c.toFixed(2),d=+u.toFixed(2);if(!(h<+N(e,r).toFixed(2)||h>+P(e,r).toFixed(2)||h<+N(n,s).toFixed(2)||h>+P(n,s).toFixed(2)||d<+N(t,o).toFixed(2)||d>+P(t,o).toFixed(2)||d<+N(a,i).toFixed(2)||d>+P(a,i).toFixed(2)))return{x:c,y:u}}}}function p(e,t,r){if(!h(c(e),c(t)))return r?0:[];for(var o=~~(f.apply(0,e)/5),n=~~(f.apply(0,t)/5),a=[],s=[],i={},u=r?0:[],d=0;o+1>d;d++){var p=l.apply(0,e.concat(d/o));a.push({x:p.x,y:p.y,t:d/o})}for(d=0;n+1>d;d++)p=l.apply(0,t.concat(d/n)),s.push({x:p.x,y:p.y,t:d/n});for(d=0;o>d;d++)for(var g=0;n>g;g++){var m=a[d],y=a[d+1],v=s[g],b=s[g+1],w=U(y.x-m.x)<.001?"y":"x",x=U(b.x-v.x)<.001?"y":"x",k=_(m.x,m.y,y.x,y.y,v.x,v.y,b.x,b.y);if(k){if(i[k.x.toFixed(4)]==k.y.toFixed(4))continue;i[k.x.toFixed(4)]=k.y.toFixed(4);var S=m.t+U((k[w]-m[w])/(y[w]-m[w]))*(y.t-m.t),C=v.t+U((k[x]-v[x])/(b[x]-v[x]))*(b.t-v.t);S>=0&&1>=S&&C>=0&&1>=C&&(r?u++:u.push({x:k.x,y:k.y,t1:S,t2:C}))}}return u}function g(e,t,r){e=L(e),t=L(t);for(var o,n,a,s,i,l,c,u,h,d,f=r?0:[],_=0,g=e.length;g>_;_++){var m=e[_];if("M"==m[0])o=i=m[1],n=l=m[2];else{"C"==m[0]?(o=(h=[o,n].concat(m.slice(1)))[6],n=h[7]):(h=[o,n,o,n,i,l,i,l],o=i,n=l);for(var y=0,v=t.length;v>y;y++){var b=t[y];if("M"==b[0])a=c=b[1],s=u=b[2];else{"C"==b[0]?(a=(d=[a,s].concat(b.slice(1)))[6],s=d[7]):(d=[a,s,a,s,c,u,c,u],a=c,s=u);var w=p(h,d,r);if(r)f+=w;else{for(var x=0,k=w.length;k>x;x++)w[x].segment1=_,w[x].segment2=y,w[x].bez1=h,w[x].bez2=d;f=f.concat(w)}}}}}return f}function m(e){var t=r(e);if(t.bbox)return A(t.bbox);if(!e)return o();for(var n,a=0,s=0,i=[],l=[],c=0,u=(e=L(e)).length;u>c;c++)if("M"==(n=e[c])[0])a=n[1],s=n[2],i.push(a),l.push(s);else{var h=C(a,s,n[1],n[2],n[3],n[4],n[5],n[6]);i=i.concat(h.min.x,h.max.x),l=l.concat(h.min.y,h.max.y),a=n[5],s=n[6]}var d=N.apply(0,i),f=N.apply(0,l),_=o(d,f,P.apply(0,i)-d,P.apply(0,l)-f);return t.bbox=A(_),_}function y(e,t,r,o,a){if(a)return[["M",e+a,t],["l",r-2*a,0],["a",a,a,0,0,1,a,a],["l",0,o-2*a],["a",a,a,0,0,1,-a,a],["l",2*a-r,0],["a",a,a,0,0,1,-a,-a],["l",0,2*a-o],["a",a,a,0,0,1,a,-a],["z"]];var s=[["M",e,t],["l",r,0],["l",0,o],["l",-r,0],["z"]];return s.toString=n,s}function v(e,t,r,o,a){if(null==a&&null==o&&(o=r),null!=a)var s=Math.PI/180,i=e+r*Math.cos(-o*s),l=e+r*Math.cos(-a*s),c=[["M",i,t+r*Math.sin(-o*s)],["A",r,r,0,+(a-o>180),0,l,t+r*Math.sin(-a*s)]];else c=[["M",e,t],["m",0,-o],["a",r,o,0,1,1,0,2*o],["a",r,o,0,1,1,0,-2*o],["z"]];return c.toString=n,c}function b(t){var o=r(t);if(o.abs)return a(o.abs);if(F(t,"array")&&F(t&&t[0],"array")||(t=e.parsePathString(t)),!t||!t.length)return[["M",0,0]];var s,i=[],l=0,c=0,u=0,h=0,d=0;"M"==t[0][0]&&(u=l=+t[0][1],h=c=+t[0][2],d++,i[0]=["M",l,c]);for(var f,_,p=3==t.length&&"M"==t[0][0]&&"R"==t[1][0].toUpperCase()&&"Z"==t[2][0].toUpperCase(),g=d,m=t.length;m>g;g++){if(i.push(f=[]),(s=(_=t[g])[0])!=s.toUpperCase())switch(f[0]=s.toUpperCase(),f[0]){case"A":f[1]=_[1],f[2]=_[2],f[3]=_[3],f[4]=_[4],f[5]=_[5],f[6]=+(_[6]+l),f[7]=+(_[7]+c);break;case"V":f[1]=+_[1]+c;break;case"H":f[1]=+_[1]+l;break;case"R":for(var y=[l,c].concat(_.slice(1)),b=2,w=y.length;w>b;b++)y[b]=+y[b]+l,y[++b]=+y[b]+c;i.pop(),i=i.concat(q(y,p));break;case"O":i.pop(),(y=v(l,c,_[1],_[2])).push(y[0]),i=i.concat(y);break;case"U":i.pop(),i=i.concat(v(l,c,_[1],_[2],_[3])),f=["U"].concat(i[i.length-1].slice(-2));break;case"M":u=+_[1]+l,h=+_[2]+c;default:for(b=1,w=_.length;w>b;b++)f[b]=+_[b]+(b%2?l:c)}else if("R"==s)y=[l,c].concat(_.slice(1)),i.pop(),i=i.concat(q(y,p)),f=["R"].concat(_.slice(-2));else if("O"==s)i.pop(),(y=v(l,c,_[1],_[2])).push(y[0]),i=i.concat(y);else if("U"==s)i.pop(),i=i.concat(v(l,c,_[1],_[2],_[3])),f=["U"].concat(i[i.length-1].slice(-2));else for(var x=0,k=_.length;k>x;x++)f[x]=_[x];if("O"!=(s=s.toUpperCase()))switch(f[0]){case"Z":l=u,c=h;break;case"H":l=f[1];break;case"V":c=f[1];break;case"M":u=f[f.length-2],h=f[f.length-1];default:l=f[f.length-2],c=f[f.length-1]}}return i.toString=n,o.abs=a(i),i}function w(e,t,r,o){return[e,t,r,o,r,o]}function x(e,t,r,o,n,a){var s=1/3,i=2/3;return[s*e+i*r,s*t+i*o,s*n+i*r,s*a+i*o,n,a]}function k(t,r,o,n,a,s,i,l,c,u){var h,d=120*O/180,f=O/180*(+a||0),_=[],p=e._.cacher(function(e,t,r){return{x:e*M.cos(r)-t*M.sin(r),y:e*M.sin(r)+t*M.cos(r)}});if(u)C=u[0],L=u[1],x=u[2],S=u[3];else{t=(h=p(t,r,-f)).x,r=h.y,l=(h=p(l,c,-f)).x,c=h.y;var g=(M.cos(O/180*a),M.sin(O/180*a),(t-l)/2),m=(r-c)/2,y=g*g/(o*o)+m*m/(n*n);y>1&&(o*=y=M.sqrt(y),n*=y);var v=o*o,b=n*n,w=(s==i?-1:1)*M.sqrt(U((v*b-v*m*m-b*g*g)/(v*m*m+b*g*g))),x=w*o*m/n+(t+l)/2,S=w*-n*g/o+(r+c)/2,C=M.asin(((r-S)/n).toFixed(9)),L=M.asin(((c-S)/n).toFixed(9));C=x>t?O-C:C,L=x>l?O-L:L,0>C&&(C=2*O+C),0>L&&(L=2*O+L),i&&C>L&&(C-=2*O),!i&&L>C&&(L-=2*O)}var q=L-C;if(U(q)>d){var E=L,F=l,A=c;L=C+d*(i&&L>C?1:-1),_=k(l=x+o*M.cos(L),c=S+n*M.sin(L),o,n,a,0,i,F,A,[L,E,x,S])}q=L-C;var B=M.cos(C),j=M.sin(C),T=M.cos(L),N=M.sin(L),P=M.tan(q/4),I=4/3*o*P,D=4/3*n*P,H=[t,r],z=[t+I*j,r-D*B],R=[l+I*N,c-D*T],G=[l,c];if(z[0]=2*H[0]-z[0],z[1]=2*H[1]-z[1],u)return[z,R,G].concat(_);for(var V=[],X=0,Y=(_=[z,R,G].concat(_).join().split(",")).length;Y>X;X++)V[X]=X%2?p(_[X-1],_[X],f).y:p(_[X],_[X+1],f).x;return V}function S(e,t,r,o,n,a,s,i,l){var c=1-l;return{x:I(c,3)*e+3*I(c,2)*l*r+3*c*l*l*n+I(l,3)*s,y:I(c,3)*t+3*I(c,2)*l*o+3*c*l*l*a+I(l,3)*i}}function C(e,t,r,o,n,a,s,i){var l,c=n-2*r+e-(s-2*n+r),u=2*(r-e)-2*(n-r),h=e-r,d=(-u+M.sqrt(u*u-4*c*h))/2/c,f=(-u-M.sqrt(u*u-4*c*h))/2/c,_=[t,i],p=[e,s];return U(d)>"1e12"&&(d=.5),U(f)>"1e12"&&(f=.5),d>0&&1>d&&(l=S(e,t,r,o,n,a,s,i,d),p.push(l.x),_.push(l.y)),f>0&&1>f&&(l=S(e,t,r,o,n,a,s,i,f),p.push(l.x),_.push(l.y)),c=a-2*o+t-(i-2*a+o),h=t-o,d=(-(u=2*(o-t)-2*(a-o))+M.sqrt(u*u-4*c*h))/2/c,f=(-u-M.sqrt(u*u-4*c*h))/2/c,U(d)>"1e12"&&(d=.5),U(f)>"1e12"&&(f=.5),d>0&&1>d&&(l=S(e,t,r,o,n,a,s,i,d),p.push(l.x),_.push(l.y)),f>0&&1>f&&(l=S(e,t,r,o,n,a,s,i,f),p.push(l.x),_.push(l.y)),{min:{x:N.apply(0,p),y:N.apply(0,_)},max:{x:P.apply(0,p),y:P.apply(0,_)}}}function L(e,t){var o=!t&&r(e);if(!t&&o.curve)return a(o.curve);for(var n=b(e),s=t&&b(t),i={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},l={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},c=function(e,t){if(!e)return["C",t.x,t.y,t.x,t.y,t.x,t.y];switch(!(e[0]in{T:1,Q:1})&&(t.qx=t.qy=null),e[0]){case"M":t.X=e[1],t.Y=e[2];break;case"A":e=["C"].concat(k.apply(0,[t.x,t.y].concat(e.slice(1))));break;case"S":e=["C",t.x+(t.x-(t.bx||t.x)),t.y+(t.y-(t.by||t.y))].concat(e.slice(1));break;case"T":t.qx=t.x+(t.x-(t.qx||t.x)),t.qy=t.y+(t.y-(t.qy||t.y)),e=["C"].concat(x(t.x,t.y,t.qx,t.qy,e[1],e[2]));break;case"Q":t.qx=e[1],t.qy=e[2],e=["C"].concat(x(t.x,t.y,e[1],e[2],e[3],e[4]));break;case"L":e=["C"].concat(w(t.x,t.y,e[1],e[2]));break;case"H":e=["C"].concat(w(t.x,t.y,e[1],t.y));break;case"V":e=["C"].concat(w(t.x,t.y,t.x,e[1]));break;case"Z":e=["C"].concat(w(t.x,t.y,t.X,t.Y))}return e},u=function(e,t){if(e[t].length>7){e[t].shift();for(var r=e[t];r.length;)e.splice(t++,0,["C"].concat(r.splice(0,6)));e.splice(t,1),f=P(n.length,s&&s.length||0)}},h=function(e,t,r,o,a){e&&t&&"M"==e[a][0]&&"M"!=t[a][0]&&(t.splice(a,0,["M",o.x,o.y]),r.bx=0,r.by=0,r.x=e[a][1],r.y=e[a][2],f=P(n.length,s&&s.length||0))},d=0,f=P(n.length,s&&s.length||0);f>d;d++){n[d]=c(n[d],i),u(n,d),s&&(s[d]=c(s[d],l)),s&&u(s,d),h(n,s,i,l,d),h(s,n,l,i,d);var _=n[d],p=s&&s[d],g=_.length,m=s&&p.length;i.x=_[g-2],i.y=_[g-1],i.bx=T(_[g-4])||i.x,i.by=T(_[g-3])||i.y,l.bx=s&&(T(p[m-4])||l.x),l.by=s&&(T(p[m-3])||l.y),l.x=s&&p[m-2],l.y=s&&p[m-1]}return s||(o.curve=a(n)),s?[n,s]:n}function q(e,t){for(var r=[],o=0,n=e.length;n-2*!t>o;o+=2){var a=[{x:+e[o-2],y:+e[o-1]},{x:+e[o],y:+e[o+1]},{x:+e[o+2],y:+e[o+3]},{x:+e[o+4],y:+e[o+5]}];t?o?n-4==o?a[3]={x:+e[0],y:+e[1]}:n-2==o&&(a[2]={x:+e[0],y:+e[1]},a[3]={x:+e[2],y:+e[3]}):a[0]={x:+e[n-2],y:+e[n-1]}:n-4==o?a[3]=a[2]:o||(a[0]={x:+e[o],y:+e[o+1]}),r.push(["C",(-a[0].x+6*a[1].x+a[2].x)/6,(-a[0].y+6*a[1].y+a[2].y)/6,(a[1].x+6*a[2].x-a[3].x)/6,(a[1].y+6*a[2].y-a[3].y)/6,a[2].x,a[2].y])}return r}var E=t.prototype,F=e.is,A=e._.clone,B="hasOwnProperty",j=/,?([a-z]),?/gi,T=parseFloat,M=Math,O=M.PI,N=M.min,P=M.max,I=M.pow,U=M.abs,D=i(1),H=i(),z=i(0,1),R=e._unit2px,G={path:function(e){return e.attr("path")},circle:function(e){var t=R(e);return v(t.cx,t.cy,t.r)},ellipse:function(e){var t=R(e);return v(t.cx,t.cy,t.rx,t.ry)},rect:function(e){var t=R(e);return y(t.x,t.y,t.width,t.height,t.rx,t.ry)},image:function(e){var t=R(e);return y(t.x,t.y,t.width,t.height)},text:function(e){var t=e.node.getBBox();return y(t.x,t.y,t.width,t.height)},g:function(e){var t=e.node.getBBox();return y(t.x,t.y,t.width,t.height)},symbol:function(e){var t=e.getBBox();return y(t.x,t.y,t.width,t.height)},line:function(e){return"M"+[e.attr("x1"),e.attr("y1"),e.attr("x2"),e.attr("y2")]},polyline:function(e){return"M"+e.attr("points")},polygon:function(e){return"M"+e.attr("points")+"z"},svg:function(e){var t=e.node.getBBox();return y(t.x,t.y,t.width,t.height)},deflt:function(e){var t=e.node.getBBox();return y(t.x,t.y,t.width,t.height)}};e.path=r,e.path.getTotalLength=D,e.path.getPointAtLength=H,e.path.getSubpath=function(e,t,r){if(this.getTotalLength(e)-r<1e-6)return z(e,t).end;var o=z(e,r,1);return t?z(o,t).end:o},E.getTotalLength=function(){return this.node.getTotalLength?this.node.getTotalLength():void 0},E.getPointAtLength=function(e){return H(this.attr("d"),e)},E.getSubpath=function(t,r){return e.path.getSubpath(this.attr("d"),t,r)},e._.box=o,e.path.findDotsAtSegment=l,e.path.bezierBBox=c,e.path.isPointInsideBBox=u,e.path.isBBoxIntersect=h,e.path.intersection=function(e,t){return g(e,t)},e.path.intersectionNumber=function(e,t){return g(e,t,1)},e.path.isPointInside=function(e,t,r){var o=m(e);return u(o,t,r)&&1==g(e,[["M",t,r],["H",o.x2+10]],1)%2},e.path.getBBox=m,e.path.get=G,e.path.toRelative=function(t){var o=r(t),s=String.prototype.toLowerCase;if(o.rel)return a(o.rel);e.is(t,"array")&&e.is(t&&t[0],"array")||(t=e.parsePathString(t));var i=[],l=0,c=0,u=0,h=0,d=0;"M"==t[0][0]&&(u=l=t[0][1],h=c=t[0][2],d++,i.push(["M",l,c]));for(var f=d,_=t.length;_>f;f++){var p=i[f]=[],g=t[f];if(g[0]!=s.call(g[0]))switch(p[0]=s.call(g[0]),p[0]){case"a":p[1]=g[1],p[2]=g[2],p[3]=g[3],p[4]=g[4],p[5]=g[5],p[6]=+(g[6]-l).toFixed(3),p[7]=+(g[7]-c).toFixed(3);break;case"v":p[1]=+(g[1]-c).toFixed(3);break;case"m":u=g[1],h=g[2];default:for(var m=1,y=g.length;y>m;m++)p[m]=+(g[m]-(m%2?l:c)).toFixed(3)}else{p=i[f]=[],"m"==g[0]&&(u=g[1]+l,h=g[2]+c);for(var v=0,b=g.length;b>v;v++)i[f][v]=g[v]}var w=i[f].length;switch(i[f][0]){case"z":l=u,c=h;break;case"h":l+=+i[f][w-1];break;case"v":c+=+i[f][w-1];break;default:l+=+i[f][w-2],c+=+i[f][w-1]}}return i.toString=n,o.rel=a(i),i},e.path.toAbsolute=b,e.path.toCubic=L,e.path.map=function(e,t){if(!t)return e;var r,o,n,a,s,i,l;for(n=0,s=(e=L(e)).length;s>n;n++)for(a=1,i=(l=e[n]).length;i>a;a+=2)r=t.x(l[a],l[a+1]),o=t.y(l[a],l[a+1]),l[a]=r,l[a+1]=o;return e},e.path.toString=n,e.path.clone=a}),o.plugin(function(e){var t=Math.max,r=Math.min,o=function(e){if(this.items=[],this.length=0,this.type="set",e)for(var t=0,r=e.length;r>t;t++)e[t]&&(this[this.items.length]=this.items[this.items.length]=e[t],this.length++)},n=o.prototype;n.push=function(){for(var e,t,r=0,o=arguments.length;o>r;r++)(e=arguments[r])&&(this[t=this.items.length]=this.items[t]=e,this.length++);return this},n.pop=function(){return this.length&&delete this[this.length--],this.items.pop()},n.forEach=function(e,t){for(var r=0,o=this.items.length;o>r;r++)if(!1===e.call(t,this.items[r],r))return this;return this},n.remove=function(){for(;this.length;)this.pop().remove();return this},n.attr=function(e){for(var t=0,r=this.items.length;r>t;t++)this.items[t].attr(e);return this},n.clear=function(){for(;this.length;)this.pop()},n.splice=function(e,n){e=0>e?t(this.length+e,0):e,n=t(0,r(this.length-e,n));var a,s=[],i=[],l=[];for(a=2;a<arguments.length;a++)l.push(arguments[a]);for(a=0;n>a;a++)i.push(this[e+a]);for(;a<this.length-e;a++)s.push(this[e+a]);var c=l.length;for(a=0;a<c+s.length;a++)this.items[e+a]=this[e+a]=c>a?l[a]:s[a-c];for(a=this.items.length=this.length-=n-c;this[a];)delete this[a++];return new o(i)},n.exclude=function(e){for(var t=0,r=this.length;r>t;t++)if(this[t]==e)return this.splice(t,1),!0;return!1},n.insertAfter=function(e){for(var t=this.items.length;t--;)this.items[t].insertAfter(e);return this},n.getBBox=function(){for(var e=[],o=[],n=[],a=[],s=this.items.length;s--;)if(!this.items[s].removed){var i=this.items[s].getBBox();e.push(i.x),o.push(i.y),n.push(i.x+i.width),a.push(i.y+i.height)}return{x:e=r.apply(0,e),y:o=r.apply(0,o),x2:n=t.apply(0,n),y2:a=t.apply(0,a),width:n-e,height:a-o,cx:e+(n-e)/2,cy:o+(a-o)/2}},n.clone=function(e){e=new o;for(var t=0,r=this.items.length;r>t;t++)e.push(this.items[t].clone());return e},n.toString=function(){return"Snap‘s set"},n.type="set",e.set=function(){var e=new o;return arguments.length&&e.push.apply(e,Array.prototype.slice.call(arguments,0)),e}}),o.plugin(function(e,t){function r(e){var t=e[0];switch(t.toLowerCase()){case"t":return[t,0,0];case"m":return[t,1,0,0,1,0,0];case"r":return 4==e.length?[t,0,e[2],e[3]]:[t,0];case"s":return 5==e.length?[t,1,1,e[3],e[4]]:3==e.length?[t,1,1]:[t,1]}}function o(t,o,n){o=u(o).replace(/\.{3}|\u2026/g,t),t=e.parseTransformString(t)||[],o=e.parseTransformString(o)||[];for(var a,l,c,h,d=Math.max(t.length,o.length),f=[],_=[],p=0;d>p;p++){if(c=t[p]||r(o[p]),h=o[p]||r(c),c[0]!=h[0]||"r"==c[0].toLowerCase()&&(c[2]!=h[2]||c[3]!=h[3])||"s"==c[0].toLowerCase()&&(c[3]!=h[3]||c[4]!=h[4])){t=e._.transform2matrix(t,n()),o=e._.transform2matrix(o,n()),f=[["m",t.a,t.b,t.c,t.d,t.e,t.f]],_=[["m",o.a,o.b,o.c,o.d,o.e,o.f]];break}for(f[p]=[],_[p]=[],a=0,l=Math.max(c.length,h.length);l>a;a++)a in c&&(f[p][a]=c[a]),a in h&&(_[p][a]=h[a])}return{from:i(f),to:i(_),f:s(f)}}function n(e){return e}function a(t){return e.rgb(t[0],t[1],t[2])}function s(e){var t,r,o,n,a,s,i=0,l=[];for(t=0,r=e.length;r>t;t++){for(a="[",s=['"'+e[t][0]+'"'],o=1,n=e[t].length;n>o;o++)s[o]="val["+i+++"]";a+=s+"]",l[t]=a}return Function("val","return Snap.path.toString.call(["+l+"])")}function i(e){for(var t=[],r=0,o=e.length;o>r;r++)for(var n=1,a=e[r].length;a>n;n++)t.push(e[r][n]);return t}var l={},c=/[a-z]+$/i,u=String;l.stroke=l.fill="colour",t.prototype.equal=function(t,r){var h,d,f=u(this.attr(t)||""),_=this;if(f==+f&&r==+r)return{from:+f,to:+r,f:n};if("colour"==l[t])return h=e.color(f),d=e.color(r),{from:[h.r,h.g,h.b,h.opacity],to:[d.r,d.g,d.b,d.opacity],f:a};if("transform"==t||"gradientTransform"==t||"patternTransform"==t)return r instanceof e.Matrix&&(r=r.toTransformString()),e._.rgTransform.test(r)||(r=e._.svgTransform2string(r)),o(f,r,function(){return _.getBBox(1)});if("d"==t||"path"==t)return{from:i((h=e.path.toCubic(f,r))[0]),to:i(h[1]),f:s(h[0])};if("points"==t)return{from:h=u(f).split(","),to:d=u(r).split(","),f:function(e){return e}};var p=f.match(c),g=u(r).match(c);return p&&p==g?{from:parseFloat(f),to:parseFloat(r),f:function(e){return function(t){return+t.toFixed(3)+e}}(p)}:{from:this.asPX(t),to:this.asPX(t,r),f:n}}}),o.plugin(function(e,r,o,n){for(var a=r.prototype,s=("createTouch"in n.doc),i=["click","dblclick","mousedown","mousemove","mouseout","mouseover","mouseup","touchstart","touchmove","touchend","touchcancel"],l={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},c=function(e){var t="y"==e?"scrollTop":"scrollLeft";return n.doc.documentElement[t]||n.doc.body[t]},u=function(){this.returnValue=!1},h=function(){return this.originalEvent.preventDefault()},d=function(){this.cancelBubble=!0},f=function(){return this.originalEvent.stopPropagation()},_=n.doc.addEventListener?function(e,t,r,o){var n=s&&l[t]?l[t]:t,a=function(n){var a=c("y"),i=c("x");if(s&&l.hasOwnProperty(t))for(var u=0,d=n.targetTouches&&n.targetTouches.length;d>u;u++)if(n.targetTouches[u].target==e||e.contains(n.targetTouches[u].target)){var _=n;(n=n.targetTouches[u]).originalEvent=_,n.preventDefault=h,n.stopPropagation=f;break}var p=n.clientX+i,g=n.clientY+a;return r.call(o,n,p,g)};return t!==n&&e.addEventListener(t,a,!1),e.addEventListener(n,a,!1),function(){return t!==n&&e.removeEventListener(t,a,!1),e.removeEventListener(n,a,!1),!0}}:n.doc.attachEvent?function(e,t,r,o){var a=function(e){e=e||n.win.event;var t=c("y"),a=c("x"),s=e.clientX+a,i=e.clientY+t;return e.preventDefault=e.preventDefault||u,e.stopPropagation=e.stopPropagation||d,r.call(o,e,s,i)};return e.attachEvent("on"+t,a),function(){return e.detachEvent("on"+t,a),!0}}:void 0,p=[],g=function(r){for(var o,n=r.clientX,a=r.clientY,i=c("y"),l=c("x"),u=p.length;u--;){if(o=p[u],s){for(var h,d=r.touches&&r.touches.length;d--;)if((h=r.touches[d]).identifier==o.el._drag.id||o.el.node.contains(h.target)){n=h.clientX,a=h.clientY,(r.originalEvent?r.originalEvent:r).preventDefault();break}}else r.preventDefault();var f=o.el.node;e._.glob,f.nextSibling,f.parentNode,f.style.display,n+=l,a+=i,t("snap.drag.move."+o.el.id,o.move_scope||o.el,n-o.el._drag.x,a-o.el._drag.y,n,a,r)}},m=function(r){e.unmousemove(g).unmouseup(m);for(var o,n=p.length;n--;)(o=p[n]).el._drag={},t("snap.drag.end."+o.el.id,o.end_scope||o.start_scope||o.move_scope||o.el,r);p=[]},y=i.length;y--;)!function(t){e[t]=a[t]=function(r,o){return e.is(r,"function")&&(this.events=this.events||[],this.events.push({name:t,f:r,unbind:_(this.shape||this.node||n.doc,t,r,o||this)})),this},e["un"+t]=a["un"+t]=function(e){for(var r=this.events||[],o=r.length;o--;)if(r[o].name==t&&(r[o].f==e||!e))return r[o].unbind(),r.splice(o,1),!r.length&&delete this.events,this;return this}}(i[y]);a.hover=function(e,t,r,o){return this.mouseover(e,r).mouseout(t,o||r)},a.unhover=function(e,t){return this.unmouseover(e).unmouseout(t)};var v=[];a.drag=function(r,o,n,a,s,i){function l(l,c,u){(l.originalEvent||l).preventDefault(),this._drag.x=c,this._drag.y=u,this._drag.id=l.identifier,!p.length&&e.mousemove(g).mouseup(m),p.push({el:this,move_scope:a,start_scope:s,end_scope:i}),o&&t.on("snap.drag.start."+this.id,o),r&&t.on("snap.drag.move."+this.id,r),n&&t.on("snap.drag.end."+this.id,n),t("snap.drag.start."+this.id,s||a||this,c,u,l)}var c;return arguments.length?(this._drag={},v.push({el:this,start:l}),this.mousedown(l),this):this.drag(function(e,t){this.attr({transform:c+(c?"T":"t")+[e,t]})},function(){c=this.transform().local})},a.undrag=function(){for(var r=v.length;r--;)v[r].el==this&&(this.unmousedown(v[r].start),v.splice(r,1),t.unbind("snap.drag.*."+this.id));return!v.length&&e.unmousemove(g).unmouseup(m),this}}),o.plugin(function(e,r,o){var n=(r.prototype,o.prototype),a=/^\s*url\((.+)\)/,s=String,i=e._.$;e.filter={},n.filter=function(t){var o=this;"svg"!=o.type&&(o=o.paper);var n=e.parse(s(t)),a=e._.id(),l=(o.node.offsetWidth,o.node.offsetHeight,i("filter"));return i(l,{id:a,filterUnits:"userSpaceOnUse"}),l.appendChild(n.node),o.defs.appendChild(l),new r(l)},t.on("snap.util.getattr.filter",function(){t.stop();var r=i(this.node,"filter");if(r){var o=s(r).match(a);return o&&e.select(o[1])}}),t.on("snap.util.attr.filter",function(o){if(o instanceof r&&"filter"==o.type){t.stop();var n=o.node.id;n||(i(o.node,{id:o.id}),n=o.id),i(this.node,{filter:e.url(n)})}o&&"none"!=o||(t.stop(),this.node.removeAttribute("filter"))}),e.filter.blur=function(t,r){null==t&&(t=2);var o=null==r?t:[t,r];return e.format('<feGaussianBlur stdDeviation="{def}"/>',{def:o})},e.filter.blur.toString=function(){return this()},e.filter.shadow=function(t,r,o,n){return n=n||"#000",null==o&&(o=4),"string"==typeof o&&(n=o,o=4),null==t&&(t=0,r=2),null==r&&(r=t),n=e.color(n),e.format('<feGaussianBlur in="SourceAlpha" stdDeviation="{blur}"/><feOffset dx="{dx}" dy="{dy}" result="offsetblur"/><feFlood flood-color="{color}"/><feComposite in2="offsetblur" operator="in"/><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge>',{color:n,dx:t,dy:r,blur:o})},e.filter.shadow.toString=function(){return this()},e.filter.grayscale=function(t){return null==t&&(t=1),e.format('<feColorMatrix type="matrix" values="{a} {b} {c} 0 0 {d} {e} {f} 0 0 {g} {b} {h} 0 0 0 0 0 1 0"/>',{a:.2126+.7874*(1-t),b:.7152-.7152*(1-t),c:.0722-.0722*(1-t),d:.2126-.2126*(1-t),e:.7152+.2848*(1-t),f:.0722-.0722*(1-t),g:.2126-.2126*(1-t),h:.0722+.9278*(1-t)})},e.filter.grayscale.toString=function(){return this()},e.filter.sepia=function(t){return null==t&&(t=1),e.format('<feColorMatrix type="matrix" values="{a} {b} {c} 0 0 {d} {e} {f} 0 0 {g} {h} {i} 0 0 0 0 0 1 0"/>',{a:.393+.607*(1-t),b:.769-.769*(1-t),c:.189-.189*(1-t),d:.349-.349*(1-t),e:.686+.314*(1-t),f:.168-.168*(1-t),g:.272-.272*(1-t),h:.534-.534*(1-t),i:.131+.869*(1-t)})},e.filter.sepia.toString=function(){return this()},e.filter.saturate=function(t){return null==t&&(t=1),e.format('<feColorMatrix type="saturate" values="{amount}"/>',{amount:1-t})},e.filter.saturate.toString=function(){return this()},e.filter.hueRotate=function(t){return t=t||0,e.format('<feColorMatrix type="hueRotate" values="{angle}"/>',{angle:t})},e.filter.hueRotate.toString=function(){return this()},e.filter.invert=function(t){return null==t&&(t=1),e.format('<feComponentTransfer><feFuncR type="table" tableValues="{amount} {amount2}"/><feFuncG type="table" tableValues="{amount} {amount2}"/><feFuncB type="table" tableValues="{amount} {amount2}"/></feComponentTransfer>',{amount:t,amount2:1-t})},e.filter.invert.toString=function(){return this()},e.filter.brightness=function(t){return null==t&&(t=1),e.format('<feComponentTransfer><feFuncR type="linear" slope="{amount}"/><feFuncG type="linear" slope="{amount}"/><feFuncB type="linear" slope="{amount}"/></feComponentTransfer>',{amount:t})},e.filter.brightness.toString=function(){return this()},e.filter.contrast=function(t){return null==t&&(t=1),e.format('<feComponentTransfer><feFuncR type="linear" slope="{amount}" intercept="{amount2}"/><feFuncG type="linear" slope="{amount}" intercept="{amount2}"/><feFuncB type="linear" slope="{amount}" intercept="{amount2}"/></feComponentTransfer>',{amount:t,amount2:.5-t/2})},e.filter.contrast.toString=function(){return this()}}),o});var maleForm1={Body_head:["default","diamond","heart","oblong","oval","round","square","triangle"],Ears:["default","elven","pointed","outstretched","plugged","unplugged"],Iris:["default"],Pupils:["round","feline","star"],Nose:["default","pointed","roman","strong","syrid"],Mouth:[""],Facialhair:["","beard_boxed","beard_ducktail","beard_guru","beard_intelectual","beard_rap","beard_raw","chinpuff","goatee","goatee_raw","moustache","moustache_dali","moustache_thick","muttonchops","muttonchops_friendly","soulpatch","winnfield"],Hair:["","afro","balding","balding_crazy","balding_crown","crewcut","down","emo","spider","gelled","wavy","manga","mohawk","wild","wreckingball"],Freckles:["","medium"],Emotion:["neutral","alertness","amusement","anger","anxiety","aversion","betrayal","caged","concern","cruel","dejection","desperation","disdain","disgust","eeww","fear","grief","horror","indignation","joy","laughing","melancholy","omg","outrage","pain","rage","revulsion","sadness","satisfaction","shock","sterness","surprise","terror","wonder","wtf"]},maleForm2={Smoke:["","cigar","pipe_subgenius"],Earings:["","gold_rings","gold_ring_right","gold_ring_left"],Hat:["","baseball","berret","berret_badge","cap","country","cowboy","fedora","fox-ears","jester","top","motorcycle","police","scumbag","helmet_vietnam","tuque","strainer","magritte","xmas"],Horns:["","devil","large"],Mask:["","guy_fawkes","robin","horse","stormtrooper","jason","cat"],Glasses:["","alien","designer","fpv","goggles","google","hipster","oakley","rayban","round","visor","wayrafer"],Eyepatch:["","left","right"],Headband:["","medium"],Jewelry:["","chain"],Warpaint:["","football"],Earpiece:["","microphone","scouter"]},maleForm3={Shirt:["","tanktop","colar","tshirt","turtleneck"],Tie:["","neck","bolo","bow"],Vest:["","vest","lined","yellow"],Holster:["","revolver_chest","revolver_hip"],Shoulderpads:["","artillery","general","plated","spikes"],Scarf:["","parisian_knot","twice_around","four_in_hand","reverse_drape_cross","reverse_drape_tuck","fake_knot","reverse_drape","chest_warmer","overhand","once_around","drape"]},maleForm4={Body:["default","athletic","veiny","android-00"],Scar:["","horizontal_neck","horizontal_nose","vertical_heart","vertical_left","vertical_right"],Tatoo:["","aum_chest","aum_left","aum_right","chaos_chest","chaos_left","chaos_right"],Suit:["","borat","wetsuit"],Jacket:["","suit","suit_open"],Coat:["","fall_long","lab","trench","snowboard"],Cloak:["","default"],Watch:["","generic"],Gloves:["","lab","motorcycle"],Wings:["","angel","devil","skeleton"],Pet:["","feline","raven","rat","canine","siamese_cat","gerbil","chicken","fox","vulture","parrot","doge"]},maleForm5={Pants:["","suit","jeans","jeans_rolled","leather","snowboard"],Belt:["","default","bullet","ring","straps","utility","leather"]},maleForm6={Socks:["","socks"],Shoes:["","hightops","leather","flip-flops"]},layersMale=["wings_angel","wings_devil","wings_skeleton","shoulderpads_spikes_2_of_2","cloak_default_4_of_4","coat_trench_4_of_4","pet_doge","pet_vulture","pet_parrot","pet_feline","pet_raven","pet_rat","pet_canine","pet_siamese_cat","pet_gerbil","pet_chicken","pet_fox","hat_country_2_of_2","hat_helmet_vietnam_2_of_2","hat_strainer_2_of_2","hat_fedora_2_of_2","headband_medium_2_of_2","hair_down_3_of_3","hair_manga_2_of_2","hair_pigtails_2_of_2","coat_fall_long_3_of_3","coat_trench_3_of_4","coat_lab_2_of_2","jacket_suit_2_of_2","jacket_suit_open_2_of_2","pants_snowboard_2_of_2","shoes_flip-flops_2_of_2","body_torso_default","body_torso_athletic","body_torso_veiny","body_torso_android-00","body_leg_right_default","body_leg_left_default","body_leg_right_athletic","body_leg_left_athletic","body_leg_right_veiny","body_leg_left_veiny","body_leg_right_android-00","body_leg_left_android-00","body_foot_right","body_foot_left","tatoo_aum_chest","tatoo_chaos_chest","scar_vertical_heart","scar_horizontal_neck","underwear_plain","underwear_boxers","shirt_tanktop_2_of_2","body_arm_right_default","body_arm_left_default","body_arm_right_athletic","body_arm_left_athletic","body_arm_right_veiny","body_arm_left_veiny","body_arm_right_android-00","body_arm_left_android-00","body_forearm_right_default","body_forearm_left_default","body_forearm_right_athletic","body_forearm_left_athletic","body_forearm_right_veiny","body_forearm_left_veiny","body_forearm_right_android-00","body_forearm_left_android-00","body_hand_right","body_hand_left","tatoo_aum_left","tatoo_aum_right","tatoo_chaos_left","tatoo_chaos_right","shirt_tanktop_1_of_2","suit_borat","suit_wetsuit","socks_socks","shoes_hightops","shoes_leather","shoes_flip-flops_1_of_2","watch_generic","shirt_colar_2_of_2","shirt_tshirt","shirt_turtleneck","pants_jeans_1_of_2","pants_jeans_rolled_1_of_2","pants_leather","pants_suit_1_of_2","pants_snowboard_1_of_2","belt_leather","belt_default","belt_ring","pants_jeans_2_of_2","pants_jeans_rolled_2_of_2","pants_suit_2_of_2","belt_straps","tie_bolo","tie_bow_2_of_2","tie_neck","shirt_colar_1_of_2","vest_vest","vest_lined","tie_bow_1_of_2","jewelry_chain","holster_revolver_chest","holster_revolver_hip","gloves_lab","gloves_motorcycle","jacket_suit_1_of_2","jacket_suit_open_1_of_2","vest_yellow","coat_fall_long_2_of_3","coat_fall_long_1_of_3","coat_lab_1_of_2","coat_snowboard","belt_utility","belt_bullet","coat_trench_2_of_4","cloak_default_3_of_4","cloak_default_2_of_4","shoulderpads_general","coat_trench_1_of_4","shoulderpads_artillery","shoulderpads_plated_1_of_2","shoulderpads_plated_2_of_2","shoulderpads_spikes_1_of_2","scarf_parisian_knot","scarf_twice_around","scarf_four_in_hand","scarf_reverse_drape_cross","scarf_reverse_drape_tuck","scarf_fake_knot","scarf_reverse_drape","scarf_chest_warmer","scarf_overhand","scarf_once_around","scarf_drape","age_lines","hair_down_2_of_3","body_head_default","body_head_square","body_head_diamond","body_head_heart","body_head_oblong","body_head_oval","body_head_round","body_head_triangle","hair_wavy","ears_default","ears_elven","ears_outstretched","ears_pointed","ears_plugged","ears_unplugged","earings_gold_rings","earings_gold_ring_left","earings_gold_ring_right","sockets_neutral","sockets_alertness","sockets_amusement","sockets_anger","sockets_anxiety","sockets_aversion","sockets_betrayal","sockets_caged","sockets_concern","sockets_cruel","sockets_dejection","sockets_desperation","sockets_disdain","sockets_disgust","sockets_eeww","sockets_fear","sockets_grief","sockets_horror","sockets_indignation","sockets_joy","sockets_laughing","sockets_melancholy","sockets_omg","sockets_outrage","sockets_pain","sockets_rage","sockets_revulsion","sockets_sadness","sockets_satisfaction","sockets_shock","sockets_sterness","sockets_surprise","sockets_terror","sockets_wonder","sockets_wtf","freckles_medium","scar_vertical_left","scar_vertical_right","eyes_neutral","eyes_alertness","eyes_amusement","eyes_anger","eyes_anxiety","eyes_aversion","eyes_betrayal","eyes_caged","eyes_concern","eyes_cruel","eyes_dejection","eyes_desperation","eyes_disdain","eyes_disgust","eyes_eeww","eyes_fear","eyes_grief","eyes_horror","eyes_indignation","eyes_joy","eyes_laughing","eyes_melancholy","eyes_omg","eyes_outrage","eyes_pain","eyes_rage","eyes_revulsion","eyes_sadness","eyes_satisfaction","eyes_shock","eyes_sterness","eyes_surprise","eyes_terror","eyes_wonder","eyes_wtf","eyeballs_default","lashes_neutral","lashes_alertness","lashes_amusement","lashes_anger","lashes_anxiety","lashes_aversion","lashes_betrayal","lashes_caged","lashes_concern","lashes_cruel","lashes_dejection","lashes_desperation","lashes_disdain","lashes_disgust","lashes_eeww","lashes_fear","lashes_grief","lashes_horror","lashes_indignation","lashes_joy","lashes_laughing","lashes_melancholy","lashes_omg","lashes_outrage","lashes_pain","lashes_rage","lashes_revulsion","lashes_sadness","lashes_satisfaction","lashes_shock","lashes_sterness","lashes_surprise","lashes_terror","lashes_wonder","lashes_wtf","brows_neutral","brows_alertness","brows_amusement","brows_anger","brows_anxiety","brows_aversion","brows_betrayal","brows_caged","brows_concern","brows_cruel","brows_dejection","brows_desperation","brows_disdain","brows_disgust","brows_eeww","brows_fear","brows_grief","brows_horror","brows_indignation","brows_joy","brows_laughing","brows_melancholy","brows_omg","brows_outrage","brows_pain","brows_rage","brows_revulsion","brows_sadness","brows_satisfaction","brows_shock","brows_sterness","brows_surprise","brows_terror","brows_wonder","brows_wtf","nose_default_2_of_2","nose_pointed_2_of_2","nose_roman_2_of_2","nose_syrid_2_of_2","nose_strong_2_of_2","mouth_neutral","mouth_alertness","mouth_amusement","mouth_anger","mouth_anxiety","mouth_aversion","mouth_betrayal","mouth_caged","mouth_concern","mouth_cruel","mouth_dejection","mouth_desperation","mouth_disdain","mouth_disgust","mouth_eeww","mouth_fear","mouth_grief","mouth_horror","mouth_indignation","mouth_joy","mouth_laughing","mouth_melancholy","mouth_omg","mouth_outrage","mouth_pain","mouth_rage","mouth_revulsion","mouth_sadness","mouth_satisfaction","mouth_shock","mouth_sterness","mouth_surprise","mouth_terror","mouth_wonder","mouth_wtf","nose_default_1_of_2","nose_strong_1_of_2","warpaint_football","facialhair_beard_boxed","facialhair_beard_ducktail","facialhair_beard_guru","facialhair_beard_intelectual","facialhair_beard_rap","facialhair_beard_raw","facialhair_chinpuff","facialhair_goatee","facialhair_goatee_raw","facialhair_moustache","facialhair_moustache_dali","facialhair_moustache_thick","facialhair_muttonchops","facialhair_muttonchops_friendly","facialhair_soulpatch","facialhair_winnfield","nose_pointed_1_of_2","nose_roman_1_of_2","nose_syrid_1_of_2","scar_horizontal_nose","mask_robin","eyepatch_left","eyepatch_right","hair_afro","hair_balding","hair_balding_crazy","hair_balding_crown","hair_bangs","hair_crewcut","hair_down_1_of_3","hair_gelled","hair_manga_1_of_2","hair_mohawk","hair_odango","hair_pigtails_1_of_2","hair_ponytail","hair_short","hair_spider","hair_wild","hair_wreckingball","headband_medium_1_of_2","mask_guy_fawkes","earpiece_microphone","earpiece_scouter","glasses_alien","glasses_designer","glasses_fpv","glasses_goggles","glasses_google","glasses_hipster","glasses_oakley","glasses_rayban","glasses_round","glasses_visor","glasses_wayrafer","hair_emo","hat_baseball","hat_berret","hat_berret_badge","hat_cap","hat_country_1_of_2","hat_cowboy","hat_fox-ears","hat_tuque","hat_fedora_1_of_2","hat_jester","hat_top","hat_magritte","hat_police","hat_scumbag","hat_strainer_1_of_2","hat_helmet_vietnam_1_of_2","hat_motorcycle","hat_xmas","jewelry_earings","jewelry_nosering","jewelry_watch","mask_horse","mask_stormtrooper","mask_jason","mask_cat","horns_devil","cloak_default_1_of_4","horns_large","smoke_cigar","smoke_pipe_subgenius"],femaleForm1={Body_head:["default","heart","oblong","oval","round","square","diamond","triangle"],Ears:["default","elven","pointed","outstretched","plugged","unplugged"],Iris:["default"],Pupils:["round","feline","star"],Nose:["default","pointed","roman","strong","syrid"],Mouth:[""],Hair:["","afro","down","manga","mohawk","pigtails","ponytail","short","short_slick","bangs","odango","emo","spider","wreckingball"],Freckles:["","medium"],Emotion:["neutral","alertness","amusement","anger","aversion","dejection","disdain","disgust","grief","indignation","joy","laughter","melancholy","rage","sadness","sterness","surprise","shock","wonder"]},femaleForm2={Smoke:["","cigar","pipe_subgenius"],Makeup:["","blush","gothic_eyeliner","warpaint"],Earings:["","bells","death_drop","double-drop","gold_rings","gold_ring_right","gold_ring_left","lightning","triangle_mobile"],Eyepatch:["","left","right"],Glasses:["","alien","designer","fpv","goggles","google","hipster","oakley","rayban","round","visor","wayrafer"],Headband:["","medium"],Hat:["","baseball","beach","berret_badge","country","cowboy","fox-ears","top","waitress","police","scumbag","helmet_vietnam","tiara","strainer","magritte","motorcycle","tuque","cap","xmas"],Mask:["","guy_fawkes","horse","stormtrooper","jason","cat"],Horns:["","devil"],Earpiece:["","microphone","scouter"],Veil:["","al-amira","hijab","khimar","niqab","shayla"]},femaleForm3={Collar:["","egyptian","metal"],Necklace:["","heart","perl","princess","squared-circle"],Bra:["","bow","grid","sports"],Top:["","asymetric","loop","tank","tube_v"],Shoulderpads:["","artillery","general","plated","spikes"],Scarf:["","chest_warmer","parisian_knot","twice_around","four_in_hand","reverse_drape_cross","reverse_drape_tuck","fake_knot","reverse_drape","overhand","once_around","drape"]},femaleForm4={Body:["default","athletic","veiny","android-00"],Tatoo:["","chaos_chest","chaos_left","chaos_right","tribal_face","archeopteryx_left"],Nails:["short","long","claws"],Holster:["","revolver_chest","revolver_hip","revolver_thigh"],Suit:["","asymetric","bands","onepiece","wetsuit"],Dress:["","accolade","bobafett","casual","corset","suit","waitress","short","cheerleader","japanese_pleat","parisian_fall","german_expression","zip"],Coat:["","lab","winter_furcollar","winter_tubecollar"],Armband:["","egyptian_left","egyptian_right"],Bracelet:["","band_right","band_left","egyptian_right","egyptian_left","ornamental_right","ornamental_left","perl_right","perl_left","rings_left","rings_right","wonder_left","wonder_right"],Pet:["","feline","raven","rat","canine","siamese_cat","gerbil","chicken","fox","vulture","parrot","doge"],Vest:["","yellow"],Wings:["","angel","devil","skeleton"]},femaleForm5={Underwear:["","boyshorts","plain","string","tanga","thong"],Shorts:["","bikini","short"],Skirt:["","school_short","school","school_long"],Leggings:["","regular","torn"],Pants:["","yoga","yoga_torn","jeans","jeans_rolled","jeans_torn","jeans_bellbottoms"],Belt:["","bullet","utility","satchel"]},femaleForm6={Shoes:["","hightops","highheels","sandals_roman","plateforms","flip-flops"]},layersFemale=["wings_devil","wings_angel","wings_skeleton","shoulderpads_spikes_2_of_2","pet_doge","pet_vulture","pet_parrot","pet_feline","pet_raven","pet_rat","pet_canine","pet_siamese_cat","pet_gerbil","pet_chicken","pet_fox","coat_lab_3_of_3","coat_winter_furcollar_3_of_3","coat_winter_tubecollar_3_of_3","hat_beach_2_of_2","hat_country_2_of_2","hat_helmet_vietnam_2_of_2","hat_strainer_2_of_2","headband_medium_2_of_2","veil_shayla_2_of_2","hair_down_3_of_3","hair_manga_2_of_2","hair_pigtails_2_of_2","shoes_flip-flops_2_of_2","holster_revolver_thigh_2_of_2","bracelet_band_right_2_of_2","bracelet_band_left_2_of_2","bracelet_ornamental_left_2_of_2","bracelet_ornamental_right_2_of_2","bracelet_perl_right_2_of_2","bracelet_perl_left_2_of_2","body_arm_right_athletic","body_arm_right_default","body_arm_right_veiny","body_arm_right_android-00","armband_egyptian_right","shoulderpads_plated_2_of_2","body_torso_athletic","body_torso_default","body_torso_veiny","body_torso_android-00","body_leg_right_athletic","body_leg_right_default","body_leg_right_veiny","body_leg_right_android-00","body_foot_right","body_leg_left_athletic","body_leg_left_default","body_leg_left_veiny","body_leg_left_android-00","body_foot_left","body_arm_left_athletic","body_arm_left_default","body_arm_left_veiny","body_arm_left_android-00","body_forearm_left_athletic","body_forearm_left_default","body_forearm_left_veiny","body_forearm_left_android-00","body_forearm_right_athletic","body_forearm_right_default","body_forearm_right_veiny","body_forearm_right_android-00","body_hand_right","nails_short_2_of_2","nails_long_2_of_2","nails_claws_2_of_2","tatoo_chaos_chest","tatoo_chaos_left","tatoo_chaos_right","tatoo_archeopteryx_left","armband_egyptian_left","bracelet_egyptian_left","bracelet_egyptian_right","bracelet_band_right_1_of_2","bracelet_band_left_1_of_2","bracelet_ornamental_right_1_of_2","bracelet_perl_right_1_of_2","bracelet_rings_left","bracelet_rings_right","bracelet_wonder_left","bracelet_wonder_right","underwear_boyshorts","underwear_plain","underwear_string","underwear_tanga","underwear_thong","leggings_regular","leggings_torn","pants_yoga_torn_3_of_3","bra_bow","bra_grid","bra_sports","suit_asymetric","suit_bands","suit_onepiece","suit_wetsuit","shoes_hightops","shoes_highheels","shoes_plateforms","shoes_sandals_roman","shoes_flip-flops_1_of_2","pants_yoga_torn_2_of_3","pants_yoga","pants_yoga_torn_1_of_3","pants_jeans","pants_jeans_rolled","pants_jeans_torn","pants_jeans_bellbottoms","shorts_bikini","shorts_short","holster_revolver_thigh_1_of_2","skirt_school","skirt_school_short","skirt_school_long","holster_revolver_hip","top_asymetric","top_loop","top_tank","top_tube_v","dress_accolade","dress_bobafett","dress_casual","dress_corset","dress_suit","dress_short","dress_waitress","dress_cheerleader","dress_japanese_pleat","dress_german_expression","dress_parisian_fall","dress_zip","vest_yellow","holster_revolver_chest","belt_satchel","belt_bullet","necklace_heart","necklace_perl","necklace_princess","collar_egyptian","collar_metal","necklace_squared-circle","veil_al-amira_2_of_2","veil_khimar_2_of_2","coat_lab_2_of_3","coat_winter_furcollar_2_of_3","coat_winter_tubecollar_2_of_3","coat_winter_tubecollar_1_of_3","coat_lab_1_of_3","shoulderpads_general","scarf_chest_warmer","scarf_parisian_knot","scarf_twice_around","scarf_four_in_hand","scarf_reverse_drape_cross","scarf_reverse_drape_tuck","scarf_fake_knot","scarf_reverse_drape","scarf_overhand","scarf_once_around","scarf_drape","hair_down_2_of_3","body_head_default","body_head_square","body_head_diamond","body_head_heart","body_head_oblong","body_head_oval","body_head_round","body_head_triangle","ears_default","ears_elven","ears_outstretched","ears_pointed","ears_plugged","ears_unplugged","tatoo_tribal_face","earings_bells","earings_death_drop","earings_double-drop","earings_gold_rings","earings_gold_ring_left","earings_gold_ring_right","earings_lightning","earings_perl","earings_triangle_mobile","sockets_neutral","sockets_sterness","sockets_indignation","sockets_anger","sockets_rage","sockets_disdain","sockets_aversion","sockets_disgust","sockets_amusement","sockets_joy","sockets_laughter","sockets_dejection","sockets_melancholy","sockets_sadness","sockets_grief","sockets_alertness","sockets_wonder","sockets_surprise","sockets_shock","nose_default_2_of_2","nose_pointed_2_of_2","nose_roman_2_of_2","nose_syrid_2_of_2","nose_strong_2_of_2","mouth_neutral","mouth_sterness","mouth_indignation","mouth_anger","mouth_rage","mouth_disdain","mouth_aversion","mouth_disgust","mouth_amusement","mouth_joy","mouth_laughter","mouth_dejection","mouth_melancholy","mouth_sadness","mouth_grief","mouth_alertness","mouth_wonder","mouth_surprise","mouth_shock","nose_default_1_of_2","nose_pointed_1_of_2","nose_roman_1_of_2","nose_syrid_1_of_2","nose_strong_1_of_2","freckles_medium","makeup_blush","makeup_warpaint","makeup_gothic_eyeliner","eyes_neutral","eyes_sterness","eyes_indignation","eyes_anger","eyes_rage","eyes_disdain","eyes_aversion","eyes_disgust","eyes_amusement","eyes_joy","eyes_laughter","eyes_dejection","eyes_melancholy","eyes_sadness","eyes_grief","eyes_alertness","eyes_wonder","eyes_surprise","eyes_shock","eyeballs_default","lashes_neutral","lashes_sterness","lashes_indignation","lashes_anger","lashes_rage","lashes_disdain","lashes_aversion","lashes_disgust","lashes_amusement","lashes_joy","lashes_laughter","lashes_dejection","lashes_melancholy","lashes_sadness","lashes_grief","lashes_alertness","lashes_wonder","lashes_surprise","lashes_shock","brows_neutral","brows_sterness","brows_indignation","brows_anger","brows_rage","brows_disdain","brows_aversion","brows_disgust","brows_amusement","brows_joy","brows_laughter","brows_dejection","brows_melancholy","brows_sadness","brows_grief","brows_alertness","brows_wonder","brows_surprise","brows_shock","eyepatch_left","eyepatch_right","mask_guy_fawkes","tie_bow","hair_short","hair_short_slick","hair_afro","hair_mohawk","hair_wreckingball","glasses_hipster","glasses_google","glasses_oakley","glasses_rayban","glasses_round","glasses_wayrafer","glasses_designer","glasses_goggles","glasses_visor","hair_bangs","hair_down_1_of_3","hair_emo","hair_manga_1_of_2","hair_odango","hair_pigtails_1_of_2","hair_ponytail","hair_spider","headband_medium_1_of_2","glasses_alien","glasses_fpv","veil_al-amira_1_of_2","veil_hijab","veil_khimar_1_of_2","veil_niqab","veil_shayla_1_of_2","hat_baseball","hat_beach_1_of_2","hat_berret_badge","hat_waitress","hat_police","hat_country_1_of_2","hat_cowboy","hat_fox-ears","hat_top","hat_scumbag","hat_tiara","hat_magritte","hat_strainer_1_of_2","hat_helmet_vietnam_1_of_2","hat_tuque","hat_cap","hat_motorcycle","hat_xmas","body_hand_left","bracelet_perl_left_1_of_2","bracelet_ornamental_left_1_of_2","nails_short_1_of_2","nails_long_1_of_2","nails_claws_1_of_2","mask_horse","mask_stormtrooper","mask_jason","mask_cat","horns_devil","coat_winter_furcollar_1_of_3","shoulderpads_artillery","shoulderpads_spikes_1_of_2","shoulderpads_plated_1_of_2","belt_utility","smoke_cigar","smoke_pipe_subgenius","earpiece_microphone","earpiece_scouter"],fabricPallette=["#25282f","#494a52","#323346","#6f7581","#c3c3c5","#ece9ec","#f3e3d4","#434d71","#f4e2c1","#ba855e","#b19f92","#9e9888"],layerDirectoryFemale="layer/female/",layerDirectoryMale="layer/male/",multiLayerFemale=[["bracelet_band_right",2],["bracelet_band_left",2],["bracelet_ornamental_left",2],["bracelet_ornamental_right",2],["bracelet_perl_left",2],["bracelet_perl_right",2],["coat_lab",3],["hair_pigtails",2],["hair_manga",2],["hair_down",3],["hat_beach",2],["hat_country",2],["hat_strainer",2],["hat_helmet_vietnam",2],["headband_medium",2],["coat_winter_furcollar",3],["coat_winter_tubecollar",3],["holster_revolver_thigh",2],["nails_short",2],["nails_long",2],["nails_claws",2],["nose_default",2],["nose_pointed",2],["nose_roman",2],["nose_strong",2],["nose_syrid",2],["pants_yoga_torn",3],["shoulderpads_plated",2],["shoulderpads_spikes",2],["veil_al-amira",2],["veil_khimar",2],["veil_shayla",2],["shoes_flip-flops",2]],multiLayerMale=[["cloak_default",4],["coat_lab",2],["coat_fall_long",3],["coat_trench",4],["hair_pigtails",2],["hair_manga",2],["hair_down",3],["hat_fedora",2],["hat_country",2],["headband_medium",2],["jacket_suit",2],["jacket_suit_open",2],["shirt_colar",2],["shirt_tanktop",2],["hat_strainer",2],["hat_helmet_vietnam",2],["nose_default",2],["nose_pointed",2],["nose_roman",2],["nose_strong",2],["nose_syrid",2],["pants_jeans",2],["pants_jeans_rolled",2],["pants_suit",2],["pants_snowboard",2],["tie_bow",2],["shoes_flip-flops",2],["shoulderpads_plated",2],["shoulderpads_spikes",2]],size=function(e){var t,r=0;for(t in e)e.hasOwnProperty(t)&&r++;return r};function hamburger(e){document.querySelector("#horizontal").classList.toggle("hide")}function getParent(e,t){if((e.matches||e.matchesSelector).call(e,t))return e;for(;(e=e.parentElement)&&!(e.matches||e.matchesSelector).call(e,t););return e}function hasClass(e,t){return(" "+e.className+" ").indexOf(" "+t+" ")>-1}function capitalizeFirstLetter(e){return e.charAt(0).toUpperCase()+e.slice(1)}function isInArray(e,t){return t.indexOf(e)>-1}function capitalizeFirstLetter(e){return e.charAt(0).toUpperCase()+e.slice(1)}function rgb2hex(e){return(e=e.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&4===e.length?"#"+("0"+parseInt(e[1],10).toString(16)).slice(-2)+("0"+parseInt(e[2],10).toString(16)).slice(-2)+("0"+parseInt(e[3],10).toString(16)).slice(-2):""}function getPosition(e){for(var t=0,r=0;e;)"BODY"!=e.tagName&&(t+=e.offsetLeft-e.scrollLeft+e.clientLeft,r+=e.offsetTop-e.scrollTop+e.clientTop),e=e.offsetParent;return{x:t,y:r}}function purgeHiddenLayers(){document.querySelector("#content_1 .selected--option").classList[2].slice(9);for(var e,t=document.querySelectorAll("#content_1 .selected--option svg"),r=document.querySelector("#svg1"),o=t.length,n=[];o--;)n.push(t[o].classList[1]);for(o=(n=replaceMultilayer(n)).length;o--;)null!=(e=r.querySelector("#"+n[o]))&&"0"===e.style.opacity&&r.removeChild(e)}function showPupilObject(e,t){for(var r=e.querySelectorAll(".pupil"),o=(e.querySelectorAll(".pupil--"+t),r.length);o--;)r[o].classList.contains("pupil--"+t)?r[o].style.opacity=1:r[o].style.opacity=0;return e}function clearCharacter(){for(var e=document.querySelector("#svg1"),t=document.querySelectorAll("#svg1 > g"),r=t.length;r--;)"male_silhouette"!=t[r].id&&"female_silhouette"!=t[r].id&&e.removeChild(t[r])}function resetCharacterTemplate(){for(var e=document.querySelector("#svg1").querySelectorAll("*"),t=e.length;t--;)0!==e[t].style.opacity&&(e[t].style.opactiy="0",selements[t].style.pointerEvents="none")}function findNextLayerInDom(e){var t,r,o,n=c.choices.sex,a=document.querySelector("#svg1"),s=null;for(r=(t="m"===n?window.layersMale:window.layersFemale).length,o=t.indexOf(e);null===s;){if(s=a.querySelector("#"+t[o+1]),o>r)return;++o}return s}function bodyTypesToLayers(e){var t=[];return t.push("body_torso_"+e),t.push("body_leg_left_"+e),t.push("body_leg_right_"+e),t.push("body_foot_left"),t.push("body_foot_right"),t.push("body_arm_left_"+e),t.push("body_arm_right_"+e),t.push("body_forearm_left_"+e),t.push("body_forearm_right_"+e),t.push("body_hand_left"),t.push("body_hand_right"),t}function onAllLoaded(){var e,t=document.querySelector(".zoom-container"),r=document.getElementById("male_silhouette"),o=document.getElementById("female_silhouette"),n=(document.querySelector(".sidebar-right"),document.querySelector(".sidebar-left")),a=document.querySelector("#downloadButton"),s=hash.get("sex");e=s||window.sex,a.classList.contains(".enabled")||(a.addEventListener("click",download,!1),a.classList.add("enabled")),o.style.opacity="0",r.style.opacity="0",createForm(e,forms),n.classList.add("visible"),revealCharacter(),t.classList.add("zoom-container--show")}function processSection(e,t){return("body"===e||"ears"===e||"nose"===e||"eyes"===e||"age"===e||"freckles"===e||"sockets"===e||"scar"===e||"wings"===e&&"devil"===t)&&(e="skin"),"mouth"===e&&(e=void 0!=hash.get("mouthColor")?"mouth":"skin"),"facialhair"!==e&&"brows"!==e||(e="hair"),e}function onEachLoaded(e,t){var r,o=t;r=toBeShown.indexOf(o.split("/")[2].split(".")[0])>-1?1:0;var n=o.split("/")[2].split("_")[0];n=processSection(n,o.split("/")[2].split("_")[1].split(".")[0]),e.select("*").attr({opacity:r})}function choicesToList(e){e.choices.sex;for(var t,r=Object.keys(e.choices).length;r--;)"Color"!=(t=Object.keys(e.choices)[r]).slice(-5)&&"Color"!=t.slice(-9,-4)&&t+"_"+e.choices[t];return[]}function choicesToLayers(e,t){var r,o,n,a,s=[],i=fromEmotionGetLayers(e.choices.emotion),l=[];i.length,i.length;for(var c in e.choices)if("Color"!=c.slice(-5))if(c+"_"+e.choices[c]=="body_athletic"||c+"_"+e.choices[c]=="body_default"||c+"_"+e.choices[c]=="body_veiny"||c+"_"+e.choices[c]=="body_android-00")for(a=(n=bodyTypesToLayers(e.choices[c])).length;a--;)l.push(n[a]);else l.push(c+"_"+e.choices[c]);for(var u in l)if("emotion"===l[u].slice(0,7))for(r=(o=fromEmotionGetLayers(l[u].split("_")[1])).length;r--;)s.push(o[r]);else for(r=(o=getSectionsFromIdMultiLayer(t,"#"+l[u])).length;r--;)s.push(o[r].slice(1));return"f"===e.choices.sex&&s.push("nails_short_1_of_2","nails_short_2_of_2"),s.indexOf("eyeballs_default")<0&&s.push("eyeballs_default"),s}function fromEmotionGetLayers(e){for(var t=[],r="",o=["brows","eyes","mouth","lashes","sockets"],n=o.length,a=n;a--;)r=o[n-a-1]+"_"+e,t.push(r);return t}function trans(e){c.choices.sex!==e&&(document.querySelector("#svg1").classList.add("character--hide"),hash.add({sex:e}),hash.add({emotion:"neutral"}),currentUser&&currentUser.cc&&currentUser.cc.personnages&&currentUser.personnageActuel&&(currentUser.cc.personnages[personnageActuel].sex=e),window.sex=e,buildCharacter(resetForms))}function buildCharacter(e){var t=document.querySelector("#svg1");setTimeout(function(){zoomFull(),clearForms(),clearCharacter(),interpretHash(),setTimeout(function(){t.classList.remove("character--hide"),e()},500)},500)}function hideForms(){hideSidebarLeft(),hideSidebarRight()}function clearForms(){clearSidebarLeft(),clearSidebarRight()}function resetForms(){hideForms(),createForm(),showSidebarLeft()}function Character(e){this.choices=e||{emotion:"neutral",body:"default",eyeballs:"default",skinColor:this.skinTone,hairColor:"#ffe680",irisColor:"#2ad4ff",underwear:"plain",underwearColor:"#f2f2f2"},this.choices.emotion=this.choices.emotion||"neutral",this.choices.body=this.choices.body||"default",this.skinTone&&(this.choices.skinColor=this.skinTone),this.choices.hairColor=this.choices.hairColor||"#ffe680",this.choices.irisColor=this.choices.irisColor||"#2ad4ff",this.choices.underwear=this.choices.underwear||"plain",this.choices.underwearColor=this.choices.underwearColor||"#f2f2f2",(e=this.choices).body_head||(e.body_head="default"),e.ears||(e.ears="default"),e.nose||(e.nose="default")}function modCharacter(e,t){e in c.choices&&delete c.choices[e],"brows"!==e&&"eyes"!==e&&"lashes"!==e&&"sockets"!==e&&(""!=t&&(c.choices[e]=t),currentUser&&currentUser.cc&&currentUser.cc.personnages&&currentUser.cc.personnageActuel&&(currentUser.cc.personnages[currentUser.cc.personnageActuel][e]=t))}function createCharacter(){document.getElementById(sex+"Button").checked=!0;var e=[form1,form2,form3];for(var t in e)for(var r in e[t]){var o=r.toLowerCase(),n=hash.get(o);if(void 0!==n){var a="#"+o+"_"+n;for(lyr in multiLayer)if(a.slice(1)==multiLayer[lyr][0])for(var s=1;s<=multiLayer[lyr][1];s++)idOf=a+"_"+s+"_of_"+multiLayer[lyr][1],viewport.selectAll(idOf).attr({opacity:1});else viewport.selectAll(a).attr({opacity:1})}}}function GetEmotionGetLayers(e){return["brows","eyes","mouth","lashes","sockets"]}function getOptions(e){var t=window.forms;e=capitalizeFirstLetter(e);for(i in t)if(options=t[i][e],void 0!=options)return options}function show(e,t){if("string"==typeof t)var r=[t];else r=[t.split(" ")[1]];var o=e,n=getOptions(r[0]),a=new Array,s="#"+r[0]+"_"+o;if(a[t]=e,""===e?(modCharacter(t,e),hash.remove(t)):(modCharacter(t,e),hash.add(a)),currentUser&&triggerSaveBtn(),"emotion"===r[0]){modCharacter(r[0],o),ga("send","event","menu","select",s),r=[];var i=GetEmotionGetLayers(o);for(emo in i){var l=i[emo];r.push(l)}}displaySections(r,n,o,multiLayer)}function displaySections(e,t,r,o){for(section in e)t.forEach(function(t,n){var a="#"+e[section]+"_"+t;if(""!=r&&t===r)if(sectionShow(o,a),"brows"===e[section]||"eyes"===e[section]||"mouth"===e[section]||"lashes"===e[section]||"sockets"===e[section])modCharacter(e[section],r);else{var s=new Array;s[e[section]]=r,hash.add(s),modCharacter(e[section],r),ga("send","event","menu","select",a)}else for(lyr in o)sectionHide(o,a)})}function sectionShow(e,t){var r=document.querySelector("#svg1"),o=!1;if("#iris_default"!==t){for(lyr in e)if(t.slice(1)===e[lyr][0]){o=!0;break}if("pupils"===t.slice(1,7))showPupils(t.slice(1).split("_")[1]);else if("body"===t.slice(1,5)&&"head"!=t.slice(6,10))for(var n=t.split("_"),a=getBodyLayers(n[n.length-1]),s=a.length;s--;)idOf="#"+a[s],r.querySelector(idOf).style.opacity=1,r.querySelector(idOf).style.pointerEvents="auto";else if(o)for(var i=1;i<=e[lyr][1];i++)idOf=t+"_"+i+"_of_"+e[lyr][1],sectionToHide=r.querySelector(idOf),null!=sectionToHide&&(sectionToHide.style.opacity=1,sectionToHide.style.pointerEvents="auto");else r.querySelector(t).style.opacity=1,r.querySelector(t).style.pointerEvents="auto";"eyes"===t.slice(1).split("_")[0]&&changeClipPathOnEyes(t)}}function getBodyLayers(e){var t=[];return t.push("body_torso_"+e),t.push("body_arm_right_"+e),t.push("body_arm_left_"+e),t.push("body_forearm_right_"+e),t.push("body_forearm_left_"+e),t.push("body_leg_right_"+e),t.push("body_leg_left_"+e),t}function getAllBodyLayers(){for(var e,t=getSectionLayersList("body"),r=t.length,o=[];r--;)e=getBodyLayers(t[r]),o=o.concat(e);return o}function showPupils(e){for(var t=document.querySelector("#svg1").querySelectorAll(".pupil"),r=t.length;r--;)t[r].classList.contains("pupil--"+e)?(t[r].style.opacity=1,t[r].style.pointerEvents="auto"):(t[r].style.opacity=0,t[r].style.pointerEvents="none")}function sectionHide(e,t){var r,o=document.querySelector("#svg1");if(t.slice(1)==e[lyr][0])for(var n=1;n<=e[lyr][1];n++)idOf=t+"_"+n+"_of_"+e[lyr][1],null!=(r=o.querySelector(idOf))&&(r.style.opacity=0,r.style.pointerEvents="none");else if("body"===t.slice(1,5)&&"head"!=t.slice(6,10))for(var a=t.split("_"),s=getBodyLayers(a[a.length-1]),i=s.length;i--;)idOf="#"+s[i],o.querySelector(idOf).style.opacity=0,o.querySelector(idOf).style.pointerEvents="none";else null!=(r=o.querySelector(t))&&(r.style.opacity=0,r.style.pointerEvents="none")}skinLayers=["eyes_neutral","body_torso_default","body_torso_athletic","body_torso_veiny","body_torso_android-00","body_leg_right_default","body_leg_left_default","body_leg_right_athletic","body_leg_left_athletic","body_leg_right_veiny","body_leg_left_veiny","body_leg_right_android-00","body_leg_left_android-00","body_foot_right","body_foot_left","body_arm_right_default","body_arm_left_default","body_arm_right_athletic","body_arm_left_athletic","body_arm_right_veiny","body_arm_left_veiny","body_arm_right_android-00","body_arm_left_android-00","body_forearm_right_default","body_forearm_left_default","body_forearm_right_athletic","body_forearm_left_athletic","body_forearm_right_veiny","body_forearm_left_veiny","body_forearm_right_android-00","body_forearm_left_android-00","body_hand_right","body_hand_left","age_lines","body_head_default","body_head_diamond","body_head_heart","body_head_oblong","body_head_oval","body_head_round","body_head_square","body_head_triangle","body_hand","ears_default","ears_elven","ears_pointed","ears_plugged","ears_unplugged","ears_outstretched","nose_default","nose_default_1_of_2","nose_pointed_1_of_2","nose_roman_1_of_2","nose_strong_1_of_2","nose_syrid_1_of_2","nose_default_2_of_2","nose_pointed_2_of_2","nose_roman_2_of_2","nose_strong_2_of_2","nose_syrid_2_of_2","mouth_shadow","freckles_medium","scar_horizontal_neck","scar_horizontal_nose","scar_vertical_heart","scar_vertical_left","scar_vertical_right","age_lines","wings_devil","mouth_neutral","mouth_amusement","mouth_anger","mouth_alertness","mouth_anxiety","mouth_aversion","mouth_betrayal","mouth_caged","mouth_concern","mouth_cruel","mouth_dejection","mouth_desperation","mouth_disdain","mouth_disgust","mouth_eeww","mouth_fear","mouth_grief","mouth_horror","mouth_indignation","mouth_joy","mouth_laughing","mouth_melancholy","mouth_omg","mouth_outrage","mouth_pain","mouth_rage","mouth_revulsion","mouth_sadness","mouth_satisfaction","mouth_shock","mouth_sterness","mouth_surprise","mouth_terror","mouth_wonder","mouth_wtf","sockets_neutral","sockets_amusement","sockets_anger","sockets_alertness","sockets_anxiety","sockets_aversion","sockets_betrayal","sockets_caged","sockets_concern","sockets_cruel","sockets_dejection","sockets_desperation","sockets_disdain","sockets_disgust","sockets_eeww","sockets_fear","sockets_grief","sockets_horror","sockets_indignation","sockets_joy","sockets_laughing","sockets_melancholy","sockets_omg","sockets_outrage","sockets_pain","sockets_rage","sockets_revulsion","sockets_sadness","sockets_satisfaction","sockets_shock","sockets_sterness","sockets_surprise","sockets_terror","mouth_wonder","mouth_wtf"],hairLayers=["facialhair_beard_boxed","facialhair_beard_ducktail","facialhair_beard_guru","facialhair_beard_intelectual","facialhair_beard_rap","facialhair_beard_raw","facialhair_chinpuff","facialhair_goatee","facialhair_goatee_raw","facialhair_moustache","facialhair_moustache_dali","facialhair_moustache_thick","facialhair_muttonchops","facialhair_muttonchops_friendly","facialhair_soulpatch","facialhair_winnfield","hair_balding","hair_balding_crazy","hair_balding_crown","hair_short","hair_short_slick","hair_gelled","hair_wavy","hair_manga_1_of_2","hair_manga_2_of_2","hair_mohawk","hair_pigtails_1_of_2","hair_pigtails_2_of_2","hair_down_1_of_3","hair_down_2_of_3","hair_down_3_of_3","hair_afro","hair_ponytail","hair_bangs","hair_odango","hair_emo","hair_spider","hair_wreckingball","hair_crewcut","hair_wild","lashes_neutral","lashes_alertness","lashes_amusement","lashes_anger","lashes_anxiety","lashes_aversion","lashes_betrayal","lashes_caged","lashes_concern","lashes_cruel","lashes_dejection","lashes_desperation","lashes_disdain","lashes_disgust","lashes_eeww","lashes_fear","lashes_grief","lashes_horror","lashes_indignation","lashes_joy","lashes_laughing","lashes_melancholy","lashes_omg","lashes_outrage","lashes_pain","lashes_rage","lashes_revulsion","lashes_sadness","lashes_satisfaction","lashes_shock","lashes_sterness","lashes_surprise","lashes_terror","lashes_wonder","lashes_wtf","brows_neutral","brows_alertness","brows_amusement","brows_anger","brows_anxiety","brows_aversion","brows_betrayal","brows_caged","brows_concern","brows_cruel","brows_dejection","brows_desperation","brows_disdain","brows_disgust","brows_eeww","brows_fear","brows_grief","brows_horror","brows_indignation","brows_joy","brows_laughing","brows_melancholy","brows_omg","brows_outrage","brows_pain","brows_rage","brows_revulsion","brows_sadness","brows_satisfaction","brows_shock","brows_sterness","brows_surprise","brows_terror","brows_wonder","brows_wtf"],window.maleFormList=[maleForm1,maleForm2,maleForm3,maleForm4,maleForm5,maleForm6],window.femaleFormList=[femaleForm1,femaleForm2,femaleForm3,femaleForm4,femaleForm5,femaleForm6],window.layersFemale=layersFemale,window.layersMale=layersMale,window.multiLayerMale=multiLayerMale,window.multiLayerFemale=multiLayerFemale,Object.size=function(e){var t,r=0;for(t in e)e.hasOwnProperty(t)&&r++;return r};var myUsername=!1,currentUser=!1,personnages={},personnageActuel=!1,fetchDb=function(){var e={credentials:"same-origin",headers:{accept:"application/json","Content-Type":"application/json"}},t=function(t,r,o){var n="/api/"+t,a={};if(o||"string"!=typeof r||(o=r,r=!1),r&&(a.body=JSON.stringify(r),a.method="post"),o&&(a.method=o),"function"==typeof window.fetch)return window.fetch(n,Object.assign(a,e))};return["get","delete","head"].forEach(function(e){t[e]=function(r){return t(r,e)}}),["post","put"].forEach(function(e){t[e]=function(r,o){return t(r,o,e)}}),t.reject=function(e,t){var r=new Error(t||e.statusText);return r.statusText=e.statusText,r.status=e.status,r.url=e.url,Promise.reject(r)},t}();function deleteDbSession(){return fetchDb.delete("session").then(function(e){return e.json()})}function getDbSession(){return fetchDb("session").then(function(e){return e.ok?e.json():fetchDb.reject(e)}).then(function(e){return e.userCtx.name?e.userCtx.name:fetchDb.reject("Not connected")})}function getDbUser(e){return fetchDb("users/"+e).then(function(e){return e.json()})}function updateDbUser(e){return fetchDb.post("users",e).then(function(e){return e.ok?e.json():409===e.status?fetchDb.reject(e,"Not saving, _rev fields don't match"):404===e.status?(loginMenu(),fetchDb.reject(e,"Not logged in.")):fetchDb.reject(e)})}function loginDbUser(e,t){return fetchDb.post("session",{name:e,password:t}).then(function(t){return 200===t.status?t.json():401===t.status?(determineErrorMessage(e),fetchDb.reject(t)):fetchDb.reject(t)})}function determineErrorMessage(e){var t=document.querySelector(".overlay--show");t.classList.contains("js-login")&&showErrorUsernamePasswordMismatch(),t.classList.contains("js-register")&&showErrorUsernameTaken(e)}function showErrorUsernamePasswordMismatch(){var e=document.querySelector(".overlay--show").querySelector(".overlay__error"),t=e.querySelector(".overlay__error__text");clearInputFields(),t.innerHTML="Sorry, username/password mismatch. Please try again.",e.classList.add("overlay__error--show"),console.log("Sorry, username/password mismatch")}function createDbUser(e,t,r){return console.log("Create DB User"),fetchDb.post("users",{_id:"org.couchdb.user:"+e,roles:[],type:"user",name:e,password:t,email:r,createdAt:(new Date).toISOString(),cc:{personnages:{},personnageActuel:!1}}).then(function(t){return console.log("resp.status"),201===t.status?t.json():409===t.status?(showErrorUsernameTaken(e),t.json()):fetchDb.reject(t)})}function showErrorUsernameTaken(e){var t=document.querySelector(".overlay--show").querySelector(".overlay__error"),r='Username "'+e+'" is already taken. Try another.';t.querySelector(".overlay__error__text").innerHTML=r,t.classList.add("overlay__error--show"),clearInputUsername()}function whoami(e){e.preventDefault();var t=document.querySelector(".js-character-list"),r=t.querySelector(".close-btn");closeAllOverlays(),t.classList.add("overlay--show"),t.addEventListener("click",closeOverlay,!0),r.addEventListener("click",closeOverlay,!1)}function logout(e){e.preventDefault(),deleteDbSession().then(function(e){return currentUser=!1,personnages={},personnageActuel=!1,myUsername=!1,e}).catch(function(e){console.error("err4",e)}),logoutUI()}function login(e){e.preventDefault();var t=e,r=t.target.children[0].lastElementChild.value,o=t.target.children[1].lastElementChild.value,n=document.querySelector(".overlay--show");r&&o?loginDbUser(r,o).then(function(){return myUsername=r,getDbUser(r)}).then(function(e){var t,r=(currentUser=e).cc.personnages[currentUser.cc.personnageActuel],o=[];for(t in r)o.push(encodeURIComponent(t)+"="+encodeURIComponent(r[t]));clearInputFields(),n.classList.remove("overlay--show"),manageCharacters(e),ga("send","event",{eventCategory:"Navigation",eventAction:"login",eventLabel:"Successful login"})}).catch(function(e){console.error("err3",e)}):console.log("missing username or password.")}function inheritNewCharacter(){var e=document.querySelector(".js-login-new-character"),t=hash.get("sex"),r=document.querySelector(".js-continue-character"),o=document.querySelector(".js-load-character");t&&(o.addEventListener("click",loadCharacter,!1),r.addEventListener("click",continueNewCharacter,!1),e.classList.add("overlay--show"),e.addEventListener("click",closeNewCharacterOverlay,!1))}function continueNewCharacter(e){e.preventDefault();var t=document.querySelector(".overlay--show"),r=document.querySelector(".js-name-character"),o=r.querySelector(".overlay__char-create-btn");t.classList.remove("overlay--show"),o.addEventListener("click",requestNewCharacterName),r.classList.add("overlay--show")}function requestNewCharacterName(e){e.preventDefault();var t=document.querySelector(".overlay--show");t&&t.classList.remove("overlay--show")}function loadCharacter(e){var t=document.querySelector("#svg1"),r=document.querySelector(".overlay--show");e.preventDefault(),hash.clear(),clearCharacter(),hashCharacter(),startup(),setHashTrigger(),setTimeout(function(){t.classList.remove("character--hide"),r&&r.classList.remove("overlay--show")},500)}function closeNewCharacterOverlay(e){var t=document.querySelector(".js-login-new-character");if(e.target===t){var r=document.querySelector(".overlay--show");r&&r.classList.remove("overlay--show")}}function switchCharacter(e){var t;e.preventDefault();var r=document.querySelector(".js-character-list"),o=document.querySelector("#svg1"),n=this.parentNode.parentNode,a=n.querySelector(".overlay__char-name").innerHTML,s=document.querySelector(".overlay__char--current"),i=o.getAttribute("class"),l=i+" character--hide",u=currentUser.cc.personnages[a].sex;""===i&&("f"===u&&(i="select-female"),"m"===u&&(i="select-male"),l=i),s&&s.classList.remove("overlay__char--current"),n.classList.add("overlay__char--current"),currentUser.cc.personnageActuel=a,r.classList.remove("overlay--show"),o.setAttribute("class",l),updateDbUser(currentUser).then(function(e){return currentUser._rev=e.rev,e}).then(function(e){window.sex=currentUser.cc.personnages[a].sex,t=currentUser.cc.personnages[a],c=new Character(t),hash.clear(),setTimeout(function(){clearCharacter(),hashCharacter(),setHashTrigger()},500),ga("send","event",{eventCategory:"Navigation",eventAction:"Edit",eventLabel:"Edit existing character"})}).catch(function(e){console.log("err",e)})}function revealCharacter(){document.querySelector("#svg1").classList.remove("character--hide")}function manageCharacters(){var e,t,r,o,n,a=document.querySelector(".js-character-list"),s=a.querySelector(".overlay__title"),i=a.querySelector(".overlay__char-card--orig"),l=Object.keys(currentUser.cc.personnages),c=l.length,u=a.querySelector(".overlay__container--char-list"),h=currentUser.cc.personnageActuel,d=document.querySelector("#usernameButton").querySelector(".menu-text"),f=document.querySelector("#pagewrap"),_=document.querySelector(".save-btn"),p=a.querySelector(".overlay__char-new-btn"),g=a.querySelector(".overlay__char-create-btn");for(resetCharacters();c--;){n=l[c];var m=i.cloneNode(!0),y=m.querySelector(".overlay__char-name");m.classList.remove("overlay__char-card--orig"),n===h&&m.classList.add("overlay__char--current"),y.innerHTML=n,u.appendChild(m)}for(t=(e=a.querySelectorAll(".overlay__char-edit")).length;t--;)e[t].addEventListener("click",switchCharacter);for(o=(r=a.querySelectorAll(".overlay__char-delete")).length;o--;)r[o].addEventListener("click",deleteChar);s.innerHTML=currentUser.name,d.innerHTML=currentUser.name,f.classList.add("logged"),_.addEventListener("click",saveChar,!0),p.addEventListener("click",newChar,!0),g.addEventListener("click",createChar,!0)}function resetCharacters(){var e=document.querySelector(".js-character-list").querySelectorAll(".overlay__char-card:not(.overlay__char-card--orig):not(.overlay__char-new)");Array.prototype.forEach.call(e,function(e){e.parentNode.removeChild(e)})}function registerMenu(){var e=document.querySelector(".js-login"),t=document.querySelector(".js-register"),r=document.querySelector("#register-form"),o=t.querySelector(".first-input"),n=t.querySelector(".close-btn");e.classList.contains("overlay--show")&&e.classList.remove("overlay--show"),closeAllOverlays(),t.classList.add("overlay--show"),r.addEventListener("submit",register,!0),t.addEventListener("click",closeRegister,!0),o.focus(),n.addEventListener("click",closeOverlay,!1)}function closeRegister(e){var t=document.querySelector(".js-register"),r=t.querySelector(".cancel-btn"),o=e.target;if(o===t||o===r){var n=document.querySelector(".overlay--show");n&&(clearInputFields(),n.classList.remove("overlay--show"))}}function register(e){e.preventDefault();var t=e,r=t.target.children[0].lastElementChild.value,o=t.target.children[1].lastElementChild.value,n=t.target.children[2].lastElementChild.value,a=document.querySelector(".overlay--show");o?n?r?(console.log("Calling createDbUSer"),createDbUser(o,n,r).then(function(){return loginDbUser(o,n)}).then(function(e){return console.log("fetched2",e),o}).then(getDbUser).then(function(e){manageCharacters(currentUser=e),a.classList.remove("overlay--show"),ga("send","event",{eventCategory:"Conversion",eventAction:"Register",eventLabel:"Successfuly Registered account"})}).catch(function(e){console.error("register err",e)})):console.log("missing email."):console.log("missing password."):console.log("missing username.")}function setHashTrigger(){window.addEventListener("hashchange",triggerSaveBtn,!1)}function triggerSaveBtn(){var e=document.querySelector(".save-btn");e&&e.classList.add("save--enabled")}function logOut(){}function saveCharToCloud(e){preventDefault(e),console.log("saveCharToCloud")}function checkNightMode(){var e=document.querySelector("BODY");document.querySelector("#nightModeBox").checked&&!e.classList.contains("night")&&e.classList.toggle("night")}function switchNightMode(e){ga("send","event",{eventCategory:"Navigation",eventAction:"Dark/Light",eventLabel:"Switch between Dark mode and Light mode"}),e.preventDefault();var t=document.querySelector("BODY");hamburger(),""===t.classList?document.documentElement.setAttribute("data-theme","darktheme"):"night"===t.classList&&document.documentElement.setAttribute("data-theme","lighttheme"),t.classList.toggle("night")}function tattle(){ga("send","event",{eventCategory:"Conversion",eventAction:"Navbar | Patreon",eventLabel:"Open Patreon page from the Navbar/Hamburger menu."})}function gotoPatreon(e){e&&e.preventDefault(),ga("send","event",{eventCategory:"Conversion",eventAction:"Caboose | Patreon",eventLabel:"Open Patreon page from Caboose modal."}),closeAllOverlays(),setTimeout(function(){window.open("https://www.patreon.com/charactercreator")},500)}function gotoNewChar(e){e&&e.preventDefault(),ga("send","event",{eventCategory:"Conversion",eventAction:"Caboose | New character",eventLabel:"Reset to new character from Caboose."}),closeAllOverlays(),setTimeout(function(){resetCharacter()},500)}function resetCharacter(){hideMenus(),fadeOutSVG(),removeGroups(),zoomFull(),resetSilhouettes(),c=new Character([]),setTimeout(function(){fadeInSVG()},300),relaunch()}function relaunch(){male=document.querySelector("#male_silhouette"),female=document.querySelector("#female_silhouette"),male.style.opacity="1",female.style.opacity="1"}function removeGroups(){for(var e=document.querySelector("#svg1"),t=e.querySelectorAll("#svg1 > g"),r=t.length;r--;)"female_silhouette"!=t[r].id&&"male_silhouette"!=t[r].id&&e.removeChild(t[r])}function hideMenus(){for(var e=document.querySelectorAll(".sidebar.visible"),t=e.length;t--;)e[t].classList.remove("visible")}function fadeOutSVG(){var e=document.querySelector("#svg1"),t=e.querySelector(".character-shadow.shine"),r=document.querySelector("#downloadButton.enabled");t&&t.classList.remove("shine"),r&&(r.classList.remove("enabled"),r.removeEventListener("click",download)),e.classList.add("character--hide")}function fadeInSVG(){document.querySelector("#svg1").classList.remove("character--hide")}function resetSilhouettes(){var e=document.querySelector("#svg1"),t=e.querySelector("#path_male"),r=e.querySelector("#path_female");e.classList.contains("select-female")?(silhouette=e.querySelector("#female_silhouette"),e.querySelector("#male_silhouette")):e.classList.contains("select-male")&&(silhouette=e.querySelector("#male_silhouette"),e.querySelector("#female_silhouette")),e.classList="",t.style.fill="#e35a4e",r.style.fill="#e35a4e",t&&"function"==typeof selectMale&&t.addEventListener("click",selectMale,!1),r&&"function"==typeof selectFemale&&r.addEventListener("click",selectFemale,!1)}function gotoLoadChar(e){e&&e.preventDefault(),closeAllOverlays()}function caboose(){var e=document.querySelector(".js-caboose"),t=e.querySelector(".close-btn");closeAllOverlays(),e.classList.add("overlay--show"),e.addEventListener("click",closeOverlay,!0),t.addEventListener("click",closeOverlay,!1)}function layerHighlight(e){var t=getGroupParent(t=e.target),r=document.querySelectorAll("#contour use"),o=r.length;if(r[0].getAttribute("xlink:href")!==t.id)if("svg1"===t.id)for(;o--;)r[o].setAttribute("xlink:href","");else for(;o--;)r[o].setAttribute("xlink:href","#"+t.id)}function clickSelect(e){var t,r,o,n,a,s=getGroupParent(s=e.target),i=(document.querySelector("#sidebar-left"),document.querySelectorAll("section.accordeon__section-label"));void 0!==c.choices.sex&&(t=fromPrefixGetFormSection(o=fromItemGetPrefix(s.id)),"svg1"!==o?t>-1&&(sectionZoom(i[t].querySelector(".accordeon__section-title__text").innerHTML),r=i[t].nextSibling.classList.contains("section--hide"),closeSections(i[t]),r&&showSection(i[t]),(n=getSectionButton(t,o))>-1&&(a=i[t].nextSibling.querySelectorAll("li.sbl__option")[n],hideColorPicker(),openThumbsLogic(a))):zoomFull())}function getSectionButton(e,t){var r=0;for(key in"m"===c.choices.sex?formList=window.maleFormList:formList=window.femaleFormList,formList[e]){if(t===key.toLowerCase())return r;++r}return-1}function getGroupParent(e){if("m"===c.choices.sex)layers=window.layersMale;else{if("f"!==c.choices.sex)return document.querySelector("#svg1");layers=window.layersFemale}for(;-1===layers.indexOf(e.id)&&"svg"!=e.tagName;)e=e.parentNode;return e}function fromItemGetPrefix(e){var t=e.split("_");return"body"===t[0]&&"head"===t[1]?"body_head":t[0]}function fromPrefixGetFormSection(e){var t,r,o;for(console.log("prefix",e),o="m"===c.choices.sex?window.maleFormList:window.femaleFormList,console.log("formList",o);void 0===t;){for(r=o.length;r--;)for(key in o[r])key.toLowerCase()===e&&(t=r);void 0===t&&(t=-1)}return t}function startup(){var e;currentUser&&currentUser.cc&&currentUser.cc.personnages&&currentUser.cc.personnageActuel&&(e=currentUser.cc.personnages[currentUser.cc.personnageActuel]),window.c=new Character(e),interpretHash()}function launch(){if(c.choices.sex=hash.get("sex"),"m"===c.choices.sex){var e=maleForm1,t=maleForm2,r=maleForm3,o=maleForm4,n=maleForm5,a=maleForm6;multiLayer=multiLayerMale}else{e=femaleForm1,t=femaleForm2,r=femaleForm3,o=femaleForm4,n=femaleForm5,a=femaleForm6;multiLayer=multiLayerFemale}window.forms=[e,t,r,o,n,a],parseHash(c,forms,skinLayers,hairLayers),choicesToList(c),toBeShown=choicesToLayers(c,multiLayer),Promise.resolve().then(function(){loadFilesFromList(toBeShown)}).then(function(){onAllLoaded()}).then(function(){applyClipPath()})}function displayPallette(){var e=hash.get("skinColor");void 0!=e?(console.log("hashSkinColor",e),colorCutout(e)):chooseSkinColor()}function chooseSkinColor(){var e=["#FFDFC4","#F0D5BE","#EECEB3","#E1B899","#E5C298","#FFDCB2","#E5B887","#E5A073","#E79E6D","#DB9065","#CE967C","#C67856","#BA6C49","#A57257","#F0C8C9","#DDA8A0","#B97C6D","#A8756C","#AD6452","#5C3836","#CB8442","#BD723C","#704139","#A3866A"],t=document.querySelector(".skin-color__container");if(!t.firstChild)for(color in e){var r=e[color],o=document.createElement("LI");o.className="skin-tone",o.style.cssText="background-color:"+r+";",t.appendChild(o),o.onclick=colorCutout,o.onmouseover=colorOnHover}t.classList.add("skin-color__container--show")}function defaultPupilShape(){c.choices.pupils="round",hash.add({pupils:"round"})}function colorOnHover(){var e=document.getElementById("path_male"),t=document.getElementById("path_female"),r=this.style.backgroundColor;t.style.fill=r,e.style.fill=r}function colorCutout(e){e=rgb2hex(this.style.backgroundColor),document.getElementsByClassName(".skin-tone"),document.getElementById("male_silhouette"),document.getElementById("female_silhouette"),document.getElementsByClassName("lg");var t=new Array;t.skinColor=e,document.querySelector(".skin-color__container").classList.remove("skin-color__container--show"),hash.add(t),defaultEyeColor(e),defaultHairColor(e),defaultPupilShape(),ga("send","event",{eventCategory:"Navigation",eventAction:"Color",eventLabel:"Select color"}),addDecency(),addTopicalItem(),presentFaceStyles()}function selectMale(e){c.choices.sex="m";var t=document.querySelector("#mButton"),r=document.querySelector("#svg1"),o=document.querySelector("#male_silhouette"),n=document.querySelector("#female_silhouette"),a=document.querySelector(".character-shadow");n.removeEventListener("click",selectFemale),t&&(t.checked=!0),o&&o.removeEventListener("click",selectMale,!1),hash.add({sex:"m"});document.getElementById("path_male");r.classList.add("select-male"),a.classList.add("shine"),e&&ga("send","event",{eventCategory:"Navigation",eventAction:"Male",eventLabel:"Select male template"}),setTimeout(function(){displayPallette()},350)}function addTopicalItem(){}function addDecency(){var e=c.choices.sex;"m"===e||"f"===e&&hash.add({bra:"bow"})}function selectFemale(e){c.choices.sex="f";var t=document.querySelector("#fButton"),r=document.querySelector("#svg1"),o=document.querySelector("#male_silhouette"),n=document.querySelector("#female_silhouette"),a=document.querySelector(".character-shadow");o.removeEventListener("click",selectMale),t&&(t.checked=!0),n&&n.removeEventListener("click",selectFemale,!1),hash.add({sex:"f"});n=document.getElementById("female_silhouette"),document.getElementById("path_female");r.classList.add("select-female"),a.classList.add("shine"),e&&ga("send","event",{eventCategory:"Navigation",eventAction:"Female",eventLabel:"Select female template"}),setTimeout(function(){displayPallette()},350)}function presentFaceStyles(){var e,t,r=c.choices.sex;console.log("presentFaceStyles"),zoomFace(),"m"===r?(e=document.querySelector(".male-face-western-style"),t=document.querySelector(".male-face-anime-style")):(e=document.querySelector(".female-face-western-style"),t=document.querySelector(".female-face-anime-style")),e.style.opacity=1,t.style.opacity=1}function selectStyleWestern(){console.log("selectStyleWestern")}function selectStyleAnime(){console.log("selectStyleAnime")}function closeAllOverlays(){var e=document.querySelectorAll(".overlay--show"),t=e.length;for(hamburger();t--;)e[t].classList.remove("overlay--show")}function showAbout(e){e.preventDefault();var t=document.querySelector(".js-about"),r=t.querySelector(".close-btn");closeAllOverlays(),t.classList.add("overlay--show"),t.addEventListener("click",closeOverlay,!0),r.addEventListener("click",closeOverlay,!1)}function showFAQ(e){e.preventDefault();var t=document.querySelector(".js-faq"),r=t.querySelector(".close-btn");closeAllOverlays(),t.classList.add("overlay--show"),t.addEventListener("click",closeOverlay,!0),r.addEventListener("click",closeOverlay,!1)}function showShop(e){e.preventDefault();var t=document.querySelector(".js-shop");console.log("url",upload());var r=t.querySelector(".close-btn");closeAllOverlays(),t.classList.add("overlay--show"),t.addEventListener("click",closeOverlay,!0),r.addEventListener("click",closeOverlay,!1)}function logoutUI(){var e=document.querySelector(".logged");e&&(e.classList.remove("logged"),resetCharacters())}function loginMenu(e){e&&e.preventDefault();var t=document.querySelector(".js-login"),r=document.querySelector("#login-form"),o=t.querySelector(".first-input"),n=t.querySelector(".close-btn");closeAllOverlays(),t.classList.add("overlay--show"),r.addEventListener("submit",login,!0),t.addEventListener("click",closeLogin,!0),o.focus(),n.addEventListener("click",closeOverlay,!1)}function closeLogin(e){var t=document.querySelector(".js-login"),r=t.querySelector(".cancel-btn"),o=e.target;if(o===t||o===r){var n=document.querySelector(".overlay--show");n&&(clearInputFields(),n.classList.remove("overlay--show"))}}function closeOverlay(e){var t=document.querySelector(".overlay--show");if(null!==t){var r=t.querySelector(".cancel-btn"),o=t.querySelector(".close-btn"),n=e.target;n!==t&&n!==r&&n!==o||t&&(hideNewCharacterInputField(),t.classList.remove("overlay--show"))}}function hideNewCharacterInputField(){var e=document.querySelector(".overlay--show").querySelector(".overlay__char-new--create");e&&(clearInputFields(),e.classList.remove("overlay__char-new--create"))}function clearInputFields(){for(var e=document.querySelector(".overlay--show"),t=e.querySelectorAll("input"),r=t.length,o=e.querySelector(".overlay__error--show");r--;)t[r].value="";o&&o.classList.remove("overlay__error--show")}function clearInputUsername(){document.querySelector(".overlay--show").querySelectorAll(".overlay__input__username")[0].value=""}function parseHash(e,t,r,o){newParseHash();for(var n,a,s,i,l,c=t.length,u=c;u--;){var h=c-u-1;for(var d in t[h]){var f=d.toLowerCase();if("pupils"===f&&modCharacter(f,_),"brows"===f||"eyes"===f||"mouth"===f||"lashes"===f||"sockets"===f)void 0===(_=hash.get("emotion"))&&(_="neutral");else var _=hash.get(f);var p=f+"_"+_;void 0!=_?modCharacter(f,_):"brows"!==f&&"eyes"!==f&&"mouth"!==f&&"lashes"!==f&&"sockets"!==f||modCharacter(f,"neutral"),p in r||"body"===f?f="skin":(p in o||"hair"===f)&&(f="hair"),n=hash.get(f+"Color"),a=hash.get(f+"Color-bet"),s=hash.get(f+"Color-gam"),i=hash.get(f+"Color-del"),l=hash.get(f+"Color-eps"),void 0!=n&&""!=n&&modCharacter(f+"Color",n),void 0!=a&&""!=a&&modCharacter(f+"Color-bet",a),void 0!=s&&""!=s&&modCharacter(f+"Color-gam",s),void 0!=i&&""!=i&&modCharacter(f+"Color-del",i),void 0!=l&&""!=l&&modCharacter(f+"Color-eps",l)}}}function newParseHash(){var e,t=hash.get();Object.keys(t);for(e in t)""===t[e]&&hash.remove(e);""!=t.irisColor&&modCharacter("irisColor",t.irisColor)}function hashCharacter(){var e,t=currentUser.cc.personnages[currentUser.cc.personnageActuel],r=[];for(e in t)r.push(encodeURIComponent(e)+"="+encodeURIComponent(t[e]));r.length&&personnageActuelToHash(currentUser)}function personnageActuelToHash(e){var t,r,o,n,a,s=e.cc.personnageActuel,i={};if(s&&""!==s){for(t=e.cc.personnages[s],r=Object.keys(t),itemsListLength=r.length,itemsListCounter=itemsListLength;itemsListCounter--;)n=r[o=itemsListLength-itemsListCounter-1],a=t[r[o]],i[n]=a,hash.add(i);clearCharacter(),interpretHash()}}function interpretHash(){var e=hash.get("sex");"m"===e?selectMale():"f"===e&&selectFemale()}function random(){var e=window.forms,t=e.length,r=Math.floor(Math.random()*t),o=e[r];for(k in o)o.hasOwnProperty(k)&&0;var n=[];for(var a in e[r])e[r].hasOwnProperty(a)&&n.push(a);var s=n.length,i=a=n[Math.floor(Math.random()*s)],l=e[r][i].length,c=Math.floor(Math.random()*l),u=e[r][i][c].toLowerCase();showRandom(a.toLowerCase(),u)}function showRandom(e,t){hideCompetition(e);var r=t,o=[];o[0]=e;var n=new Array,a="#"+o[0]+"_"+r;if(n[o[0]]=r,hash.add(n),"emotion"===o[0]){modCharacter(o[0],r),o=[];var s=GetEmotionGetLayers(r);for(emo in s){var i=s[emo]+"_"+t;o.push(i)}}for(e in o){sectionOptions=getOptions(o[e]);a="#"+o[e]+"_"+t;for(option in sectionOptions)optionId="#"+o[e]+"_"+sectionOptions[option],hideId(optionId);if("_"!=a.slice(-1)&&showId(a),"brows"===o[e]||"eyes"===o[e]||"mouth"===o[e]||"lashes"===o[e]||"sockets"===o[e])modCharacter(o[e],r);else(n=new Array)[o[e]]=r,hash.add(n),modCharacter(o[e],r)}}function hideCompetition(e){var t=["hair","mask","veil"],r=["shorts","pants"],o=["jacket","coat"];-1!=t.indexOf(e)?hideArray(t):-1!=r.indexOf(e)?hideArray(r):-1!=o.indexOf(e)&&hideArray(o)}function hideArray(e){for(section in e)for(option in sectionOptions=getOptions(e[section]),sectionOptions)if(""!=sectionOptions[option]){optionId="#"+e[section]+"_"+sectionOptions[option],hideId(optionId);var t=new Array;t[e[section]]="",hash.add(t),modCharacter(e[section],"")}}function showId(e){var t=[],r=!1;document.querySelector("#svg1");for(lyr in ga("send","event","menu","select",e),multiLayer)if(e.slice(1)==multiLayer[lyr][0]){r=!0;for(var o=1;o<=multiLayer[lyr][1];o++)idOf=e+"_"+o+"_of_"+multiLayer[lyr][1],t.push(idOf.slice(1))}!1===r&&t.push(e.slice(1)),loadFilesFromList(t)}function hideId(e){var t,r=document.querySelector("#svg1");for(lyr in multiLayer)if(e.slice(1)==multiLayer[lyr][0])for(var o=1;o<=multiLayer[lyr][1];o++)idOf=e+"_"+o+"_of_"+multiLayer[lyr][1],null!=(t=r.querySelector(idOf))&&r.removeChild(t);else null!=(t=r.querySelector(e))&&r.removeChild(t)}function getOptions(e){for(form in window.forms)if(capitalizeFirstLetter(e)in window.forms[form])return window.forms[form][capitalizeFirstLetter(e)]}function smartRandomStream(){}function smartRandomSingle(e){ga("send","event",{eventCategory:"Secret function",eventAction:"smartRandomSingle()",eventLabel:"Secret Patreon reveal for new random function."});var t,r,o,n,a,s,i,l,u,h,d,f,_,p,g,m=new Array,y=(m=new Array,{coat:15,collar:5,earings:90,earpiece:5,eyepatch:10,glasses:60,holster:5,horns:3,makeup:80,mask:5,necklace:75,pet:20,scarf:10,shirt:95,shoulderpads:5,smoke:20,suit:5,tie:15,veil:5,vest:15,warpaint:5,wings:3}),v=!1,b=!1,w=!1,x=fabricPallette.length;if(hash.clear(),resetCharacter(),(g=Math.floor(100*Math.random()))<=50){selectFemale();var k=femaleForm1,S=femaleForm2,C=femaleForm3,L=femaleForm4,q=femaleForm5,E=femaleForm6}else{selectMale();k=maleForm1,S=maleForm2,C=maleForm3,L=maleForm4,q=maleForm5,E=maleForm6}_=[k,S,C,L,q,E],g=Math.floor(24*Math.random()),n=m.skinColor=["#FFDFC4","#F0D5BE","#EECEB3","#E1B899","#E5C298","#FFDCB2","#E5B887","#E5A073","#E79E6D","#DB9065","#CE967C","#C67856","#BA6C49","#A57257","#F0C8C9","#DDA8A0","#B97C6D","#A8756C","#AD6452","#5C3836","#CB8442","#BD723C","#704139","#A3866A"][g].toLowerCase(),hash.add(m),defaultEyeColor(n),defaultHairColor(n),defaultPupilShape(),fabRoll=Math.floor(Math.random()*x),p=fabricPallette[fabRoll],setTimeout(function(){for(t=r=_.length;t--;){if(o=_[d=r-1-t],a=Object.keys(o),i=s=a.length,0===d)for(;i--;){l=o[a[s-1-i]],u=l.length;var e=Math.floor(Math.random()*u),n=a[s-1-i].toLowerCase(),g=l[e].toLowerCase();"hair"===n&&""!=g&&(w=!0),m[n]=g,hash.add(m)}if(d>0)for(;i--;)h="",l=o[a[s-1-i]],u=l.length,"pants"!=(n=a[s-1-i].toLowerCase())&&"underwear"!=n&&"body"!=n&&"cloak"!=n&&"shoes"!=n&&"bra"!=n&&"mask"!=n?(f=void 0!=y[n]?y[n]:50,(e=Math.floor(100*Math.random()))<=f&&(e=Math.floor(Math.random()*(u-1))+1,h=l[e].toLowerCase(),w&&("hat"!==n&&"veil"!==n||(h="")),(v||b)&&("suit"!==n&&"dress"!==n&&"coat"!==n&&"top"!==n||(h="")),v&&("shorts"!==n&&"dress"!==n&&"skirt"!==n&&"pants"!==n||(h="")),b&&("shirt"!==n&&"top"!==n&&"suit"!==n||(h=""))),""!=h&&("suit"===n||"dress"===n?("suit"!=h&&(v=!0),b=!0):"top"===n||"shirt"===n||"shirt"===n||"jacket"===n?b=!0:"shorts"!==n&&"skirt"!==n&&"pants"!==n||(v=!0))):"body"===n?(e=Math.floor(100*Math.random()),h=l[e=e<40?0:e<80?1:e<95?2:3].toLowerCase()):"cloak"===n||"bra"===n||"underwear"===n||"mask"===n?h="":(e=Math.floor(Math.random()*(u-1))+1,h=l[e].toLowerCase(),(v||b)&&("suit"!==n&&"dress"!==n&&"top"!==n||(h="")),v&&("shorts"!==n&&"dress"!==n&&"skirt"!==n&&"pants"!==n||(h="")),b&&("shirt"!==n&&"top"!==n&&"suit"!==n||(h="")),""!=h&&("suit"===n||"dress"===n?(v=!0,b=!0):"top"===n||"shirt"===n||"vest"===n||"shirt"===n||"jacket"===n?b=!0:"shorts"!==n&&"skirt"!==n&&"pants"!==n||(v=!0))),m[n]=h,("jacket"===n||"vest"===n&&"yellow"!=h||"pants"===n&&("suit"===h||"snowboard"===h)||"shorts"===n||"skirt"===n||"top"===n||"suit"===n||"dress"===n)&&(m[n+"Color"]=p),hash.add(m)}v||b?v?"f"!==c.choices.sex||b||coverTop(_):coverBottom(_):"f"===c.choices.sex?coverAll(_):coverBottom(_),launch()},300)}function coverAll(e){for(var t,r,o=formLen=e.length,n=new Array;o--;)t=e[formLen-1-o],r=Object.keys(t),keyLen=r.length,isInArray(capitalizeFirstLetter("dress"),r)&&(items=t[capitalizeFirstLetter("dress")],itemsLen=items.length,roll=Math.floor(Math.random()*(itemsLen-1))+1,newItem=items[roll].toLowerCase(),n.dress=newItem,hash.add(n))}function coverTop(e){for(var t,r,o=formLen=e.length,n=new Array;o--;)t=e[formLen-1-o],r=Object.keys(t),keyLen=r.length,isInArray(capitalizeFirstLetter("top"),r)&&(items=t[capitalizeFirstLetter("top")],itemsLen=items.length,roll=Math.floor(Math.random()*(itemsLen-1))+1,newItem=items[roll].toLowerCase(),n.top=newItem,hash.add(n))}function coverBottom(e){var t,r,o=c.choices.sex,n=formLen=e.length,a=new Array;if("m"===o){["pants"];var s="pants"}else{["shorts","skirt","pants"];s="skirt"}for(;n--;)t=e[formLen-1-n],r=Object.keys(t),keyLen=r.length,isInArray(capitalizeFirstLetter(s),r)&&(items=t[capitalizeFirstLetter(s)],itemsLen=items.length,roll=Math.floor(Math.random()*(itemsLen-1))+1,newItem=items[roll].toLowerCase(),a[s]=newItem,hash.add(a))}function shopLink(e){}function upload(){var e=getSVG();fetch("/upload",{method:"put",headers:{"content-type":"text/plain"},body:e}).then(function(e){return e.json()}).then(function({size:e,url:t}){return console.log(e,t),t}).catch(function(e){console.error("To Err is human, to forgive, divine.",e)})}function showSidebarLeft(){document.querySelector("#sidebar-left").classList.add("visible")}function hideSidebarLeft(){document.querySelector("#sidebar-left").classList.remove("visible")}function clearSidebarLeft(){document.querySelector("#sidebar-left").innerHTML=""}function showSidebarRight(){document.querySelector("#sidebar").classList.add("visible")}function hideSidebarRight(){document.querySelector("#sidebar").classList.remove("visible")}function clearSidebarRight(){var e=document.querySelector("#content_1");document.querySelector("#sidebar").classList.remove("visible"),e.innerHTML=""}function openThumbs(){hideColorPicker();openThumbsLogic(this)}function calcViewBox(e){var t=e.getBoundingClientRect();console.log("svgObject",e),console.log("rect",t)}function openThumbsLogic(e){var t=e.innerHTML,r=getSectionLayersList(t),o=t.toLowerCase(),n=document.querySelector(".section--selected");"iris"!==o&&"pupils"!==o||(o="eyeballs",r=["default"]),null!=n&&(purgeHiddenLayers(),n.classList.remove("section--selected")),loadSectionLayers(o,r,populateThumbs,!0),showThumbOptions(e),e.classList.add("section--selected");var a=document.querySelector(".widget"),s=a.previousSibling,i=document.querySelector("#sidebar-left"),l=document.querySelector(".sidebar-right");void 0===s.classList&&void 0!=s.previousSibling.classList&&(s=s.previousSibling),(s=s.querySelector(".accordeon__svg-container")).classList.contains("section-btn--hide")&&s.classList.toggle("section-btn--hide"),a.classList.contains("section--hide")&&a.classList.toggle("section--hide"),i.classList.contains("cherry")&&(i.classList.remove("cherry"),l.classList.add("visible")),l.classList.add("visible")}function populateThumbs(e){var t,r,o,n,a,s,i="options__emotion"===document.querySelector("#content_1 .selected--option").classList[2],l=e.cloneNode(!0),c=l.id,u=["round","feline","star"],h=u.length;if(l.style.opacity=1,"_of_"===c.slice(-5,-1))if(r=parseInt(c.slice(-6,-5)),t=parseInt(c.slice(-1)),c=c.slice(0,-7),o=document.querySelector("#content_1 ."+c),r!==t&&o.firstChild)if(2===t)o.insertBefore(l,o.firstChild);else{for(h=(n=o.childNodes).length;h--;)parseInt(n[h].id.slice(-6,-5))>r&&o.insertBefore(l,n[h]);r>n[n.length-1].id.slice(-6,-5)&&document.querySelector("#content_1 ."+c).appendChild(l)}else o.appendChild(l);else if(i)a=c.split("_"),"eyeballs_default"!=c&&document.querySelector("#content_1 .emotion_"+a[a.length-1]).appendChild(l);else if("body"===c.slice(0,4)&&"head"!=c.slice(5,9))console.log("layerID",c),"fault"===c.slice(-5)?document.querySelector("#content_1 .body_default").appendChild(l):"letic"===c.slice(-5)?document.querySelector("#content_1 .body_athletic").appendChild(l):"veiny"===c.slice(-5)?document.querySelector("#content_1 .body_veiny").appendChild(l):"id-00"===c.slice(-5)&&document.querySelector("#content_1 .body_android-00").appendChild(l);else if("eyeball_right"===c){if((s=document.querySelector(".selected--option").classList).contains("options__iris")&&(l=showPupilObject(l,getPupilShape()),c="iris_default",document.querySelector("#content_1 ."+c).appendChild(l)),s.contains("options__pupils"))for(;h--;)pupilObject=showPupilObject(l,u[h]).cloneNode(!0),document.querySelector("#content_1 .pupils_"+u[h]).appendChild(pupilObject)}else document.querySelector("#content_1 ."+c).appendChild(l)}function showThumbOptions(e){e=e.target||e;var t=document.querySelector(".options__"+e.innerHTML.toLowerCase()),r=document.querySelectorAll(".options__container"),o=r.length;if(null===document.querySelector(".section--selected")){for(;o--;)r[o].classList.remove("selected--option");t.classList.add("selected--option")}}function getViewBox(e,t){var r=e+"_"+t,o=c.choices.sex;if("m"===o)var n={body_athletic:"65 130 430 430",coat_snowboard:"160 124 230 230",coat_fall_long:"130 124 290 290",coat_trench:"130 124 290 290",earpiece_scouter:"252 117 30 30",ears_plugged:"254 122 20 20",ears_unplugged:"254 121 20 20",glasses_fpv:"250 97 64 64",hat_helmet_vietnam:"243 86 80 80",hat_jester:"208 54 140 140",hat_motorcycle:"243 86 80 80",hat_tuque:"243 85 80 80",hair_mohawk:"243 45 80 80",holster_revolver_hip:"220 240 130 130",horns_large:"235 58 90 90",jewelry_chain:"241 140 80 80",mask_horse:"233 80 100 100",mask_robin:"261 108 40 40",pet_canine:"82 403 150 150",pet_chicken:"45 403 150 150",pet_doge:"341 349 200 200",pet_feline:"381 439 128 128",pet_fox:"42 393 150 150",pet_gerbil:"125 475 64 64",pet_parrot:"203 116 80 80",pet_raven:"50 439 128 128",pet_rat:"300 439 128 128",pet_siamese_cat:"42 393 150 150",pet_vulture:"281 349 180 180",scar_horizontal_neck:"265 139 32 32",scar_horizontal_nose:"264 115 32 32",scar_vertical_heart:"249 164 64 64",scar_vertical_left:"264 110 32 32",scar_vertical_right:"264 110 32 32",scarf_drape:"185 140 190 190",tatoo_aum_chest:"248 165 64 64",tatoo_aum_left:"298 157 64 64",tatoo_aum_right:"198 154 64 64",tatoo_chaos_chest:"248 169 64 64",tatoo_chaos_left:"298 164 64 64",tatoo_chaos_right:"198 164 64 64",underwear_boxers:"224 258 120 120"},a={age:"261 109 40 40",belt:"185 135 190 190",body:"65 130 430 430",body_head:"249 95 64 64",cloak:"0 0 560 560",coat:"95 134 360 360",earpiece:"280 125 25 25",ears:"254 120 20 20",earings:"256 87 50 50",emotion:"259 113 42 42",eyepatch:"261 109 40 40",facialhair:"261 124 40 40",freckles:"261 109 40 40",glasses:"261 109 40 40",gloves:"206 308 40 40",hat:"241 70 80 80",hair:"243 80 80 80",headband:"241 90 80 80",holster:"215 150 130 130",horns:"256 87 50 50",iris:"271.72 125.05 4 4",jacket:"170 130 220 220",mask:"243 93 80 80",nose:"265 115 32 32",pants:"130 244 290 290",pupils:"271.72 125.05 4 4",scarf:"185 120 190 190",shirt:"190 140 190 190",shoes:"210 442 120 120",shoulderpads:"207 120 150 150",smoke:"252 132 32 32",socks:"210 442 120 120",suit:"65 130 430 430",tie:"241 140 80 80",underwear:"228 238 120 120",veil:"207 97 150 150",vest:"185 135 190 190",watch:"331 302 25 25",warpaint:"261 109 40 40",wings:"110 -30 350 350"};else if("f"===o)n={armband_egyptian_right:"221 205 38 38",armband_egyptian_left:"313 206 38 38",body_athletic:"65 130 430 430",bracelet_wonder_right:"190 258 58 58",bracelet_wonder_left:"313 234 58 58",bracelet_band_right:"198 299 24 24",bracelet_band_left:"322 272 24 24",bracelet_egyptian_right:"190 258 58 58",bracelet_egyptian_left:"313 234 58 58",bracelet_ornamental_right:"200 294 24 24",bracelet_ornamental_left:"326 270 24 24",bracelet_perl_right:"198 299 24 24",bracelet_perl_left:"322 272 24 24",bracelet_rings_right:"192 271 43 43",bracelet_rings_left:"318 254 43 43",coat_lab:"125 140 280 280",coat_winter_tubecollar:"125 120 280 280",dress_bobafett:"160 165 230 230",dress_corset:"175 180 200 200",dress_japanese_pleat:"105 140 340 340",dress_parisian_fall:"105 160 340 340",dress_german_expression:"75 160 400 400",dress_short:"175 180 200 200",dress_suit:"175 140 200 200",dress_waitress:"160 140 230 230",earings_gold_ring_left:"289 141 20 20",earpiece_scouter:"253 126 30 30",glasses_fpv:"252 109 64 64",hat_helmet_vietnam:"243 98 80 80",hat_motorcycle:"243 98 80 80",hat_tiara:"262 98 40 40",hat_tuque:"243 97 80 80",hair_afro:"243 80 80 80",hair_mohawk:"243 57 80 80",holster_revolver_hip:"213 245 130 130",holster_revolver_thigh:"213 285 130 130",mask_horse:"233 92 100 100",mask_robin:"261 120 40 40",pet_canine:"82 403 150 150",pet_chicken:"45 403 150 150",pet_doge:"341 349 200 200",pet_feline:"381 439 128 128",pet_fox:"42 393 150 150",pet_gerbil:"125 475 64 64",pet_parrot:"275 126 80 80",pet_raven:"50 439 128 128",pet_rat:"300 439 128 128",pet_siamese_cat:"42 393 150 150",pet_vulture:"281 349 180 180",scar_horizontal_neck:"265 139 32 32",scar_horizontal_nose:"264 115 32 32",scar_vertical_heart:"249 164 64 64",scar_vertical_left:"264 110 32 32",scar_vertical_right:"264 110 32 32",scarf_drape:"185 140 190 190",suit_asymetric:"175 140 200 200",suit_onepiece:"175 140 200 200",tatoo_archeopteryx_left:"282 173 64 64",tatoo_aum_chest:"248 165 64 64",tatoo_aum_left:"298 157 64 64",tatoo_aum_right:"198 154 64 64",tatoo_chaos_chest:"248 175 48 48",tatoo_chaos_left:"298 170 48 48",tatoo_chaos_right:"210 164 48 48",tatoo_tribal_face:"258 105 50 50",top_tank:"215 165 120 120",top_tube_v:"223 170 120 120",underwear_boxers:"224 258 120 120"},a={age:"261 121 40 40",armband:"313 206 38 38",belt:"175 185 190 190",body:"65 130 430 430",body_head:"249 107 64 64",bra:"220 160 100 100",bracelet:"316 252 48 48",coat:"125 79 280 280",collar:"255 160 48 48",dress:"160 150 230 230",earpiece:"280 137 25 25",earings:"257 141 20 20",ears:"254 130 20 20",emotion:"261 125 42 42",eyepatch:"261 121 40 40",facialhair:"261 124 40 40",glasses:"263 121 40 40",gloves:"206 308 40 40",hat:"241 82 80 80",hair:"243 92 80 80",headband:"241 102 80 80",holster:"215 150 130 130",horns:"257 99 50 50",iris:"274.125 137.55 3.2 3.2",jacket:"170 130 220 220",leggings:"136 305 260 260",makeup:"267.5 123 30 30",mask:"243 105 80 80",nails:"200 327 25 25",necklace:"255 160 48 48",nose:"265 127 32 32",pants:"130 244 290 290",pupils:"274.125 137.55 3.2 3.2",scarf:"185 120 190 190",shirt:"190 140 190 190",shoes:"225 442 120 120",shorts:"215 245 120 120",skirt:"190 220 180 180",shoulderpads:"207 100 150 150",smoke:"255 144 32 32",socks:"225 442 120 120",suit:"80 130 400 400",tie:"241 140 80 80",top:"225 160 100 100",underwear:"232 258 90 90",veil:"207 97 150 150",vest:"185 135 190 190",wings:"110 -30 350 350"};return n[r]&&""!=t?n[r]:a[e]&&""!=t?a[e]:"0 0 560 560"}function isLandscape(){var e=window,t=document,r=t.documentElement,o=t.getElementsByTagName("body")[0];return(e.innerWidth||r.clientWidth||o.clientWidth)>(e.innerHeight||r.clientHeight||o.clientHeight)}function zoomIn(){var e=c.sex;shape=document.getElementById("svg1"),animateZoom("m"==e?"140 73 290 290":"225 86 110 110")}function zoomOut(){c.sex;shape=document.getElementById("svg1"),animateZoom(newViewBox)}function zoomFace(){isLandscape();var e=c.sex;shape=document.getElementById("svg1"),animateZoom("m"==e?"242.6 99 80 80":"243 109 80 80")}function zoomTorso(){var e=c.sex;shape=document.getElementById("svg1"),animateZoom("m"==e?"204 85 150 150":"207 97 150 150")}function zoomBody(){var e=c.sex;shape=document.getElementById("svg1"),animateZoom("m"==e?"136 73 290 290":"140 84 290 290")}function zoomFull(){c.sex;shape=document.getElementById("svg1"),animateZoom("10 50 540 540")}function viewBoxZoom(e){var t=e.target.value;3==t?zoomFace():2==t?zoomTorso():1==t?zoomBody():0==t&&zoomFull()}function sectionZoom(e){var t=document.querySelector("#zoomLevel");"Head"===e&&(t.value=3,zoomFace()),"Accessories"===e&&(t.value=3,zoomFace()),"Torso"===e&&(t.value=2,zoomTorso()),"Body"===e&&(t.value=1,zoomBody()),"Legs"===e&&(t.value=0,zoomFull()),"Feet"===e&&(t.value=0,zoomFull())}function animateZoom(e){var t,r,o,n,a,s,i,l,c,u=document.querySelector("#svg1"),h=u.viewBox.baseVal,d=350,f=Date.now(),_=h.x,p=h.y,g=h.width,m=h.height;"10 50 540 540"==e||u.classList.contains("zoomed")?"10 50 540 540"===e&&u.classList.contains("zoomed")&&u.classList.remove("zoomed"):u.classList.add("zoomed"),e=e.split(" "),n=e[0]-h.x,a=e[1]-h.y,s=e[2]-h.width,i=e[3]-h.height,t=requestAnimationFrame(function e(){r=Date.now(),(l=(o=r-f)/d)>1&&(l=1),c=_+n*l+" "+(p+a*l)+" "+(g+s*l)+" "+(m+i*l),u.setAttribute("viewBox",c),o>=d?cancelAnimationFrame(t):t=requestAnimationFrame(e)})}getDbSession().then(getDbUser).then(function(e){var t,r=[];if(myUsername=e.name,currentUser=e,e.cc&&e.cc.personnages&&e.cc.personnageActuel&&e.cc.personnages[e.cc.personnageActuel])for(t in personnages=e.cc.personnages,personnageActuel=e.cc.personnageActuel,e.cc.personnages[e.cc.personnageActuel])r.push(encodeURIComponent(t)+"="+encodeURIComponent(e.cc.personnages[e.cc.personnageActuel][t]));manageCharacters(currentUser)}).catch(function(e){console.log("getDbUser error",e)}),window.onload=function(){var e=document.querySelector("#aboutButton"),t=document.querySelector("#faqButton"),r=document.querySelector("#shopButton"),o=document.querySelector("#whoButton"),n=document.querySelector("#logoutButton"),a=document.querySelector("#loginButton"),s=document.querySelector("#registerButton"),i=document.querySelector(".js-register-link"),l=document.querySelector("#creditsButton"),c=document.querySelector(".hamburger-btn"),u=document.querySelector("#zoomLevel"),h=document.getElementById("male_silhouette"),d=document.getElementById("female_silhouette"),f=(document.querySelector("#sidebar").cloneNode(!0),document.querySelector("#svg1")),_=document.querySelector("#patreonButton"),p=document.querySelector("#patreon-btn"),g=document.querySelector("#new-char-btn"),m=document.querySelector("#save-char-to-cloud-btn"),y=document.querySelector("#load-char-btn"),v=document.querySelector("#nightModeButton"),b=document.querySelector("#bigRedButton");e&&"function"==typeof showAbout&&e.addEventListener("click",showAbout,!1),t&&"function"==typeof showFAQ&&t.addEventListener("click",showFAQ,!1),r&&"function"==typeof showShop&&r.addEventListener("click",showShop,!1),o&&"function"==typeof whoami&&o.addEventListener("click",whoami,!1),n&&"function"==typeof logout&&n.addEventListener("click",logout,!1),a&&"function"==typeof loginMenu&&a.addEventListener("click",loginMenu,!1),s&&"function"==typeof registerMenu&&s.addEventListener("click",registerMenu,!1),i&&"function"==typeof registerMenu&&i.addEventListener("click",registerMenu,!1),l&&"function"==typeof rollCredits&&l.addEventListener("click",rollCredits,!1),c&&"function"==typeof hamburger&&c.addEventListener("click",hamburger,!1),u&&"function"==typeof viewBoxZoom&&u.addEventListener("change",viewBoxZoom,!1),h&&"function"==typeof selectMale&&h.addEventListener("click",selectMale,!1),d&&"function"==typeof selectFemale&&d.addEventListener("click",selectFemale,!1),f&&"function"==typeof clickSelect&&f.addEventListener("click",clickSelect,!1),f&&"function"==typeof layerHighlight&&f.addEventListener("mouseover",layerHighlight,!1),_&&"function"==typeof tattle&&_.addEventListener("click",tattle,!1),p&&"function"==typeof gotoPatreon&&p.addEventListener("click",gotoPatreon,!1),g&&"function"==typeof gotoNewChar&&g.addEventListener("click",gotoNewChar,!1),m&&"function"==typeof saveCharToCloud&&m.addEventListener("click",saveCharToCloud,!1),y&&"function"==typeof gotoLoadChar&&y.addEventListener("click",gotoLoadChar,!1),v&&"function"==typeof switchNightMode&&v.addEventListener("click",switchNightMode,!1),b&&"function"==typeof smartRandomSingle&&b.addEventListener("click",smartRandomSingle,!1),startup()};